const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Dr=Object.defineProperty;var vi=t=>{throw TypeError(t)};var jr=(t,e,n)=>e in t?Dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>jr(t,typeof e!="symbol"?e+"":e,n),Tn=(t,e,n)=>e.has(t)||vi("Cannot "+n);var J=(t,e,n)=>(Tn(t,e,"read from private field"),n?n.call(t):e.get(t)),Se=(t,e,n)=>e.has(t)?vi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ve=(t,e,n,i)=>(Tn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Rn=(t,e,n)=>(Tn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ie(){}function Nr(t,e){for(const n in e)t[n]=e[n];return t}function mr(t){return t()}function wi(){return Object.create(null)}function tt(t){t.forEach(mr)}function Kn(t){return typeof t=="function"}function nt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ln;function ki(t,e){return t===e?!0:(ln||(ln=document.createElement("a")),ln.href=e,t===ln.href)}function Br(t){return Object.keys(t).length===0}function Pr(t,...e){if(t==null){for(const i of e)i(void 0);return Ie}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function fn(t){let e;return Pr(t,n=>e=n)(),e}function Mn(t,e,n,i){if(t){const r=pr(t,e,n,i);return t[0](r)}}function pr(t,e,n,i){return t[1]&&i?Nr(n.ctx.slice(),t[1](i(e))):n.ctx}function Fn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function Dn(t,e,n,i,r,s){if(r){const o=pr(e,n,i,s);t.p(o,r)}}function jn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function d(t,e){t.appendChild(e)}function ae(t,e,n){t.insertBefore(e,n||null)}function le(t){t.parentNode&&t.parentNode.removeChild(t)}function _n(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function Y(){return H(" ")}function yr(){return H("")}function we(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ur(t){return Array.from(t.childNodes)}function ke(t,e){e=""+e,t.data!==e&&(t.data=e)}function Oe(t,e){t.value=e??""}function de(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function st(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function an(t){const e=t.querySelector(":checked");return e&&e.__value}function Ot(t,e,n){t.classList.toggle(e,!!n)}function qr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let qt;function Ut(t){qt=t}function Jn(){if(!qt)throw new Error("Function called outside component initialization");return qt}function Gn(t){Jn().$$.on_mount.push(t)}function Yn(t){Jn().$$.on_destroy.push(t)}function Vr(){const t=Jn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=qr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const Rt=[],Vt=[];let Lt=[];const Ei=[],Wr=Promise.resolve();let Nn=!1;function Hr(){Nn||(Nn=!0,Wr.then(Fe))}function et(t){Lt.push(t)}const On=new Set;let It=0;function Fe(){if(It!==0)return;const t=qt;do{try{for(;It<Rt.length;){const e=Rt[It];It++,Ut(e),Kr(e.$$)}}catch(e){throw Rt.length=0,It=0,e}for(Ut(null),Rt.length=0,It=0;Vt.length;)Vt.pop()();for(let e=0;e<Lt.length;e+=1){const n=Lt[e];On.has(n)||(On.add(n),n())}Lt.length=0}while(Rt.length);for(;Ei.length;)Ei.pop()();Nn=!1,On.clear(),Ut(t)}function Kr(t){if(t.fragment!==null){t.update(),tt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(et)}}function Jr(t){const e=[],n=[];Lt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Lt=e}const cn=new Set;let wt;function Qn(){wt={r:0,c:[],p:wt}}function Zn(){wt.r||tt(wt.c),wt=wt.p}function ce(t,e){t&&t.i&&(cn.delete(t),t.i(e))}function me(t,e,n,i){if(t&&t.o){if(cn.has(t))return;cn.add(t),wt.c.push(()=>{cn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ge(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Gr(t,e){t.d(1),e.delete(t.key)}function Yr(t,e){me(t,1,1,()=>{e.delete(t.key)})}function br(t,e,n,i,r,s,o,l,a,c,h,m){let _=t.length,v=s.length,g=_;const E={};for(;g--;)E[t[g].key]=g;const D=[],R=new Map,B=new Map,U=[];for(g=v;g--;){const S=m(r,s,g),u=n(S);let f=o.get(u);f?U.push(()=>f.p(S,e)):(f=c(u,S),f.c()),R.set(u,D[g]=f),u in E&&B.set(u,Math.abs(g-E[u]))}const W=new Set,N=new Set;function X(S){ce(S,1),S.m(l,h),o.set(S.key,S),h=S.first,v--}for(;_&&v;){const S=D[v-1],u=t[_-1],f=S.key,p=u.key;S===u?(h=S.first,_--,v--):R.has(p)?!o.has(f)||W.has(f)?X(S):N.has(p)?_--:B.get(f)>B.get(p)?(N.add(f),X(S)):(W.add(p),_--):(a(u,o),_--)}for(;_--;){const S=t[_];R.has(S.key)||a(S,o)}for(;v;)X(D[v-1]);return tt(U),D}function We(t){t&&t.c()}function je(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),et(()=>{const s=t.$$.on_mount.map(mr).filter(Kn);t.$$.on_destroy?t.$$.on_destroy.push(...s):tt(s),t.$$.on_mount=[]}),r.forEach(et)}function Ne(t,e){const n=t.$$;n.fragment!==null&&(Jr(n.after_update),tt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Qr(t,e){t.$$.dirty[0]===-1&&(Rt.push(t),Hr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(t,e,n,i,r,s,o=null,l=[-1]){const a=qt;Ut(t);const c=t.$$={fragment:null,ctx:[],props:s,update:Ie,not_equal:r,bound:wi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:wi(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},(m,_,...v)=>{const g=v.length?v[0]:_;return c.ctx&&r(c.ctx[m],c.ctx[m]=g)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](g),h&&Qr(t,m)),_}):[],c.update(),h=!0,tt(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const m=Ur(e.target);c.fragment&&c.fragment.l(m),m.forEach(le)}else c.fragment&&c.fragment.c();e.intro&&ce(t.$$.fragment),je(t,e.target,e.anchor),Fe()}Ut(a)}class ut{constructor(){ee(this,"$$");ee(this,"$$set")}$destroy(){Ne(this,1),this.$destroy=Ie}$on(e,n){if(!Kn(n))return Ie;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Br(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Zr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Zr);const Tt=[];function vr(t,e=Ie){let n;const i=new Set;function r(l){if(nt(t,l)&&(t=l,n)){const a=!Tt.length;for(const c of i)c[1](),Tt.push(c,t);if(a){for(let c=0;c<Tt.length;c+=2)Tt[c][0](Tt[c+1]);Tt.length=0}}}function s(l){r(l(t))}function o(l,a=Ie){const c=[l,a];return i.add(c),i.size===1&&(n=e(r,s)||Ie),l(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Xr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},l=0,a={parse:function(u,f){var p=(f=f||{}).dynamicTyping||!1;if(S(p)&&(f.dynamicTypingFunction=p,p={}),f.dynamicTyping=p,f.transform=!!S(f.transform)&&f.transform,f.worker&&a.WORKERS_SUPPORTED){var k=function(){if(!a.WORKERS_SUPPORTED)return!1;var w=(q=i.URL||i.webkitURL||null,O=n.toString(),a.BLOB_URL||(a.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))),M=new i.Worker(w),q,O;return M.onmessage=B,M.id=l++,o[M.id]=M}();return k.userStep=f.step,k.userChunk=f.chunk,k.userComplete=f.complete,k.userError=f.error,f.step=S(f.step),f.chunk=S(f.chunk),f.complete=S(f.complete),f.error=S(f.error),delete f.worker,void k.postMessage({input:u,config:f,workerId:k.id})}var I=null;return a.NODE_STREAM_INPUT,typeof u=="string"?(u=function(w){return w.charCodeAt(0)===65279?w.slice(1):w}(u),I=f.download?new m(f):new v(f)):u.readable===!0&&S(u.read)&&S(u.on)?I=new g(f):(i.File&&u instanceof File||u instanceof Object)&&(I=new _(f)),I.stream(u)},unparse:function(u,f){var p=!1,k=!0,I=",",w=`\r
`,M='"',q=M+M,O=!1,z=null,K=!1;(function(){if(typeof f=="object"){if(typeof f.delimiter!="string"||a.BAD_DELIMITERS.filter(function(L){return f.delimiter.indexOf(L)!==-1}).length||(I=f.delimiter),(typeof f.quotes=="boolean"||typeof f.quotes=="function"||Array.isArray(f.quotes))&&(p=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(O=f.skipEmptyLines),typeof f.newline=="string"&&(w=f.newline),typeof f.quoteChar=="string"&&(M=f.quoteChar),typeof f.header=="boolean"&&(k=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");z=f.columns}f.escapeChar!==void 0&&(q=f.escapeChar+M),(typeof f.escapeFormulae=="boolean"||f.escapeFormulae instanceof RegExp)&&(K=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var C=new RegExp(D(M),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return ue(null,u,O);if(typeof u[0]=="object")return ue(z||Object.keys(u[0]),u,O)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||z),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),ue(u.fields||[],u.data||[],O);throw new Error("Unable to serialize unrecognized input");function ue(L,ie,T){var P="";typeof L=="string"&&(L=JSON.parse(L)),typeof ie=="string"&&(ie=JSON.parse(ie));var te=Array.isArray(L)&&0<L.length,$=!Array.isArray(ie[0]);if(te&&k){for(var Q=0;Q<L.length;Q++)0<Q&&(P+=I),P+=x(L[Q],Q);0<ie.length&&(P+=w)}for(var F=0;F<ie.length;F++){var V=te?L.length:ie[F].length,ne=!1,ge=te?Object.keys(ie[F]).length===0:ie[F].length===0;if(T&&!te&&(ne=T==="greedy"?ie[F].join("").trim()==="":ie[F].length===1&&ie[F][0].length===0),T==="greedy"&&te){for(var re=[],Ee=0;Ee<V;Ee++){var fe=$?L[Ee]:Ee;re.push(ie[F][fe])}ne=re.join("").trim()===""}if(!ne){for(var Z=0;Z<V;Z++){0<Z&&!ge&&(P+=I);var Be=te&&$?L[Z]:Z;P+=x(ie[F][Be],Z)}F<ie.length-1&&(!T||0<V&&!ge)&&(P+=w)}}return P}function x(L,ie){if(L==null)return"";if(L.constructor===Date)return JSON.stringify(L).slice(1,25);var T=!1;K&&typeof L=="string"&&K.test(L)&&(L="'"+L,T=!0);var P=L.toString().replace(C,q);return(T=T||p===!0||typeof p=="function"&&p(L,ie)||Array.isArray(p)&&p[ie]||function(te,$){for(var Q=0;Q<$.length;Q++)if(-1<te.indexOf($[Q]))return!0;return!1}(P,a.BAD_DELIMITERS)||-1<P.indexOf(I)||P.charAt(0)===" "||P.charAt(P.length-1)===" ")?M+P+M:P}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!i.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=R,a.ParserHandle=E,a.NetworkStreamer=m,a.FileStreamer=_,a.StringStreamer=v,a.ReadableStreamStreamer=g,i.jQuery){var c=i.jQuery;c.fn.parse=function(u){var f=u.config||{},p=[];return this.each(function(w){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)p.push({file:this.files[M],inputElem:this,instanceConfig:c.extend({},f)})}),k(),this;function k(){if(p.length!==0){var w,M,q,O,z=p[0];if(S(u.before)){var K=u.before(z.file,z.inputElem);if(typeof K=="object"){if(K.action==="abort")return w="AbortError",M=z.file,q=z.inputElem,O=K.reason,void(S(u.error)&&u.error({name:w},M,q,O));if(K.action==="skip")return void I();typeof K.config=="object"&&(z.instanceConfig=c.extend(z.instanceConfig,K.config))}else if(K==="skip")return void I()}var C=z.instanceConfig.complete;z.instanceConfig.complete=function(ue){S(C)&&C(ue,z.file,z.inputElem),I()},a.parse(z.file,z.instanceConfig)}else S(u.complete)&&u.complete()}function I(){p.splice(0,1),k()}}}function h(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(f){var p=N(f);p.chunkSize=parseInt(p.chunkSize),f.step||f.chunk||(p.chunkSize=null),this._handle=new E(p),(this._handle.streamer=this)._config=p}).call(this,u),this.parseChunk=function(f,p){if(this.isFirstChunk&&S(this._config.beforeFirstChunk)){var k=this._config.beforeFirstChunk(f);k!==void 0&&(f=k)}this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+f;this._partialLine="";var w=this._handle.parse(I,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var M=w.meta.cursor;this._finished||(this._partialLine=I.substring(M-this._baseIndex),this._baseIndex=M),w&&w.data&&(this._rowCount+=w.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:w,workerId:a.WORKER_ID,finished:q});else if(S(this._config.chunk)&&!p){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);w=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!q||!S(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(f){S(this._config.error)?this._config.error(f):s&&this._config.error&&i.postMessage({workerId:a.WORKER_ID,error:f,finished:!1})}}function m(u){var f;(u=u||{}).chunkSize||(u.chunkSize=a.RemoteChunkSize),h.call(this,u),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(p){this._input=p,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),r||(f.onload=X(this._chunkLoaded,this),f.onerror=X(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var p=this._config.downloadRequestHeaders;for(var k in p)f.setRequestHeader(k,p[k])}if(this._config.chunkSize){var I=this._start+this._config.chunkSize-1;f.setRequestHeader("Range","bytes="+this._start+"-"+I)}try{f.send(this._config.downloadRequestBody)}catch(w){this._chunkError(w.message)}r&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:f.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(p){var k=p.getResponseHeader("Content-Range");return k===null?-1:parseInt(k.substring(k.lastIndexOf("/")+1))}(f),this.parseChunk(f.responseText)))},this._chunkError=function(p){var k=f.statusText||p;this._sendError(new Error(k))}}function _(u){var f,p;(u=u||{}).chunkSize||(u.chunkSize=a.LocalChunkSize),h.call(this,u);var k=typeof FileReader<"u";this.stream=function(I){this._input=I,p=I.slice||I.webkitSlice||I.mozSlice,k?((f=new FileReader).onload=X(this._chunkLoaded,this),f.onerror=X(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var I=this._input;if(this._config.chunkSize){var w=Math.min(this._start+this._config.chunkSize,this._input.size);I=p.call(I,this._start,w)}var M=f.readAsText(I,this._config.encoding);k||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(I){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(I.target.result)},this._chunkError=function(){this._sendError(f.error)}}function v(u){var f;h.call(this,u=u||{}),this.stream=function(p){return f=p,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var p,k=this._config.chunkSize;return k?(p=f.substring(0,k),f=f.substring(k)):(p=f,f=""),this._finished=!f,this.parseChunk(p)}}}function g(u){h.call(this,u=u||{});var f=[],p=!0,k=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(I){this._input=I,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):p=!0},this._streamData=X(function(I){try{f.push(typeof I=="string"?I:I.toString(this._config.encoding)),p&&(p=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(w){this._streamError(w)}},this),this._streamError=X(function(I){this._streamCleanUp(),this._sendError(I)},this),this._streamEnd=X(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(u){var f,p,k,I=Math.pow(2,53),w=-I,M=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,z=0,K=0,C=!1,ue=!1,x=[],L={data:[],errors:[],meta:{}};if(S(u.step)){var ie=u.step;u.step=function(F){if(L=F,te())P();else{if(P(),L.data.length===0)return;z+=F.data.length,u.preview&&z>u.preview?p.abort():(L.data=L.data[0],ie(L,O))}}}function T(F){return u.skipEmptyLines==="greedy"?F.join("").trim()==="":F.length===1&&F[0].length===0}function P(){return L&&k&&(Q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),k=!1),u.skipEmptyLines&&(L.data=L.data.filter(function(F){return!T(F)})),te()&&function(){if(!L)return;function F(ne,ge){S(u.transformHeader)&&(ne=u.transformHeader(ne,ge)),x.push(ne)}if(Array.isArray(L.data[0])){for(var V=0;te()&&V<L.data.length;V++)L.data[V].forEach(F);L.data.splice(0,1)}else L.data.forEach(F)}(),function(){if(!L||!u.header&&!u.dynamicTyping&&!u.transform)return L;function F(ne,ge){var re,Ee=u.header?{}:[];for(re=0;re<ne.length;re++){var fe=re,Z=ne[re];u.header&&(fe=re>=x.length?"__parsed_extra":x[re]),u.transform&&(Z=u.transform(Z,fe)),Z=$(fe,Z),fe==="__parsed_extra"?(Ee[fe]=Ee[fe]||[],Ee[fe].push(Z)):Ee[fe]=Z}return u.header&&(re>x.length?Q("FieldMismatch","TooManyFields","Too many fields: expected "+x.length+" fields but parsed "+re,K+ge):re<x.length&&Q("FieldMismatch","TooFewFields","Too few fields: expected "+x.length+" fields but parsed "+re,K+ge)),Ee}var V=1;return!L.data.length||Array.isArray(L.data[0])?(L.data=L.data.map(F),V=L.data.length):L.data=F(L.data,0),u.header&&L.meta&&(L.meta.fields=x),K+=V,L}()}function te(){return u.header&&x.length===0}function $(F,V){return ne=F,u.dynamicTypingFunction&&u.dynamicTyping[ne]===void 0&&(u.dynamicTyping[ne]=u.dynamicTypingFunction(ne)),(u.dynamicTyping[ne]||u.dynamicTyping)===!0?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&(function(ge){if(M.test(ge)){var re=parseFloat(ge);if(w<re&&re<I)return!0}return!1}(V)?parseFloat(V):q.test(V)?new Date(V):V===""?null:V):V;var ne}function Q(F,V,ne,ge){var re={type:F,code:V,message:ne};ge!==void 0&&(re.row=ge),L.errors.push(re)}this.parse=function(F,V,ne){var ge=u.quoteChar||'"';if(u.newline||(u.newline=function(fe,Z){fe=fe.substring(0,1048576);var Be=new RegExp(D(Z)+"([^]*?)"+D(Z),"gm"),Le=(fe=fe.replace(Be,"")).split("\r"),ze=fe.split(`
`),pe=1<ze.length&&ze[0].length<Le[0].length;if(Le.length===1||pe)return`
`;for(var Ae=0,se=0;se<Le.length;se++)Le[se][0]===`
`&&Ae++;return Ae>=Le.length/2?`\r
`:"\r"}(F,ge)),k=!1,u.delimiter)S(u.delimiter)&&(u.delimiter=u.delimiter(F),L.meta.delimiter=u.delimiter);else{var re=function(fe,Z,Be,Le,ze){var pe,Ae,se,_e;ze=ze||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var Ze=0;Ze<ze.length;Ze++){var G=ze[Ze],xe=0,Ke=0,Je=0;se=void 0;for(var Ce=new R({comments:Le,delimiter:G,newline:Z,preview:10}).parse(fe),Ye=0;Ye<Ce.data.length;Ye++)if(Be&&T(Ce.data[Ye]))Je++;else{var Qe=Ce.data[Ye].length;Ke+=Qe,se!==void 0?0<Qe&&(xe+=Math.abs(Qe-se),se=Qe):se=Qe}0<Ce.data.length&&(Ke/=Ce.data.length-Je),(Ae===void 0||xe<=Ae)&&(_e===void 0||_e<Ke)&&1.99<Ke&&(Ae=xe,pe=G,_e=Ke)}return{successful:!!(u.delimiter=pe),bestDelimiter:pe}}(F,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);re.successful?u.delimiter=re.bestDelimiter:(k=!0,u.delimiter=a.DefaultDelimiter),L.meta.delimiter=u.delimiter}var Ee=N(u);return u.preview&&u.header&&Ee.preview++,f=F,p=new R(Ee),L=p.parse(f,V,ne),P(),C?{meta:{paused:!0}}:L||{meta:{paused:!1}}},this.paused=function(){return C},this.pause=function(){C=!0,p.abort(),f=S(u.chunk)?"":f.substring(p.getCharIndex())},this.resume=function(){O.streamer._halted?(C=!1,O.streamer.parseChunk(f,!0)):setTimeout(O.resume,3)},this.aborted=function(){return ue},this.abort=function(){ue=!0,p.abort(),L.meta.aborted=!0,S(u.complete)&&u.complete(L),f=""}}function D(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(u){var f,p=(u=u||{}).delimiter,k=u.newline,I=u.comments,w=u.step,M=u.preview,q=u.fastMode,O=f=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(O=u.escapeChar),(typeof p!="string"||-1<a.BAD_DELIMITERS.indexOf(p))&&(p=","),I===p)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<a.BAD_DELIMITERS.indexOf(I))&&(I=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var z=0,K=!1;this.parse=function(C,ue,x){if(typeof C!="string")throw new Error("Input must be a string");var L=C.length,ie=p.length,T=k.length,P=I.length,te=S(w),$=[],Q=[],F=[],V=z=0;if(!C)return Te();if(u.header&&!ue){var ne=C.split(k)[0].split(p),ge=[],re={},Ee=!1;for(var fe in ne){var Z=ne[fe];S(u.transformHeader)&&(Z=u.transformHeader(Z,fe));var Be=Z,Le=re[Z]||0;for(0<Le&&(Ee=!0,Be=Z+"_"+Le),re[Z]=Le+1;ge.includes(Be);)Be=Be+"_"+Le;ge.push(Be)}if(Ee){var ze=C.split(k);ze[0]=ge.join(p),C=ze.join(k)}}if(q||q!==!1&&C.indexOf(f)===-1){for(var pe=C.split(k),Ae=0;Ae<pe.length;Ae++){if(F=pe[Ae],z+=F.length,Ae!==pe.length-1)z+=k.length;else if(x)return Te();if(!I||F.substring(0,P)!==I){if(te){if($=[],Je(F.split(p)),ft(),K)return Te()}else Je(F.split(p));if(M&&M<=Ae)return $=$.slice(0,M),Te(!0)}}return Te()}for(var se=C.indexOf(p,z),_e=C.indexOf(k,z),Ze=new RegExp(D(O)+D(f),"g"),G=C.indexOf(f,z);;)if(C[z]!==f)if(I&&F.length===0&&C.substring(z,z+P)===I){if(_e===-1)return Te();z=_e+T,_e=C.indexOf(k,z),se=C.indexOf(p,z)}else if(se!==-1&&(se<_e||_e===-1))F.push(C.substring(z,se)),z=se+ie,se=C.indexOf(p,z);else{if(_e===-1)break;if(F.push(C.substring(z,_e)),Qe(_e+T),te&&(ft(),K))return Te();if(M&&$.length>=M)return Te(!0)}else for(G=z,z++;;){if((G=C.indexOf(f,G+1))===-1)return x||Q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:$.length,index:z}),Ye();if(G===L-1)return Ye(C.substring(z,G).replace(Ze,f));if(f!==O||C[G+1]!==O){if(f===O||G===0||C[G-1]!==O){se!==-1&&se<G+1&&(se=C.indexOf(p,G+1)),_e!==-1&&_e<G+1&&(_e=C.indexOf(k,G+1));var xe=Ce(_e===-1?se:Math.min(se,_e));if(C.substr(G+1+xe,ie)===p){F.push(C.substring(z,G).replace(Ze,f)),C[z=G+1+xe+ie]!==f&&(G=C.indexOf(f,z)),se=C.indexOf(p,z),_e=C.indexOf(k,z);break}var Ke=Ce(_e);if(C.substring(G+1+Ke,G+1+Ke+T)===k){if(F.push(C.substring(z,G).replace(Ze,f)),Qe(G+1+Ke+T),se=C.indexOf(p,z),G=C.indexOf(f,z),te&&(ft(),K))return Te();if(M&&$.length>=M)return Te(!0);break}Q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:$.length,index:z}),G++}}else G++}return Ye();function Je(he){$.push(he),V=z}function Ce(he){var Xe=0;if(he!==-1){var St=C.substring(G+1,he);St&&St.trim()===""&&(Xe=St.length)}return Xe}function Ye(he){return x||(he===void 0&&(he=C.substring(z)),F.push(he),z=L,Je(F),te&&ft()),Te()}function Qe(he){z=he,Je(F),F=[],_e=C.indexOf(k,z)}function Te(he){return{data:$,errors:Q,meta:{delimiter:p,linebreak:k,aborted:K,truncated:!!he,cursor:V+(ue||0)}}}function ft(){w(Te()),$=[],Q=[]}},this.abort=function(){K=!0},this.getCharIndex=function(){return z}}function B(u){var f=u.data,p=o[f.workerId],k=!1;if(f.error)p.userError(f.error,f.file);else if(f.results&&f.results.data){var I={abort:function(){k=!0,U(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(S(p.userStep)){for(var w=0;w<f.results.data.length&&(p.userStep({data:f.results.data[w],errors:f.results.errors,meta:f.results.meta},I),!k);w++);delete f.results}else S(p.userChunk)&&(p.userChunk(f.results,I,f.file),delete f.results)}f.finished&&!k&&U(f.workerId,f.results)}function U(u,f){var p=o[u];S(p.userComplete)&&p.userComplete(f),p.terminate(),delete o[u]}function W(){throw new Error("Not implemented.")}function N(u){if(typeof u!="object"||u===null)return u;var f=Array.isArray(u)?[]:{};for(var p in u)f[p]=N(u[p]);return f}function X(u,f){return function(){u.apply(f,arguments)}}function S(u){return typeof u=="function"}return s&&(i.onmessage=function(u){var f=u.data;if(a.WORKER_ID===void 0&&f&&(a.WORKER_ID=f.workerId),typeof f.input=="string")i.postMessage({workerId:a.WORKER_ID,results:a.parse(f.input,f.config),finished:!0});else if(i.File&&f.input instanceof File||f.input instanceof Object){var p=a.parse(f.input,f.config);p&&i.postMessage({workerId:a.WORKER_ID,results:p,finished:!0})}}),(m.prototype=Object.create(h.prototype)).constructor=m,(_.prototype=Object.create(h.prototype)).constructor=_,(v.prototype=Object.create(v.prototype)).constructor=v,(g.prototype=Object.create(h.prototype)).constructor=g,a})})(wr);var $r=wr.exports;const es=xr($r),ts="https://will-moore.github.io/ome2024-ngff-challenge/idr-mark.svg",ns="https://will-moore.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",is="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let rs={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function Ai(t){if(t==="IDR")return ts;let e=rs[t];return e?e==="https://nfdi4bioimage.de/"?ns:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function kr(t,e,n={}){es.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(h=>{let m={...n};for(let _=0;_<r.length;_++)m[r[_]]=h[_];return m}),l=o.filter(h=>{var m;return!((m=h.url)!=null&&m.endsWith(".csv"))}),a={};l.forEach(h=>{if(a[h.url]){console.warn("Removing duplicate URL:",h.url);return}a[h.url]=h}),l=Object.values(a);let c=o.filter(h=>{var m;return(m=h.url)==null?void 0:m.includes(".csv")});e.addCsv(t,c,l.length),e.addRows(l),c.forEach(h=>{let m=h.url;h.csv=m,kr(m,e,h)})}})}async function Er(t){return await fetch(t).then(e=>e.json())}function Si(t){return Math.floor(Math.random()*t)}function gn(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function ss(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function os(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(Ar));let l=performance.now(),a=new Uint8ClampedArray(4*r*s).fill(0),c=0;for(let h=0;h<o;h++){for(let m=0;m<t.length;m++){let _=n[m],v=t[m].data,g=e[m],D=(v[h]-g[0])/(g[1]-g[0]);for(let R=0;R<3;R++){let B=D*_[R]<<0;a[c*4+R]=Math.max(a[c*4+R],B)}}a[c*4+3]=255,c+=1}return performance.now()-l<5&&as(a,5)[4]<1&&(a=ls(a,2)),a}function ls(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function as(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let l=Math.floor(o/i);n[l]+=1}return n=n.map(s=>100*s/r),n}function Ar(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const hn=4,lt={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},us=[lt.magenta,lt.green],fs=[lt.red,lt.green,lt.blue],zi=Object.values(lt).slice(0,-2);function cs(t){let e;return t<=hn?e=Array(t).fill(!0):e=[...Array(hn).fill(!0),...Array(t-hn).fill(!1)],e}function hs(t,e){let n=[];if(t==1)n=[lt.white];else if(t==2)n=us;else if(t===3)n=fs;else if(t<=hn)n=zi.slice(0,t);else{n=Array(t).fill(lt.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=zi[r]}return n.map(Sr)}function Sr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class zr{constructor(){this.store=vr({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await Er(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=fn(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class ds extends zr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await Er(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Cr=new zr,Ir=new ds,Ci=5;async function mn(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[l,a]=await mn(o);return[l,a,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await mn(s)}}class _s{constructor(e="rating",n=!1){this.store=vr([]),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0;for(let o of r.child_csv)s+=o.image_count||0;return{...r,total_count:s}}):[]}addCsv(e,n,i){n=n.map(s=>({...s,child_csv:[]}));let r;for(let s of this.csvFiles){if(s.url===e){r=s;break}for(let o of s.child_csv){if(o.url===e){r=o;break}for(let l of o.child_csv)if(l.url===e){r=l;break}}}r?(r.image_count=i,r.child_csv=n):(r={url:e,image_count:i,child_csv:n},this.csvFiles.push(r))}addRows(e){e=e.map(r=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let s=r.shape.split(",").map(l=>parseInt(l)),o;r.dimension_names?o=r.dimension_names.split(","):s.length==5&&(o=["t","c","z","y","x"]),o&&o.length==s.length&&o.forEach((l,a)=>r["size_"+l]=s[a]),r.dim_count=s.reduce((l,a)=>l+(a>1?1:0),0)}if(r.chunks){let s=r.chunks.split(",").map(o=>parseInt(o));r.chunk_pixels=s.reduce((o,l)=>o*l,1)}if(r.shards){let s=r.shards.split(",").map(o=>parseInt(o));r.shard_pixels=s.reduce((o,l)=>o*l,1)}return r.rating=Math.random()*4,r}),e.length>1&&(e[Si(e.length)].rating=10+Math.random()*5,e[Si(e.length)].rating=5+Math.random()*5),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);Cr.addTerms(n);let i=e.map(r=>r.fbbiId);Ir.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var _;const[n,i,r]=await mn(e);let s=[],o=0,l=0,a=!1,c=!0,h={multiscales:n},m=i;if(r&&(o=r.wells.length,l=r.field_count||1),n){const v=(_=n[0])==null?void 0:_.datasets[0],g=v==null?void 0:v.path;if(g){const E=await fetch(`${i}/${g}/zarr.json`).then(D=>D.json()).catch(D=>{console.log(`----> Failed to parse ${i}/${g}/zarr.json`,D)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),a=!0,s=[0];this.populateRow(e,{image_attrs:h,image_url:m,shape:s,well_count:o,field_count:l,load_failed:a,loaded:c})}async loadRocrateJsonAllRows(){let e=fn(this.store);for(let n=0;n<e.length;n=n+Ci){let i=ss(n,Math.min(n+Ci,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=fn(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return fn(this.store)}}const De=new _s;function gs(t){let e,n,i,r,s,o,l,a;return{c(){e=A("button"),n=H(t[1]),i=Y(),r=A("span"),r.textContent="^",s=Y(),o=A("span"),o.textContent="^",b(r,"class","acc svelte-v17gm5"),Ot(r,"strong",t[3]==t[0]&&t[4]),b(o,"class","dec svelte-v17gm5"),Ot(o,"strong",t[3]==t[0]&&!t[4]),b(e,"class","svelte-v17gm5")},m(c,h){ae(c,e,h),d(e,n),d(e,i),d(e,r),d(e,s),d(e,o),l||(a=we(e,"click",t[5]),l=!0)},p(c,[h]){h&2&&ke(n,c[1]),h&25&&Ot(r,"strong",c[3]==c[0]&&c[4]),h&25&&Ot(o,"strong",c[3]==c[0]&&!c[4])},i:Ie,o:Ie,d(c){c&&le(e),l=!1,a()}}}function ms(t,e,n){let{col_name:i}=e,{col_label:r}=e,{handleSort:s}=e,{sortedBy:o}=e,{sortAscending:l}=e;const a=()=>s(i);return t.$$set=c=>{"col_name"in c&&n(0,i=c.col_name),"col_label"in c&&n(1,r=c.col_label),"handleSort"in c&&n(2,s=c.handleSort),"sortedBy"in c&&n(3,o=c.sortedBy),"sortAscending"in c&&n(4,l=c.sortAscending)},[i,r,s,o,l,a]}class rt extends ut{constructor(e){super(),at(this,e,ms,gs,nt,{col_name:0,col_label:1,handleSort:2,sortedBy:3,sortAscending:4})}}const un={AUTO:"auto",START:"start",CENTER:"center",END:"end"},$e={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Nt={OBSERVED:0,REQUESTED:1},ps={[$e.VERTICAL]:"top",[$e.HORIZONTAL]:"left"},Ii={[$e.VERTICAL]:"scrollTop",[$e.HORIZONTAL]:"scrollLeft"};class ys{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=un.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,l=o-n+s.size;let a;switch(e){case un.END:a=l;break;case un.CENTER:a=o-(n-s.size)/2;break;case un.START:a=o;break;default:a=Math.max(l,Math.min(o,i))}const c=this.getTotalSize();return Math.max(0,Math.min(c-n,a))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const l=this.getSizeAndPositionForIndex(o);n=l.offset+l.size;let a=o;for(;n<s&&a<this.itemCount-1;)a++,n+=this.getSizeAndPositionForIndex(a).size;return i&&(o=Math.max(0,o-i),a=Math.min(a+i,this.itemCount-1)),{start:o,stop:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const bs=t=>({}),Ti=t=>({});function Ri(t,e,n){const i=t.slice();return i[37]=e[n],i}const vs=t=>({style:t[0]&4,index:t[0]&4}),Oi=t=>({style:t[37].style,index:t[37].index}),ws=t=>({}),Li=t=>({});function Mi(t,e){let n,i;const r=e[21].item,s=Mn(r,e,e[20],Oi);return{key:t,first:null,c(){n=yr(),s&&s.c(),this.first=n},m(o,l){ae(o,n,l),s&&s.m(o,l),i=!0},p(o,l){e=o,s&&s.p&&(!i||l[0]&1048580)&&Dn(s,r,e,e[20],i?Fn(r,e[20],l,vs):jn(e[20]),Oi)},i(o){i||(ce(s,o),i=!0)},o(o){me(s,o),i=!1},d(o){o&&le(n),s&&s.d(o)}}}function ks(t){let e,n,i,r=[],s=new Map,o,l;const a=t[21].header,c=Mn(a,t,t[20],Li);let h=Ge(t[2]);const m=g=>g[0]?g[0](g[37].index):g[37].index;for(let g=0;g<h.length;g+=1){let E=Ri(t,h,g),D=m(E);s.set(D,r[g]=Mi(D,E))}const _=t[21].footer,v=Mn(_,t,t[20],Ti);return{c(){e=A("div"),c&&c.c(),n=Y(),i=A("div");for(let g=0;g<r.length;g+=1)r[g].c();o=Y(),v&&v.c(),b(i,"class","virtual-list-inner svelte-dwpad5"),b(i,"style",t[4]),b(e,"class","virtual-list-wrapper svelte-dwpad5"),b(e,"style",t[3])},m(g,E){ae(g,e,E),c&&c.m(e,null),d(e,n),d(e,i);for(let D=0;D<r.length;D+=1)r[D]&&r[D].m(i,null);d(e,o),v&&v.m(e,null),t[22](e),l=!0},p(g,E){c&&c.p&&(!l||E[0]&1048576)&&Dn(c,a,g,g[20],l?Fn(a,g[20],E,ws):jn(g[20]),Li),E[0]&1048581&&(h=Ge(g[2]),Qn(),r=br(r,E,m,1,g,h,s,i,Yr,Mi,null,Ri),Zn()),(!l||E[0]&16)&&b(i,"style",g[4]),v&&v.p&&(!l||E[0]&1048576)&&Dn(v,_,g,g[20],l?Fn(_,g[20],E,bs):jn(g[20]),Ti),(!l||E[0]&8)&&b(e,"style",g[3])},i(g){if(!l){ce(c,g);for(let E=0;E<h.length;E+=1)ce(r[E]);ce(v,g),l=!0}},o(g){me(c,g);for(let E=0;E<r.length;E+=1)me(r[E]);me(v,g),l=!1},d(g){g&&le(e),c&&c.d(g);for(let E=0;E<r.length;E+=1)r[E].d();v&&v.d(g),t[22](null)}}}const Es=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function As(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:l}=e,{itemSize:a}=e,{estimatedItemSize:c=null}=e,{stickyIndices:h=null}=e,{getKey:m=null}=e,{scrollDirection:_=$e.VERTICAL}=e,{scrollOffset:v=null}=e,{scrollToIndex:g=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:D="instant"}=e,{overscanCount:R=3}=e;const B=Vr(),U=new ys({itemCount:l,itemSize:a,estimatedItemSize:x()});let W=!1,N,X=[],S={offset:v||g!=null&&X.length&&K(g)||0,scrollChangeReason:Nt.REQUESTED},u=S,f={scrollToIndex:g,scrollToAlignment:E,scrollOffset:v,itemCount:l,itemSize:a,estimatedItemSize:c},p={},k="",I="";q(),Gn(()=>{n(18,W=!0),N.addEventListener("scroll",C,Es),v!=null?O(v):g!=null&&O(K(g))}),Yn(()=>{W&&N.removeEventListener("scroll",C)});function w(){if(!W)return;const T=f.scrollToIndex!==g||f.scrollToAlignment!==E,P=f.itemCount!==l||f.itemSize!==a||f.estimatedItemSize!==c;P&&(U.updateConfig({itemSize:a,itemCount:l,estimatedItemSize:x()}),z()),f.scrollOffset!==v?n(19,S={offset:v||0,scrollChangeReason:Nt.REQUESTED}):typeof g=="number"&&(T||P)&&n(19,S={offset:K(g,E,l),scrollChangeReason:Nt.REQUESTED}),f={scrollToIndex:g,scrollToAlignment:E,scrollOffset:v,itemCount:l,itemSize:a,estimatedItemSize:c}}function M(){if(!W)return;const{offset:T,scrollChangeReason:P}=S;(u.offset!==T||u.scrollChangeReason!==P)&&q(),u.offset!==T&&P===Nt.REQUESTED&&O(T),u=S}function q(){const{offset:T}=S,{start:P,stop:te}=U.getVisibleRange({containerSize:_===$e.VERTICAL?s:o,offset:T,overscanCount:R});let $=[];const Q=U.getTotalSize();_===$e.VERTICAL?(n(3,k=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,I=`flex-direction:column;height:${Q}px;`)):(n(3,k=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,I=`min-height:100%;width:${Q}px;`));const F=h!=null&&h.length!==0;if(F)for(let V=0;V<h.length;V++){const ne=h[V];$.push({index:ne,style:L(ne,!0)})}if(P!==void 0&&te!==void 0){for(let V=P;V<=te;V++)F&&h.includes(V)||$.push({index:V,style:L(V,!1)});B("itemsUpdated",{start:P,end:te})}n(2,X=$)}function O(T){"scroll"in N?N.scroll({[ps[_]]:T,behavior:D}):n(1,N[Ii[_]]=T,N)}function z(T=0){p={},U.resetItem(T),q()}function K(T,P=E,te=l){return(T<0||T>=te)&&(T=0),U.getUpdatedOffsetForIndex({align:P,containerSize:_===$e.VERTICAL?s:o,currentOffset:S.offset||0,targetIndex:T})}function C(T){const P=ue();P<0||S.offset===P||T.target!==N||(n(19,S={offset:P,scrollChangeReason:Nt.OBSERVED}),B("afterScroll",{offset:P,event:T}))}function ue(){return N[Ii[_]]}function x(){return c||typeof a=="number"&&a||50}function L(T,P){if(p[T])return p[T];const{size:te,offset:$}=U.getSizeAndPositionForIndex(T);let Q;return _===$e.VERTICAL?(Q=`left:0;width:100%;height:${te}px;`,P?Q+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${$}px;margin-bottom:${-($+te)}px;`:Q+=`position:absolute;top:${$}px;`):(Q=`top:0;width:${te}px;`,P?Q+=`position:sticky;z-index:1;left:0;margin-left:${$}px;margin-right:${-($+te)}px;`:Q+=`position:absolute;height:100%;left:${$}px;`),p[T]=Q}function ie(T){Vt[T?"unshift":"push"](()=>{N=T,n(1,N)})}return t.$$set=T=>{"height"in T&&n(5,s=T.height),"width"in T&&n(6,o=T.width),"itemCount"in T&&n(7,l=T.itemCount),"itemSize"in T&&n(8,a=T.itemSize),"estimatedItemSize"in T&&n(9,c=T.estimatedItemSize),"stickyIndices"in T&&n(10,h=T.stickyIndices),"getKey"in T&&n(0,m=T.getKey),"scrollDirection"in T&&n(11,_=T.scrollDirection),"scrollOffset"in T&&n(12,v=T.scrollOffset),"scrollToIndex"in T&&n(13,g=T.scrollToIndex),"scrollToAlignment"in T&&n(14,E=T.scrollToAlignment),"scrollToBehaviour"in T&&n(15,D=T.scrollToBehaviour),"overscanCount"in T&&n(16,R=T.overscanCount),"$$scope"in T&&n(20,r=T.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&w(),t.$$.dirty[0]&524288&&M(),t.$$.dirty[0]&263264&&W&&z(0)},[m,N,X,k,I,s,o,l,a,c,h,_,v,g,E,D,R,z,W,S,r,i,ie]}class Ss extends ut{constructor(e){super(),at(this,e,As,ks,nt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Fe()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Fe()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Fe()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Fe()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Fe()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Fe()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Fe()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Fe()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Fe()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Fe()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Fe()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Fe()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Fe()}get recomputeSizes(){return this.$$.ctx[17]}}class tn extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Xn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const zs="modulepreload",Cs=function(t){return"https://will-moore.github.io/ome2024-ngff-challenge/"+t},Fi={},Bt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(l=>{if(l=Cs(l),l in Fi)return;Fi[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":zs,a||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),a)return new Promise((m,_)=>{h.addEventListener("load",m),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var He;class Tr{constructor(e,n,i){Se(this,He);typeof e=="number"?ve(this,He,new Uint8Array(e)):e instanceof ArrayBuffer?ve(this,He,new Uint8Array(e,n,i)):ve(this,He,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return J(this,He).byteOffset}get byteLength(){return J(this,He).byteLength}get buffer(){return J(this,He).buffer}get length(){return J(this,He).length}get(e){let n=J(this,He)[e];return typeof n=="number"?n!==0:n}set(e,n){J(this,He)[e]=n?1:0}fill(e){J(this,He).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}He=new WeakMap;var Mt;class xn{constructor(e,n,i,r){ee(this,"_data");ee(this,"chars");Se(this,Mt);if(this.chars=e,ve(this,Mt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(J(this,Mt).encode(n))}fill(e){const n=J(this,Mt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Mt=new WeakMap;var Re;const ri=class ri{constructor(e,n,i,r){Se(this,Re);ee(this,"chars");if(this.chars=e,typeof n=="number")ve(this,Re,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),ve(this,Re,new Int32Array(n,i,r));else{const s=n,o=new ri(e,1);ve(this,Re,new Int32Array(function*(){for(let l of s)o.set(0,l),yield*J(o,Re)}()))}}get BYTES_PER_ELEMENT(){return J(this,Re).BYTES_PER_ELEMENT*this.chars}get byteLength(){return J(this,Re).byteLength}get byteOffset(){return J(this,Re).byteOffset}get buffer(){return J(this,Re).buffer}get length(){return J(this,Re).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(J(this,Re)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=J(this,Re).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=J(this,Re).subarray(0,this.chars);for(let i=1;i<this.length;i++)J(this,Re).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Re=new WeakMap;let Wt=ri;function nn(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Di(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const Is={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Tr},Ts=/v2:([US])(\d+)/;function Rr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Ts);if(e){let[,i,r]=e;return(i==="U"?Wt:xn).bind(null,Number(r))}let n=Is[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function At(t,e){return(e==="C"?Rs:Os)(t)}function Rs(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Os(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Ls({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Bn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Ms=/^([<|>])(.*)$/;function Fs(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Ms);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Ds(t,e={}){let n=[],i=Fs(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function js(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Ns(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Bs(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Or(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const ji=Ps();function Ps(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Ni(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Ht,ot,Kt,Jt,Ft;const si=class si{constructor(e,n){ee(this,"kind","array_to_bytes");Se(this,Ht);Se(this,ot);Se(this,Kt);Se(this,Jt);Se(this,Ft);ve(this,Ft,e==null?void 0:e.endian),ve(this,ot,Rr(n.data_type)),ve(this,Jt,n.shape),ve(this,Ht,At(n.shape,Bn(n.codecs)));const i=new(J(this,ot))(0);ve(this,Kt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new si(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return ji&&J(this,Ft)==="big"&&Di(n,Ni(J(this,ot))),n}decode(e){return ji&&J(this,Ft)==="big"&&Di(e,Ni(J(this,ot))),{data:new(J(this,ot))(e.buffer,e.byteOffset,e.byteLength/J(this,Kt)),shape:J(this,Jt),stride:J(this,Ht)}}};Ht=new WeakMap,ot=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Ft=new WeakMap;let pn=si;class $n{constructor(){ee(this,"kind","bytes_to_bytes")}static fromConfig(){return new $n}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Us(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function qs(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Gt,Yt;const oi=class oi{constructor(e={}){ee(this,"configuration");ee(this,"kind","array_to_bytes");Se(this,Gt);Se(this,Yt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:l=!0,indent:a,strict:c=!0}=e;let h=e.separators;h||(a?h=[", ",": "]:h=[",",":"]),ve(this,Gt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:a,separators:h,sort_keys:l}),ve(this,Yt,{strict:c})}static fromConfig(e){return new oi(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:l}=J(this,Gt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const a=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||a.push(Us),l&&a.push(qs);const c=Array.from(e.data);c.push("|O"),c.push(e.shape);let h;a.length&&(h=(_,v)=>{let g=v;for(let E of a)g=E(_,g);return g});let m=JSON.stringify(c,h,n);return r&&(m=m.replace(/[\u007F-\uFFFF]/g,_=>{const v=`0000${_.charCodeAt(0).toString(16)}`;return`\\u${v.substring(v.length-4)}`})),new TextEncoder().encode(m)}decode(e){const{strict:n}=J(this,Yt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=nn(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=At(r,"C");return{data:i,shape:r,stride:s}}};Gt=new WeakMap,Yt=new WeakMap;let Pn=oi;function Bi(t){return t instanceof Tr||t instanceof xn||t instanceof Wt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Vs(t,e){let n;return t.data instanceof xn||t.data instanceof Wt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:At(t.shape,e)}}function Ws(t,e){let n=Vs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Bi(t.data),l=Bi(n.data);for(let a=0;a<r;a++){let c=0;for(let h=0;h<i;h++)c+=s[h]*n.stride[h];l[c]=o[a],s[0]+=1;for(let h=0;h<i;h++)if(s[h]===t.shape[h]){if(h+1===i)break;s[h]=0,s[h+1]+=1}}return n}function Hs(t){if(!t.stride)return"C";let e=At(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class ei{constructor(e){ee(this,"configuration");ee(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new ei(e)}encode(e){var n,i;return Hs(e)===((n=this.configuration)==null?void 0:n.order)?e:Ws(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Qt,Zt;const li=class li{constructor(e){ee(this,"kind","array_to_bytes");Se(this,Qt);Se(this,Zt);ve(this,Qt,e),ve(this,Zt,At(e,"C"))}static fromConfig(e,n){return new li(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let l=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+l)),s+=l}return{data:r,shape:J(this,Qt),stride:J(this,Zt)}}};Qt=new WeakMap,Zt=new WeakMap;let Un=li;function Ks(){return new Map().set("blosc",()=>Bt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Bt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Bt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Bt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Bt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>ei).set("bytes",()=>pn).set("crc32c",()=>$n).set("vlen-utf8",()=>Un).set("json2",()=>Pn)}const Js=Ks();function qn(t){let e;return{async encode(n){e||(e=await Pi(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Pi(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Pi(t){let e=t.codecs.map(async s=>{var l;let o=await((l=Js.get(s.name))==null?void 0:l());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let l=s.fromConfig(o.configuration,t);switch(l.kind){case"array_to_array":n.push(l);break;case"array_to_bytes":i=l;break;default:r.push(l)}}if(!i){if(!Gs(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=pn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Gs(t){return t.data_type!=="v2:object"}const Ui=18446744073709551615n;function Ys(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((a,c)=>a/i.chunk_shape[c]),o=qn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),l={};return async a=>{let c=a.map((B,U)=>Math.floor(B/s[U])),h=t.resolve(n(c)).path,m;if(h in l)m=l[h];else{let B=4,U=16*s.reduce((N,X)=>N*X,1),W=await r(h,{suffixLength:U+B});m=l[h]=W?await o.decode(W):null}if(m===null)return;let{data:_,shape:v,stride:g}=m,E=a.map((B,U)=>B%v[U]).reduce((B,U,W)=>B+U*g[W],0),D=_[E],R=_[E+1];if(!(D===Ui&&R===Ui))return r(h,{offset:Number(D),length:Number(R)})}}class Dt{constructor(e,n="/"){ee(this,"store");ee(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Dt(this.store,new URL(e,n).pathname)}}var Xt;class ti extends Dt{constructor(n,i,r){super(n,i);ee(this,"kind","group");Se(this,Xt);ve(this,Xt,r)}get attrs(){return J(this,Xt).attributes}}Xt=new WeakMap;const Pt=Symbol("zarrita.context");function Qs(t){return t[Pt]}function Zs(t,e){let{configuration:n}=e.codecs.find(Bs)??{},i={encode_chunk_key:Ls(e.chunk_key_encoding),TypedArray:Rr(e.data_type),fill_value:e.fill_value};if(n){let s=Bn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:qn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,l){return At(o,l??s)},get_chunk_bytes:Ys(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Bn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:qn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return At(s,o??r)},async get_chunk_bytes(s,o){let l=i.encode_chunk_key(s),a=t.resolve(l).path;return t.store.get(a,o)}}}var dr,_r,Et,gr;let yn=(gr=class extends(_r=Dt,dr=Pt,_r){constructor(n,i,r){super(n,i);ee(this,"kind","array");Se(this,Et);ee(this,dr);ve(this,Et,{...r,fill_value:Or(r)}),this[Pt]=Zs(this,r)}get attrs(){return J(this,Et).attributes}get shape(){return J(this,Et).shape}get chunks(){return this[Pt].chunk_shape}get dtype(){return J(this,Et).data_type}async getChunk(n,i){let r=this[Pt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((a,c)=>a*c,1),l=new r.TypedArray(o);return l.fill(r.fill_value),{data:l,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Ns(this.dtype,n)}},Et=new WeakMap,gr),bn=Xs();function Xs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function xs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?nn(e):{}}async function $s(t,e={}){let n="store"in t?t:new Dt(t),i={};return(e.attrs??!0)&&(i=await xs(n)),e.kind==="array"?qi(n,i):e.kind==="group"?Vi(n,i):qi(n,i).catch(r=>{if(r instanceof tn)return Vi(n,i);throw r})}async function qi(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new tn("v2 array",{cause:new Xn(n)});return bn.increment(t.store,"v2"),new yn(t.store,t.path,Ds(nn(i),e))}async function Vi(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new tn("v2 group",{cause:new Xn(n)});return bn.increment(t.store,"v2"),new ti(t.store,t.path,js(nn(i),e))}async function eo(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new tn("v3 array or group",{cause:new Xn(n)});let r=nn(i);return r.node_type==="array"&&(r.fill_value=Or(r)),r.node_type==="array"?new yn(e,t.path,r):new ti(e,t.path,r)}async function to(t,e={}){let n="store"in t?t:new Dt(t),i=await eo(n);if(bn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof yn||e.kind==="group"&&i instanceof ti)return i;let r=i instanceof yn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function kt(t,e={}){let n="store"in t?t.store:t,i=bn.version_max(n),r=i==="v2"?kt.v2:kt.v3,s=i==="v2"?kt.v3:kt.v2;return r(t,e).catch(o=>{if(o instanceof tn)return s(t,e);throw o})}kt.v2=$s;kt.v3=to;function*no(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*io(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function ro({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Vn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function so(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class ni extends Error{constructor(e){super(e),this.name="IndexError"}}function oo(t,e){throw new ni(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function lo(t){throw new ni(`index out of bounds for dimension with length ${t}`)}function ao(){throw new ni("only slices with step >= 1 are supported")}function uo(t,e){t.length>e.length&&oo(t,e)}function fo(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&lo(e),t}class co{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){ee(this,"dim_sel");ee(this,"dim_len");ee(this,"dim_chunk_len");ee(this,"nitems");e=fo(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Wi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){ee(this,"start");ee(this,"stop");ee(this,"step");ee(this,"dim_len");ee(this,"dim_chunk_len");ee(this,"nitems");ee(this,"nchunks");const[r,s,o]=ro(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&ao(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of no(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let l=0,a=0;if(this.start<r){const v=(r-this.start)%this.step;v&&(a+=this.step-v),l=Math.ceil((r-this.start)/this.step)}else a=this.start-r;const c=this.stop>s?o:this.stop-r,h=[a,c,this.step],m=Math.ceil((c-a)/this.step),_=[l,l+m,1];yield{dim_chunk_ix:i,dim_chunk_sel:h,dim_out_sel:_}}}}function ho(t,e){let n=[];return t===null?n=e.map(i=>Vn(null)):Array.isArray(t)&&(n=t.map(i=>i??Vn(null))),uo(n,e),n}class _o{constructor({selection:e,shape:n,chunk_shape:i}){ee(this,"dim_indexers");ee(this,"shape");this.dim_indexers=ho(e,n).map((r,s)=>new(typeof r=="number"?co:Wi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Wi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of io(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function go(t,e){return"get"in t?t.get(e):t[e]}async function mo(t,e,n,i){var a;let r=Qs(t),s=new _o({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((c,h)=>c*h,1)),s.shape,r.get_strides(s.shape,n.order)),l=((a=n.create_queue)==null?void 0:a.call(n))??so();for(const{chunk_coords:c,mapping:h}of s)l.add(async()=>{let{data:m,shape:_,stride:v}=await t.getChunk(c,n.opts),g=i.prepare(m,_,v);i.set_from_chunk(o,g,h)});return await l.onIdle(),s.shape.length===0?go(o.data,0):o}function ii(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return ii(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function Ln(t){return globalThis.Array.isArray(t.data)?{data:ii(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function po(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function yo(t,e){if(globalThis.Array.isArray(t.data))return ii([e]);let n=po(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const bo={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=Ln(t);Wn(i,e,yo(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=Ln(t);dn(i,Ln(e),i.bytes_per_element,n)}};async function vo(t,e=null,n={}){return mo(t,e,n,bo)}function Lr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Wn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...l]=t.stride;if(typeof r=="number"){const _=t.data.subarray(o*r*i);Wn({data:_,stride:l},s,n,i);return}const[a,c,h]=r,m=Lr(a,c,h);if(s.length===0){for(let _=0;_<m;_++)t.data.set(n,o*(a+h*_)*i);return}for(let _=0;_<m;_++){const v=t.data.subarray(o*(a+h*_)*i);Wn({data:v,stride:l},s,n,i)}}function dn(t,e,n,i){const[r,...s]=i,[o,...l]=t.stride,[a,...c]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}dn({data:t.data.subarray(o*r.to*n),stride:l},e,n,s);return}if(r.to===null){if(s.length===0){let R=r.from*n;t.data.set(e.data.subarray(R,R+n),0);return}dn(t,{data:e.data.subarray(a*r.from*n),stride:c},n,s);return}const[h,m,_]=r.to,[v,g,E]=r.from,D=Lr(h,m,_);if(s.length===0){if(_===1&&E===1&&o===1&&a===1){let R=v*n,B=D*n;t.data.set(e.data.subarray(R,R+B),h*n);return}for(let R=0;R<D;R++){let B=a*(v+E*R)*n;t.data.set(e.data.subarray(B,B+n),o*(h+_*R)*n)}return}for(let R=0;R<D;R++)dn({data:t.data.subarray(o*(h+R*_)*n),stride:l},{data:e.data.subarray(a*(v+R*E)*n),stride:c},n,s)}function Mr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function wo(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Hi(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Ki(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function ko(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Mr(t,o-e,o,n)}var xt,$t,en,Hn;class Eo{constructor(e,n={}){Se(this,en);ee(this,"url");Se(this,xt);Se(this,$t);this.url=e,ve(this,xt,n.overrides??{}),ve(this,$t,n.useSuffixRequest??!1)}async get(e,n={}){let i=Hi(this.url,e).href,r=await fetch(i,Rn(this,en,Hn).call(this,n));return Ki(r)}async getRange(e,n,i={}){let r=Hi(this.url,e),s=Rn(this,en,Hn).call(this,i),o;return"suffixLength"in n?o=await ko(r,n.suffixLength,s,J(this,$t)):o=await Mr(r,n.offset,n.length,s),Ki(o)}}xt=new WeakMap,$t=new WeakMap,en=new WeakSet,Hn=function(e){return wo(J(this,xt),e)};function Ao(t){let e,n;return{c(){e=A("div"),n=A("canvas"),de(n,"width",t[3]+"px"),de(n,"height",t[4]+"px"),de(n,"background-color","lightgrey"),b(n,"height",t[2]),b(n,"width",t[1]),b(n,"class","svelte-lwhhyg"),b(e,"class","canvasWrapper svelte-lwhhyg"),de(e,"width",t[3]+"px"),de(e,"height",t[4]+"px"),Ot(e,"spinner",t[5])},m(i,r){ae(i,e,r),d(e,n),t[11](n)},p(i,[r]){r&8&&de(n,"width",i[3]+"px"),r&16&&de(n,"height",i[4]+"px"),r&4&&b(n,"height",i[2]),r&2&&b(n,"width",i[1]),r&8&&de(e,"width",i[3]+"px"),r&16&&de(e,"height",i[4]+"px"),r&32&&Ot(e,"spinner",i[5])},i:Ie,o:Ie,d(i){i&&le(e),t[11](null)}}}const Ji=120;function So(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{max_size:l=512}=e,a,c=120,h=120;o>1?h=c/o:o<1&&(c=h*o);let m=c,_=h,v=!0;const g=new AbortController;async function E(){var K;let R=r.multiscales[0].datasets.map(C=>C.path),B=r.multiscales[0].axes.map(C=>C.name),U=R.at(-1);s!=null&&s<R.length&&(U=R[s]);const W=new Eo(i+"/"+U),N=await kt.v3(W,{kind:"array"});let X=B.indexOf("c"),S=N.shape;if(S.at(-1)*S.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",S,i);return}let u=S.length,f=S[X]||1,p,k;(K=r==null?void 0:r.omero)!=null&&K.channels?(p=r.omero.channels.map(C=>C.active),k=r.omero.channels.map(C=>Sr(C.color))):(p=cs(f),k=hs(f,p)),k=k.filter((C,ue)=>p[ue]);let w=p.reduce((C,ue,x)=>(ue&&C.push(x),C),[]).map(C=>{let ue=S.map((x,L)=>L==X?C:L>=u-2?Vn(0,x):B[L]=="z"||B[L]=="t"?parseInt(x/2+""):0);return vo(N,ue,{opts:{signal:g.signal}})}),M=await Promise.all(w),q=M.map(C=>Ar(C)),O=os(M,q,k);n(1,c=S.at(-1)),n(2,h=S.at(-2));let z=c/Ji;h>c&&(z=h/Ji),n(3,m=c/z),n(4,_=h/z),setTimeout(()=>{const C=a.getContext("2d");n(5,v=!1),C.putImageData(new ImageData(O,c,h),0,0)},100)}Gn(()=>{E()}),Yn(()=>{g.abort()});function D(R){Vt[R?"unshift":"push"](()=>{a=R,n(0,a)})}return t.$$set=R=>{"source"in R&&n(6,i=R.source),"attrs"in R&&n(7,r=R.attrs),"thumbDatasetIndex"in R&&n(8,s=R.thumbDatasetIndex),"thumbAspectRatio"in R&&n(9,o=R.thumbAspectRatio),"max_size"in R&&n(10,l=R.max_size)},[a,c,h,m,_,v,i,r,s,o,l,D]}class zo extends ut{constructor(e){super(),at(this,e,So,Ao,nt,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,max_size:10})}}function Gi(t,e,n){const i=t.slice();return i[10]=e[n],i}function Yi(t){let e,n;return e=new zo({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){We(e.$$.fragment)},m(i,r){je(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(ce(e.$$.fragment,i),n=!0)},o(i){me(e.$$.fragment,i),n=!1},d(i){Ne(e,i)}}}function Qi(t){let e,n,i,r=t[0][`size_${t[10]}`]+"",s;return{c(){e=A("tr"),n=A("td"),n.textContent=`${t[10].toUpperCase()}`,i=A("td"),s=H(r),b(n,"class","svelte-11zzkuu"),b(i,"class","svelte-11zzkuu")},m(o,l){ae(o,e,l),d(e,n),d(e,i),d(i,s)},p(o,l){l&1&&r!==(r=o[0][`size_${o[10]}`]+"")&&ke(s,r)},d(o){o&&le(e)}}}function Zi(t){let e,n=t[0][`size_${t[10]}`]!==void 0&&Qi(t);return{c(){n&&n.c(),e=yr()},m(i,r){n&&n.m(i,r),ae(i,e,r)},p(i,r){i[0][`size_${i[10]}`]!==void 0?n?n.p(i,r):(n=Qi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&le(e),n&&n.d(i)}}}function Co(t){let e,n,i,r=gn(t[0].written)+"",s;return{c(){e=A("tr"),n=A("td"),n.textContent="Size",i=A("td"),s=H(r),b(n,"class","svelte-11zzkuu"),de(i,"white-space","nowrap"),b(i,"class","svelte-11zzkuu")},m(o,l){ae(o,e,l),d(e,n),d(e,i),d(i,s)},p(o,l){l&1&&r!==(r=gn(o[0].written)+"")&&ke(s,r)},d(o){o&&le(e)}}}function Io(t){let e,n,i,r=t[0].shards+"",s;return{c(){e=A("tr"),n=A("td"),n.textContent="Shards",i=A("td"),s=H(r),b(n,"class","svelte-11zzkuu"),b(i,"class","svelte-11zzkuu")},m(o,l){ae(o,e,l),d(e,n),d(e,i),d(i,s)},p(o,l){l&1&&r!==(r=o[0].shards+"")&&ke(s,r)},d(o){o&&le(e)}}}function To(t){let e,n,i,r=t[0].chunks+"",s;return{c(){e=A("tr"),n=A("td"),n.textContent="Chunks",i=A("td"),s=H(r),b(n,"class","svelte-11zzkuu"),b(i,"class","svelte-11zzkuu")},m(o,l){ae(o,e,l),d(e,n),d(e,i),d(i,s)},p(o,l){l&1&&r!==(r=o[0].chunks+"")&&ke(s,r)},d(o){o&&le(e)}}}function Xi(t){let e,n,i=t[0].source+"",r,s=t[0].csv&&xi(t);return{c(){e=A("div"),n=H("Data from "),r=H(i),s&&s.c()},m(o,l){ae(o,e,l),d(e,n),d(e,r),s&&s.m(e,null)},p(o,l){l&1&&i!==(i=o[0].source+"")&&ke(r,i),o[0].csv?s?s.p(o,l):(s=xi(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(o){o&&le(e),s&&s.d()}}}function xi(t){var o;let e,n,i=((o=t[0].csv)==null?void 0:o.split("/").pop())+"",r,s;return{c(){e=H(": "),n=A("a"),r=H(i),b(n,"href",s=er(t[0])),b(n,"target","_blank")},m(l,a){ae(l,e,a),ae(l,n,a),d(n,r)},p(l,a){var c;a&1&&i!==(i=((c=l[0].csv)==null?void 0:c.split("/").pop())+"")&&ke(r,i),a&1&&s!==(s=er(l[0]))&&b(n,"href",s)},d(l){l&&(le(e),le(n))}}}function $i(t){let e,n,i,r,s;return{c(){e=A("div"),n=A("a"),i=H("Original data"),b(n,"title",r="Link to original data: "+t[0].origin),b(n,"href",s=t[0].origin),b(n,"target","_blank")},m(o,l){ae(o,e,l),d(e,n),d(n,i)},p(o,l){l&1&&r!==(r="Link to original data: "+o[0].origin)&&b(n,"title",r),l&1&&s!==(s=o[0].origin)&&b(n,"href",s)},d(o){o&&le(e)}}}function Ro(t){let e,n,i,r,s,o,l,a,c=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",h,m,_=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",v,g,E,D,R,B,U,W,N=t[3]&&Yi(t),X=Ge(["t","c","z","y","x"]),S=[];for(let w=0;w<5;w+=1)S[w]=Zi(Gi(t,X,w));function u(w,M){return w[2]=="chunk_pixels"?To:w[2]=="shard_pixels"?Io:Co}let f=u(t),p=f(t),k=t[0].source&&Xi(t),I=t[0].origin&&$i(t);return{c(){e=A("div"),n=A("div"),N&&N.c(),i=Y(),r=A("table");for(let w=0;w<5;w+=1)S[w].c();s=Y(),p.c(),o=Y(),l=A("div"),a=A("div"),h=Y(),m=A("div"),v=Y(),k&&k.c(),g=Y(),I&&I.c(),E=Y(),D=A("a"),R=H("OME-Validator"),b(n,"class","thumbWrapper svelte-11zzkuu"),b(r,"class","svelte-11zzkuu"),b(D,"title",B="Open in Validator: "+t[0].url),b(D,"href",U="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),b(D,"target","_blank"),b(e,"class","zarr-list-item svelte-11zzkuu")},m(w,M){ae(w,e,M),d(e,n),N&&N.m(n,null),d(e,i),d(e,r);for(let q=0;q<5;q+=1)S[q]&&S[q].m(r,null);d(r,s),p.m(r,null),d(e,o),d(e,l),d(l,a),a.innerHTML=c,d(l,h),d(l,m),m.innerHTML=_,d(l,v),k&&k.m(l,null),d(l,g),I&&I.m(l,null),d(l,E),d(l,D),d(D,R),W=!0},p(w,[M]){if(w[3]?N?(N.p(w,M),M&8&&ce(N,1)):(N=Yi(w),N.c(),ce(N,1),N.m(n,null)):N&&(Qn(),me(N,1,1,()=>{N=null}),Zn()),M&1){X=Ge(["t","c","z","y","x"]);let q;for(q=0;q<5;q+=1){const O=Gi(w,X,q);S[q]?S[q].p(O,M):(S[q]=Zi(O),S[q].c(),S[q].m(r,s))}for(;q<5;q+=1)S[q].d(1)}f===(f=u(w))&&p?p.p(w,M):(p.d(1),p=f(w),p&&(p.c(),p.m(r,null))),(!W||M&3)&&c!==(c=(w[0].name?w[0].name.replaceAll(w[1],`<mark>${w[1]}</mark>`):"")+"")&&(a.innerHTML=c),(!W||M&130)&&_!==(_=w[7].replaceAll(w[1],`<mark>${w[1]}</mark>`)+"")&&(m.innerHTML=_),w[0].source?k?k.p(w,M):(k=Xi(w),k.c(),k.m(l,g)):k&&(k.d(1),k=null),w[0].origin?I?I.p(w,M):(I=$i(w),I.c(),I.m(l,E)):I&&(I.d(1),I=null),(!W||M&1&&B!==(B="Open in Validator: "+w[0].url))&&b(D,"title",B),(!W||M&1&&U!==(U="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+w[0].url))&&b(D,"href",U)},i(w){W||(ce(N),W=!0)},o(w){me(N),W=!1},d(w){w&&le(e),N&&N.d(),_n(S,w),p.d(),k&&k.d(),I&&I.d()}}}function er(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Oo(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,l,a,c,h=1;const m=new AbortController;if(r.size_x&&r.size_y){let _=Math.max(r.size_x,r.size_y);for(c=0;_>256;)c+=1,_=_/2;h=r.size_x/r.size_y}return Gn(async()=>{let _=r.url;r.series0!==void 0&&(_+="/"+r.series0);let v=await mn(_,m.signal);n(3,l=v[0]),n(4,a=v[1]),v[2]}),Yn(()=>{m.abort()}),t.$$set=_=>{"rowData"in _&&n(0,r=_.rowData),"textFilter"in _&&n(1,s=_.textFilter),"sortedBy"in _&&n(2,o=_.sortedBy)},t.$$.update=()=>{var _;t.$$.dirty&3&&n(7,i=s!=""&&((_=r.description)!=null&&_.includes(s))?r.description:"")},[r,s,o,l,a,c,h,i]}class Lo extends ut{constructor(e){super(),at(this,e,Oo,Ro,nt,{rowData:0,textFilter:1,sortedBy:2})}}function Mo(t){let e,n,i,r;return n=new Lo({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=A("div"),We(n.$$.fragment),b(e,"slot","item"),b(e,"style",i=t[12]),b(e,"class","row svelte-1xvcjxw")},m(s,o){ae(s,e,o),je(n,e,null),r=!0},p(s,o){const l={};o&8193&&(l.rowData=s[0][s[13]]),o&2&&(l.textFilter=s[1]),o&4&&(l.sortedBy=s[2]),n.$set(l),(!r||o&4096&&i!==(i=s[12]))&&b(e,"style",i)},i(s){r||(ce(n.$$.fragment,s),r=!0)},o(s){me(n.$$.fragment,s),r=!1},d(s){s&&le(e),Ne(n)}}}function Fo(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,l,a,c;return et(t[8]),et(t[9]),s=new Ss({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Mo,({style:h,index:m})=>({12:h,13:m}),({style:h,index:m})=>(h?4096:0)|(m?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=A("div"),We(s.$$.fragment),b(r,"class","imageListContainer svelte-1xvcjxw"),de(r,"height",o)},m(h,m){ae(h,r,m),je(s,r,null),t[10](r),l=!0,a||(c=[we(window,"resize",t[8]),we(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],a=!0)},p(h,[m]){m&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,h[4]),i=setTimeout(n,100));const _={};m&32&&(_.height=h[5]),m&1&&(_.itemCount=h[0].length),m&28679&&(_.$$scope={dirty:m,ctx:h}),s.$set(_),m&32&&o!==(o=`${h[5]}px`)&&de(r,"height",o)},i(h){l||(ce(s.$$.fragment,h),l=!0)},o(h){me(s.$$.fragment,h),l=!1},d(h){h&&le(r),Ne(s),t[10](null),a=!1,tt(c)}}}function Do(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function l(E){return r[E].url}let a,c=0,h=0;function m(E){let R=a.offsetTop-20;E.detail.offset-h<0&&c>R&&n(4,c-=1),h=E.detail.offset}function _(){n(5,i=window.innerHeight)}function v(){n(4,c=window.pageYOffset)}function g(E){Vt[E?"unshift":"push"](()=>{a=E,n(3,a)})}return t.$$set=E=>{"tableRows"in E&&n(0,r=E.tableRows),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},n(5,i=0),[r,s,o,a,c,i,l,m,_,v,g]}class jo extends ut{constructor(e){super(),at(this,e,Do,Fo,nt,{tableRows:0,textFilter:1,sortedBy:2})}}const No="https://will-moore.github.io/ome2024-ngff-challenge/selectCaret.svg",Bo="https://will-moore.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function Po(t){let e;return{c(){e=A("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${Bo}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,b(e,"class","svelte-jcf7ka")},m(n,i){ae(n,e,i)},p:Ie,i:Ie,o:Ie,d(n){n&&le(e)}}}class Uo extends ut{constructor(e){super(),at(this,e,null,Po,nt,{})}}function qo(t){let e,n,i,r,s,o,l,a=t[0].source+"",c,h,m,_,v,g,E=t[0].total_count+"",D,R,B,U,W,N,X;return{c(){e=A("div"),n=A("label"),i=A("img"),o=Y(),l=A("div"),c=H(a),h=Y(),m=A("br"),_=Y(),v=A("span"),g=H("("),D=H(E),R=H(" images)"),U=A("input"),b(i,"title",r=t[0].url),b(i,"class","sourceLogo svelte-wjxbqp"),b(i,"alt","Source logo"),ki(i.src,s=Ai(t[0].source))||b(i,"src",s),b(v,"title",B=t[0].child_csv.length+" collections"),b(U,"type","radio"),b(U,"name","source"),U.value=W=t[0].source,b(U,"class","svelte-wjxbqp"),b(n,"class","svelte-wjxbqp"),b(e,"class","source svelte-wjxbqp")},m(S,u){ae(S,e,u),d(e,n),d(n,i),d(n,o),d(n,l),d(l,c),d(l,h),d(l,m),d(l,_),d(l,v),d(v,g),d(v,D),d(v,R),d(l,U),N||(X=we(U,"change",function(){Kn(t[1])&&t[1].apply(this,arguments)}),N=!0)},p(S,[u]){t=S,u&1&&r!==(r=t[0].url)&&b(i,"title",r),u&1&&!ki(i.src,s=Ai(t[0].source))&&b(i,"src",s),u&1&&a!==(a=t[0].source+"")&&ke(c,a),u&1&&E!==(E=t[0].total_count+"")&&ke(D,E),u&1&&B!==(B=t[0].child_csv.length+" collections")&&b(v,"title",B),u&1&&W!==(W=t[0].source)&&(U.value=W)},i:Ie,o:Ie,d(S){S&&le(e),N=!1,X()}}}function Vo(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Wo extends ut{constructor(e){super(),at(this,e,Vo,qo,nt,{source:0,handleFilter:1})}}function tr(t,e,n){const i=t.slice();return i[30]=e[n],i}function nr(t,e,n){const i=t.slice();return i[30]=e[n],i}function ir(t,e,n){const i=t.slice();return i[35]=e[n],i}function rr(t,e,n){const i=t.slice();return i[38]=e[n],i}function sr(t){let e,n=t[1].length+"",i,r;return{c(){e=H(", from "),i=H(n),r=H(" sources")},m(s,o){ae(s,e,o),ae(s,i,o),ae(s,r,o)},p(s,o){o[0]&2&&n!==(n=s[1].length+"")&&ke(i,n)},d(s){s&&(le(e),le(i),le(r))}}}function or(t){let e,n;return e=new Wo({props:{source:t[38],handleFilter:t[15]}}),{c(){We(e.$$.fragment)},m(i,r){je(e,i,r),n=!0},p(i,r){const s={};r[0]&2&&(s.source=i[38]),e.$set(s)},i(i){n||(ce(e.$$.fragment,i),n=!0)},o(i){me(e.$$.fragment,i),n=!1},d(i){Ne(e,i)}}}function lr(t){let e,n,i,r,s,o;return{c(){e=A("div"),n=A("label"),i=A("input"),r=H(`
              ❌ Clear Source Filter`),b(i,"type","radio"),b(i,"name","source"),i.value="",b(i,"class","svelte-fjpzuq"),b(n,"class","svelte-fjpzuq"),b(e,"class","source clear svelte-fjpzuq")},m(l,a){ae(l,e,a),d(e,n),d(n,i),d(n,r),s||(o=we(i,"change",t[15]),s=!0)},p:Ie,d(l){l&&le(e),s=!1,o()}}}function ar(t){let e,n,i,r,s,o,l,a,c,h=Ge(De.getCsvSourceList(t[13])),m=[];for(let _=0;_<h.length;_+=1)m[_]=ur(ir(t,h,_));return{c(){e=A("div"),n=A("select"),i=A("option"),i.textContent="Collection";for(let _=0;_<m.length;_+=1)m[_].c();r=Y(),s=A("div"),o=A("button"),l=H("×"),i.__value="",Oe(i,i.__value),b(n,"name","collection"),b(n,"class","svelte-fjpzuq"),t[11]===void 0&&et(()=>t[22].call(n)),b(o,"title","Clear Filter"),de(o,"visibility",t[11]!==""?"visible":"hidden"),b(o,"class","svelte-fjpzuq"),b(s,"class","svelte-fjpzuq"),b(e,"class","selectWrapper svelte-fjpzuq")},m(_,v){ae(_,e,v),d(e,n),d(n,i);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(n,null);st(n,t[11],!0),d(e,r),d(e,s),d(s,o),d(o,l),a||(c=[we(n,"change",t[22]),we(n,"change",t[17]),we(o,"click",t[17])],a=!0)},p(_,v){if(v[0]&8192){h=Ge(De.getCsvSourceList(_[13]));let g;for(g=0;g<h.length;g+=1){const E=ir(_,h,g);m[g]?m[g].p(E,v):(m[g]=ur(E),m[g].c(),m[g].m(n,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=h.length}v[0]&10240&&st(n,_[11]),v[0]&2048&&de(o,"visibility",_[11]!==""?"visible":"hidden")},d(_){_&&le(e),_n(m,_),a=!1,tt(c)}}}function ur(t){let e,n=(t[35].source==t[13]?hr(t[35].url):t[35].source)+"",i,r,s=t[35].image_count+"",o,l,a;return{c(){e=A("option"),i=H(n),r=H(" ("),o=H(s),l=H(`)
                  `),e.__value=a=t[35].url,Oe(e,e.__value)},m(c,h){ae(c,e,h),d(e,i),d(e,r),d(e,o),d(e,l)},p(c,h){h[0]&8192&&n!==(n=(c[35].source==c[13]?hr(c[35].url):c[35].source)+"")&&ke(i,n),h[0]&8192&&s!==(s=c[35].image_count+"")&&ke(o,s),h[0]&8192&&a!==(a=c[35].url)&&(e.__value=a,Oe(e,e.__value))},d(c){c&&le(e)}}}function fr(t){let e,n=t[30]+"",i,r;return{c(){e=A("option"),i=H(n),e.__value=r=t[4][t[30]],Oe(e,e.__value)},m(s,o){ae(s,e,o),d(e,i)},p(s,o){o[0]&16&&n!==(n=s[30]+"")&&ke(i,n),o[0]&16&&r!==(r=s[4][s[30]])&&(e.__value=r,Oe(e,e.__value))},d(s){s&&le(e)}}}function cr(t,e){let n,i=e[30]+"",r,s;return{key:t,first:null,c(){n=A("option"),r=H(i),n.__value=s=e[5][e[30]],Oe(n,n.__value),this.first=n},m(o,l){ae(o,n,l),d(n,r)},p(o,l){e=o,l[0]&32&&i!==(i=e[30]+"")&&ke(r,i),l[0]&32&&s!==(s=e[5][e[30]])&&(n.__value=s,Oe(n,n.__value))},d(o){o&&le(n)}}}function Ho(t){let e,n,i,r,s,o,l,a,c=gn(t[3])+"",h,m,_,v,g,E,D,R,B,U,W,N,X,S,u,f,p,k=t[13]!==""&&De.getCsvSourceList(t[13]).length>0,I,w,M,q,O=t[12]!==""?"All Dimensions":"Dimension Count",z,K,C,ue,x,L,ie,T,P,te,$,Q,F,V,ne=t[10]==""?"Organism":"All Organisms",ge,re,Ee,fe,Z,Be,Le,ze,pe,Ae,se=t[9]==""?"Imaging Modality":"All Modalities",_e,Ze,G=[],xe=new Map,Ke,Je,Ce,Ye,Qe,Te,ft,he,Xe,St,ct,ai,ht,ui,dt,fi,_t,ci,it,gt,hi,mt,di,pt,_i,zt,yt,gi,rn=t[0].length+"",vn,mi,pi,bt,Pe,wn,yi;n=new Uo({});let Ue=t[1].length>0&&sr(t),vt=Ge(t[1]),ye=[];for(let y=0;y<vt.length;y+=1)ye[y]=or(rr(t,vt,y));const Fr=y=>me(ye[y],1,1,()=>{ye[y]=null});let qe=t[13]!==""&&lr(t),Ve=k&&ar(t),Ct=Ge(Object.keys(t[4]).sort()),Me=[];for(let y=0;y<Ct.length;y+=1)Me[y]=fr(nr(t,Ct,y));let sn=Ge(Object.keys(t[5]).sort());const bi=y=>y[30];for(let y=0;y<sn.length;y+=1){let j=tr(t,sn,y),be=bi(j);xe.set(be,G[y]=cr(be,j))}return Xe=new rt({props:{col_label:"X",col_name:"size_x",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ct=new rt({props:{col_label:"Y",col_name:"size_y",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),ht=new rt({props:{col_label:"Z",col_name:"size_z",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),dt=new rt({props:{col_label:"C",col_name:"size_c",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),_t=new rt({props:{col_label:"T",col_name:"size_t",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),gt=new rt({props:{col_label:"Chunks",col_name:"chunk_pixels",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),mt=new rt({props:{col_label:"Shards",col_name:"shard_pixels",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),pt=new rt({props:{col_label:"Data size",col_name:"written",handleSort:t[14],sortedBy:t[6],sortAscending:t[7]}}),bt=new jo({props:{tableRows:t[0],textFilter:t[8],sortedBy:t[6]}}),{c(){e=A("div"),We(n.$$.fragment),i=Y(),r=A("main"),s=A("div"),o=A("h2"),l=H(t[2]),a=H(` Zarr Images,
        `),h=H(c),Ue&&Ue.c(),m=H(":"),_=Y(),v=A("div");for(let y=0;y<ye.length;y+=1)ye[y].c();g=Y(),qe&&qe.c(),E=Y(),D=A("div"),R=A("div"),B=A("div"),U=A("input"),W=Y(),N=A("button"),X=H("×"),S=Y(),u=A("div"),f=A("div"),f.textContent="Filter by:",p=Y(),Ve&&Ve.c(),I=Y(),w=A("div"),M=A("select"),q=A("option"),z=H(O),K=A("hr"),C=A("option"),C.textContent="2D",ue=A("option"),ue.textContent="3D",x=A("option"),x.textContent="4D",L=A("option"),L.textContent="5D",ie=Y(),T=A("div"),P=A("button"),te=H("×"),$=Y(),Q=A("div"),F=A("select"),V=A("option"),ge=H(ne),re=A("hr");for(let y=0;y<Me.length;y+=1)Me[y].c();Ee=Y(),fe=A("div"),Z=A("button"),Be=H("×"),Le=Y(),ze=A("div"),pe=A("select"),Ae=A("option"),_e=H(se),Ze=A("hr");for(let y=0;y<G.length;y+=1)G[y].c();Ke=Y(),Je=A("div"),Ce=A("button"),Ye=H("×"),Qe=Y(),Te=A("div"),ft=H(`
        Sort by:
        `),he=A("div"),We(Xe.$$.fragment),St=Y(),We(ct.$$.fragment),ai=Y(),We(ht.$$.fragment),ui=Y(),We(dt.$$.fragment),fi=Y(),We(_t.$$.fragment),ci=Y(),it=A("div"),We(gt.$$.fragment),hi=Y(),We(mt.$$.fragment),di=Y(),We(pt.$$.fragment),_i=Y(),zt=A("div"),yt=A("h3"),gi=H("Showing "),vn=H(rn),mi=H(" images"),pi=Y(),We(bt.$$.fragment),b(o,"class","svelte-fjpzuq"),b(v,"class","sources svelte-fjpzuq"),b(s,"class","summary svelte-fjpzuq"),b(U,"placeholder","Filter by Name or Description"),b(U,"name","textFilter"),b(U,"class","svelte-fjpzuq"),b(N,"title","Clear Filter"),de(N,"visibility",t[8]!==""?"visible":"hidden"),b(N,"class","svelte-fjpzuq"),b(B,"class","textInputWrapper svelte-fjpzuq"),de(f,"white-space","nowrap"),q.__value="",Oe(q,q.__value),C.__value="2",Oe(C,C.__value),ue.__value="3",Oe(ue,ue.__value),x.__value="4",Oe(x,x.__value),L.__value="5",Oe(L,L.__value),b(M,"class","svelte-fjpzuq"),t[12]===void 0&&et(()=>t[23].call(M)),b(P,"title","Clear Filter"),de(P,"visibility",t[12]!==""?"visible":"hidden"),b(P,"class","svelte-fjpzuq"),b(T,"class","svelte-fjpzuq"),b(w,"class","selectWrapper svelte-fjpzuq"),V.__value="",Oe(V,V.__value),b(F,"class","svelte-fjpzuq"),t[10]===void 0&&et(()=>t[24].call(F)),b(Z,"title","Clear Filter"),de(Z,"visibility",t[10]!==""?"visible":"hidden"),b(Z,"class","svelte-fjpzuq"),b(fe,"class","svelte-fjpzuq"),b(Q,"class","selectWrapper svelte-fjpzuq"),Ae.__value="",Oe(Ae,Ae.__value),b(pe,"class","svelte-fjpzuq"),t[9]===void 0&&et(()=>t[25].call(pe)),b(Ce,"title","Clear Filter"),de(Ce,"visibility",t[9]!==""?"visible":"hidden"),b(Ce,"class","svelte-fjpzuq"),b(Je,"class","svelte-fjpzuq"),b(ze,"class","selectWrapper svelte-fjpzuq"),b(Te,"class","clear svelte-fjpzuq"),b(u,"class","filters svelte-fjpzuq"),b(he,"class","sortButtons svelte-fjpzuq"),b(it,"class","sortButtons svelte-fjpzuq"),b(R,"class","sidebar svelte-fjpzuq"),de(yt,"margin-left","15px"),b(yt,"class","svelte-fjpzuq"),b(zt,"class","results svelte-fjpzuq"),b(D,"class","sidebarContainer svelte-fjpzuq"),b(r,"class","svelte-fjpzuq"),b(e,"class","app svelte-fjpzuq"),de(e,"--form-select-bg-img","url('"+No+"')")},m(y,j){ae(y,e,j),je(n,e,null),d(e,i),d(e,r),d(r,s),d(s,o),d(o,l),d(o,a),d(o,h),Ue&&Ue.m(o,null),d(o,m),d(s,_),d(s,v);for(let be=0;be<ye.length;be+=1)ye[be]&&ye[be].m(v,null);d(v,g),qe&&qe.m(v,null),d(r,E),d(r,D),d(D,R),d(R,B),d(B,U),Oe(U,t[8]),d(B,W),d(B,N),d(N,X),d(R,S),d(R,u),d(u,f),d(u,p),Ve&&Ve.m(u,null),d(u,I),d(u,w),d(w,M),d(M,q),d(q,z),d(M,K),d(M,C),d(M,ue),d(M,x),d(M,L),st(M,t[12],!0),d(w,ie),d(w,T),d(T,P),d(P,te),d(u,$),d(u,Q),d(Q,F),d(F,V),d(V,ge),d(F,re);for(let be=0;be<Me.length;be+=1)Me[be]&&Me[be].m(F,null);st(F,t[10],!0),d(Q,Ee),d(Q,fe),d(fe,Z),d(Z,Be),d(u,Le),d(u,ze),d(ze,pe),d(pe,Ae),d(Ae,_e),d(pe,Ze);for(let be=0;be<G.length;be+=1)G[be]&&G[be].m(pe,null);st(pe,t[9],!0),d(ze,Ke),d(ze,Je),d(Je,Ce),d(Ce,Ye),d(u,Qe),d(u,Te),d(R,ft),d(R,he),je(Xe,he,null),d(he,St),je(ct,he,null),d(he,ai),je(ht,he,null),d(he,ui),je(dt,he,null),d(he,fi),je(_t,he,null),d(R,ci),d(R,it),je(gt,it,null),d(it,hi),je(mt,it,null),d(it,di),je(pt,it,null),d(D,_i),d(D,zt),d(zt,yt),d(yt,gi),d(yt,vn),d(yt,mi),d(zt,pi),je(bt,zt,null),Pe=!0,wn||(yi=[we(U,"input",t[21]),we(U,"input",t[20]),we(N,"click",t[20]),we(M,"change",t[23]),we(M,"change",t[16]),we(P,"click",t[16]),we(F,"change",t[24]),we(F,"change",t[18]),we(Z,"click",t[18]),we(pe,"change",t[25]),we(pe,"change",t[19]),we(Ce,"click",t[19])],wn=!0)},p(y,j){if((!Pe||j[0]&4)&&ke(l,y[2]),(!Pe||j[0]&8)&&c!==(c=gn(y[3])+"")&&ke(h,c),y[1].length>0?Ue?Ue.p(y,j):(Ue=sr(y),Ue.c(),Ue.m(o,m)):Ue&&(Ue.d(1),Ue=null),j[0]&32770){vt=Ge(y[1]);let oe;for(oe=0;oe<vt.length;oe+=1){const jt=rr(y,vt,oe);ye[oe]?(ye[oe].p(jt,j),ce(ye[oe],1)):(ye[oe]=or(jt),ye[oe].c(),ce(ye[oe],1),ye[oe].m(v,g))}for(Qn(),oe=vt.length;oe<ye.length;oe+=1)Fr(oe);Zn()}if(y[13]!==""?qe?qe.p(y,j):(qe=lr(y),qe.c(),qe.m(v,null)):qe&&(qe.d(1),qe=null),j[0]&256&&U.value!==y[8]&&Oe(U,y[8]),(!Pe||j[0]&256)&&de(N,"visibility",y[8]!==""?"visible":"hidden"),j[0]&8192&&(k=y[13]!==""&&De.getCsvSourceList(y[13]).length>0),k?Ve?Ve.p(y,j):(Ve=ar(y),Ve.c(),Ve.m(u,I)):Ve&&(Ve.d(1),Ve=null),(!Pe||j[0]&4096)&&O!==(O=y[12]!==""?"All Dimensions":"Dimension Count")&&ke(z,O),j[0]&4096&&st(M,y[12]),(!Pe||j[0]&4096)&&de(P,"visibility",y[12]!==""?"visible":"hidden"),(!Pe||j[0]&1024)&&ne!==(ne=y[10]==""?"Organism":"All Organisms")&&ke(ge,ne),j[0]&16){Ct=Ge(Object.keys(y[4]).sort());let oe;for(oe=0;oe<Ct.length;oe+=1){const jt=nr(y,Ct,oe);Me[oe]?Me[oe].p(jt,j):(Me[oe]=fr(jt),Me[oe].c(),Me[oe].m(F,null))}for(;oe<Me.length;oe+=1)Me[oe].d(1);Me.length=Ct.length}j[0]&1040&&st(F,y[10]),(!Pe||j[0]&1024)&&de(Z,"visibility",y[10]!==""?"visible":"hidden"),(!Pe||j[0]&512)&&se!==(se=y[9]==""?"Imaging Modality":"All Modalities")&&ke(_e,se),j[0]&32&&(sn=Ge(Object.keys(y[5]).sort()),G=br(G,j,bi,1,y,sn,xe,pe,Gr,cr,null,tr)),j[0]&544&&st(pe,y[9]),(!Pe||j[0]&512)&&de(Ce,"visibility",y[9]!==""?"visible":"hidden");const be={};j[0]&64&&(be.sortedBy=y[6]),j[0]&128&&(be.sortAscending=y[7]),Xe.$set(be);const kn={};j[0]&64&&(kn.sortedBy=y[6]),j[0]&128&&(kn.sortAscending=y[7]),ct.$set(kn);const En={};j[0]&64&&(En.sortedBy=y[6]),j[0]&128&&(En.sortAscending=y[7]),ht.$set(En);const An={};j[0]&64&&(An.sortedBy=y[6]),j[0]&128&&(An.sortAscending=y[7]),dt.$set(An);const Sn={};j[0]&64&&(Sn.sortedBy=y[6]),j[0]&128&&(Sn.sortAscending=y[7]),_t.$set(Sn);const zn={};j[0]&64&&(zn.sortedBy=y[6]),j[0]&128&&(zn.sortAscending=y[7]),gt.$set(zn);const Cn={};j[0]&64&&(Cn.sortedBy=y[6]),j[0]&128&&(Cn.sortAscending=y[7]),mt.$set(Cn);const In={};j[0]&64&&(In.sortedBy=y[6]),j[0]&128&&(In.sortAscending=y[7]),pt.$set(In),(!Pe||j[0]&1)&&rn!==(rn=y[0].length+"")&&ke(vn,rn);const on={};j[0]&1&&(on.tableRows=y[0]),j[0]&256&&(on.textFilter=y[8]),j[0]&64&&(on.sortedBy=y[6]),bt.$set(on)},i(y){if(!Pe){ce(n.$$.fragment,y);for(let j=0;j<vt.length;j+=1)ce(ye[j]);ce(Xe.$$.fragment,y),ce(ct.$$.fragment,y),ce(ht.$$.fragment,y),ce(dt.$$.fragment,y),ce(_t.$$.fragment,y),ce(gt.$$.fragment,y),ce(mt.$$.fragment,y),ce(pt.$$.fragment,y),ce(bt.$$.fragment,y),Pe=!0}},o(y){me(n.$$.fragment,y),ye=ye.filter(Boolean);for(let j=0;j<ye.length;j+=1)me(ye[j]);me(Xe.$$.fragment,y),me(ct.$$.fragment,y),me(ht.$$.fragment,y),me(dt.$$.fragment,y),me(_t.$$.fragment,y),me(gt.$$.fragment,y),me(mt.$$.fragment,y),me(pt.$$.fragment,y),me(bt.$$.fragment,y),Pe=!1},d(y){y&&le(e),Ne(n),Ue&&Ue.d(),_n(ye,y),qe&&qe.d(),Ve&&Ve.d(),_n(Me,y);for(let j=0;j<G.length;j+=1)G[j].d();Ne(Xe),Ne(ct),Ne(ht),Ne(dt),Ne(_t),Ne(gt),Ne(mt),Ne(pt),Ne(bt),wn=!1,tt(yi)}}}function hr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Ko(t,e,n){let i,r,s,o,l,a,h=new URLSearchParams(window.location.search).get("csv");try{new URL(h)}catch{h=is}let m=[],_=[],v=0,g=0,E={},D={};De.subscribe(O=>{n(0,m=W(O)),n(1,_=De.getCsvSourceList()),n(2,v=O.length),n(3,g=O.reduce((z,K)=>z+parseInt(K.written)||0,0))}),Cr.subscribe(O=>{let z={};for(const[K,C]of Object.entries(O))z[C]=K;n(4,E=z)}),Ir.subscribe(O=>{let z={};for(const[K,C]of Object.entries(O))z[C]=K;n(5,D=z)}),h&&kr(h,De);let R="",B=!0;function U(O){R===O?n(7,B=!B):n(7,B=!1),n(6,R=O),De.sortTable(O,B)}function W(O){if(i!==""&&(O=O.filter(z=>z.dim_count==i)),s!=="")O=O.filter(z=>z.csv==s);else if(r!==""){let z=De.getCsvSourceList(r),K=[r,...z.map(C=>C.source)];O=O.filter(C=>K.includes(C.source))}return o!==""&&(O=O.filter(z=>z.organismId==o)),l!=""&&(O=O.filter(z=>z.fbbiId==l)),a!=""&&(O=O.filter(z=>{var K,C;return((K=z.description)==null?void 0:K.includes(a))||((C=z.name)==null?void 0:C.includes(a))})),O}function N(O){n(13,r=O.target.value||""),n(11,s=""),console.log("filterSource",r,s),n(0,m=W(De.getRows()))}function X(O){n(12,i=O.target.value||""),n(0,m=W(De.getRows()))}function S(O){n(11,s=O.target.value||""),n(0,m=W(De.getRows()))}function u(O){n(10,o=O.target.value||""),n(0,m=W(De.getRows()))}function f(O){n(9,l=O.target.value||""),n(0,m=W(De.getRows()))}function p(O){n(8,a=O.target.value),n(0,m=W(De.getRows()))}function k(){a=this.value,n(8,a)}function I(){s=an(this),n(11,s),n(13,r)}function w(){i=an(this),n(12,i)}function M(){o=an(this),n(10,o),n(4,E)}function q(){l=an(this),n(9,l),n(5,D)}return t.$$.update=()=>{t.$$.dirty[0]&1&&m.some(O=>O.source)},n(12,i=""),n(13,r=""),n(11,s=""),n(10,o=""),n(9,l=""),n(8,a=""),[m,_,v,g,E,D,R,B,a,l,o,s,i,r,U,N,X,S,u,f,p,k,I,w,M,q]}class Jo extends ut{constructor(e){super(),at(this,e,Ko,Ho,nt,{},null,[-1,-1])}}new Jo({target:document.getElementById("app")});
