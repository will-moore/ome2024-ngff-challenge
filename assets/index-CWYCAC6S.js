const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Ur=Object.defineProperty;var vi=t=>{throw TypeError(t)};var qr=(t,e,n)=>e in t?Ur(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>qr(t,typeof e!="symbol"?e+"":e,n),Tn=(t,e,n)=>e.has(t)||vi("Cannot "+n);var $=(t,e,n)=>(Tn(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?vi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,i)=>(Tn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),On=(t,e,n)=>(Tn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ye(){}function Br(t,e){for(const n in e)t[n]=e[n];return t}function br(t){return t()}function bi(){return Object.create(null)}function nt(t){t.forEach(br)}function bn(t){return typeof t=="function"}function xe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let dn;function Mn(t,e){return t===e?!0:(dn||(dn=document.createElement("a")),dn.href=e,t===dn.href)}function jr(t){return Object.keys(t).length===0}function xr(t,...e){if(t==null){for(const i of e)i(void 0);return ye}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function xt(t){let e;return xr(t,n=>e=n)(),e}function Ln(t,e,n,i){if(t){const r=yr(t,e,n,i);return t[0](r)}}function yr(t,e,n,i){return t[1]&&i?Br(n.ctx.slice(),t[1](i(e))):n.ctx}function Fn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Dn(t,e,n,i,r,s){if(r){const o=yr(e,n,i,s);t.p(o,r)}}function Nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function yi(t){return t??""}function h(t,e){t.appendChild(e)}function J(t,e,n){t.insertBefore(e,n||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function Tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function j(){return q(" ")}function kn(){return q("")}function be(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Vr(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ee(t,e){t.value=e??""}function le(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function _n(t){const e=t.querySelector(":checked");return e&&e.__value}function It(t,e,n){t.classList.toggle(e,!!n)}function Wr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Ht;function Wt(t){Ht=t}function Gn(){if(!Ht)throw new Error("Function called outside component initialization");return Ht}function on(t){Gn().$$.on_mount.push(t)}function Jn(t){Gn().$$.on_destroy.push(t)}function Hr(){const t=Gn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Wr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const At=[],Mt=[];let Ot=[];const wi=[],Kr=Promise.resolve();let Pn=!1;function Gr(){Pn||(Pn=!0,Kr.then(Pe))}function st(t){Ot.push(t)}const Rn=new Set;let Ct=0;function Pe(){if(Ct!==0)return;const t=Ht;do{try{for(;Ct<At.length;){const e=At[Ct];Ct++,Wt(e),Jr(e.$$)}}catch(e){throw At.length=0,Ct=0,e}for(Wt(null),At.length=0,Ct=0;Mt.length;)Mt.pop()();for(let e=0;e<Ot.length;e+=1){const n=Ot[e];Rn.has(n)||(Rn.add(n),n())}Ot.length=0}while(At.length);for(;wi.length;)wi.pop()();Pn=!1,Rn.clear(),Wt(t)}function Jr(t){if(t.fragment!==null){t.update(),nt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(st)}}function Zr(t){const e=[],n=[];Ot.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ot=e}const mn=new Set;let dt;function Ft(){dt={r:0,c:[],p:dt}}function Dt(){dt.r||nt(dt.c),dt=dt.p}function se(t,e){t&&t.i&&(mn.delete(t),t.i(e))}function fe(t,e,n,i){if(t&&t.o){if(mn.has(t))return;mn.add(t),dt.c.push(()=>{mn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Yr(t,e){t.d(1),e.delete(t.key)}function Qr(t,e){fe(t,1,1,()=>{e.delete(t.key)})}function wr(t,e,n,i,r,s,o,a,l,d,f,_){let p=t.length,g=s.length,m=p;const E={};for(;m--;)E[t[m].key]=m;const P=[],N=new Map,M=new Map,V=[];for(m=g;m--;){const R=_(r,s,m),c=n(R);let u=o.get(c);u?V.push(()=>u.p(R,e)):(u=d(c,R),u.c()),N.set(c,P[m]=u),c in E&&M.set(c,Math.abs(m-E[c]))}const Q=new Set,G=new Set;function Y(R){se(R,1),R.m(a,f),o.set(R.key,R),f=R.first,g--}for(;p&&g;){const R=P[g-1],c=t[p-1],u=R.key,w=c.key;R===c?(f=R.first,p--,g--):N.has(w)?!o.has(u)||Q.has(u)?Y(R):G.has(w)?p--:M.get(u)>M.get(w)?(G.add(u),Y(R)):(Q.add(w),p--):(l(c,o),p--)}for(;p--;){const R=t[p];N.has(R.key)||l(R,o)}for(;g;)Y(P[g-1]);return nt(V),P}function Je(t){t&&t.c()}function Ke(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),st(()=>{const s=t.$$.on_mount.map(br).filter(bn);t.$$.on_destroy?t.$$.on_destroy.push(...s):nt(s),t.$$.on_mount=[]}),r.forEach(st)}function Ge(t,e){const n=t.$$;n.fragment!==null&&(Zr(n.after_update),nt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xr(t,e){t.$$.dirty[0]===-1&&(At.push(t),Gr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,i,r,s,o=null,a=[-1]){const l=Ht;Wt(t);const d=t.$$={fragment:null,ctx:[],props:s,update:ye,not_equal:r,bound:bi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:bi(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(d.root);let f=!1;if(d.ctx=n?n(t,e.props||{},(_,p,...g)=>{const m=g.length?g[0]:p;return d.ctx&&r(d.ctx[_],d.ctx[_]=m)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](m),f&&Xr(t,_)),p}):[],d.update(),f=!0,nt(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const _=Vr(e.target);d.fragment&&d.fragment.l(_),_.forEach(K)}else d.fragment&&d.fragment.c();e.intro&&se(t.$$.fragment),Ke(t,e.target,e.anchor),Pe()}Wt(l)}class Ye{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){Ge(this,1),this.$destroy=ye}$on(e,n){if(!bn(n))return ye;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!jr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $r="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($r);const St=[];function Un(t,e=ye){let n;const i=new Set;function r(a){if(xe(t,a)&&(t=a,n)){const l=!St.length;for(const d of i)d[1](),St.push(d,t);if(l){for(let d=0;d<St.length;d+=2)St[d][0](St[d+1]);St.length=0}}}function s(a){r(a(t))}function o(a,l=ye){const d=[a,l];return i.add(d),i.size===1&&(n=e(r,s)||ye),a(t),()=>{i.delete(d),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ts(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(es,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(c,u){var w=(u=u||{}).dynamicTyping||!1;if(R(w)&&(u.dynamicTypingFunction=w,w={}),u.dynamicTyping=w,u.transform=!!R(u.transform)&&u.transform,u.worker&&l.WORKERS_SUPPORTED){var I=function(){if(!l.WORKERS_SUPPORTED)return!1;var z=(ee=i.URL||i.webkitURL||null,U=n.toString(),l.BLOB_URL||(l.BLOB_URL=ee.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))),x=new i.Worker(z),ee,U;return x.onmessage=M,x.id=a++,o[x.id]=x}();return I.userStep=u.step,I.userChunk=u.chunk,I.userComplete=u.complete,I.userError=u.error,u.step=R(u.step),u.chunk=R(u.chunk),u.complete=R(u.complete),u.error=R(u.error),delete u.worker,void I.postMessage({input:c,config:u,workerId:I.id})}var C=null;return l.NODE_STREAM_INPUT,typeof c=="string"?(c=function(z){return z.charCodeAt(0)===65279?z.slice(1):z}(c),C=u.download?new _(u):new g(u)):c.readable===!0&&R(c.read)&&R(c.on)?C=new m(u):(i.File&&c instanceof File||c instanceof Object)&&(C=new p(u)),C.stream(c)},unparse:function(c,u){var w=!1,I=!0,C=",",z=`\r
`,x='"',ee=x+x,U=!1,b=null,S=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||l.BAD_DELIMITERS.filter(function(O){return u.delimiter.indexOf(O)!==-1}).length||(C=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(w=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(U=u.skipEmptyLines),typeof u.newline=="string"&&(z=u.newline),typeof u.quoteChar=="string"&&(x=u.quoteChar),typeof u.header=="boolean"&&(I=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");b=u.columns}u.escapeChar!==void 0&&(ee=u.escapeChar+x),(typeof u.escapeFormulae=="boolean"||u.escapeFormulae instanceof RegExp)&&(S=u.escapeFormulae instanceof RegExp?u.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var T=new RegExp(P(x),"g");if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return L(null,c,U);if(typeof c[0]=="object")return L(b||Object.keys(c[0]),c,U)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||b),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),L(c.fields||[],c.data||[],U);throw new Error("Unable to serialize unrecognized input");function L(O,W,y){var F="";typeof O=="string"&&(O=JSON.parse(O)),typeof W=="string"&&(W=JSON.parse(W));var B=Array.isArray(O)&&0<O.length,ne=!Array.isArray(W[0]);if(B&&I){for(var ie=0;ie<O.length;ie++)0<ie&&(F+=C),F+=te(O[ie],ie);0<W.length&&(F+=z)}for(var D=0;D<W.length;D++){var Z=B?O.length:W[D].length,ae=!1,de=B?Object.keys(W[D]).length===0:W[D].length===0;if(y&&!B&&(ae=y==="greedy"?W[D].join("").trim()==="":W[D].length===1&&W[D][0].length===0),y==="greedy"&&B){for(var X=[],ve=0;ve<Z;ve++){var _e=ne?O[ve]:ve;X.push(W[D][_e])}ae=X.join("").trim()===""}if(!ae){for(var ue=0;ue<Z;ue++){0<ue&&!de&&(F+=C);var qe=B&&ne?O[ue]:ue;F+=te(W[D][qe],ue)}D<W.length-1&&(!y||0<Z&&!de)&&(F+=z)}}return F}function te(O,W){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var y=!1;S&&typeof O=="string"&&S.test(O)&&(O="'"+O,y=!0);var F=O.toString().replace(T,ee);return(y=y||w===!0||typeof w=="function"&&w(O,W)||Array.isArray(w)&&w[W]||function(B,ne){for(var ie=0;ie<ne.length;ie++)if(-1<B.indexOf(ne[ie]))return!0;return!1}(F,l.BAD_DELIMITERS)||-1<F.indexOf(C)||F.charAt(0)===" "||F.charAt(F.length-1)===" ")?x+F+x:F}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=N,l.ParserHandle=E,l.NetworkStreamer=_,l.FileStreamer=p,l.StringStreamer=g,l.ReadableStreamStreamer=m,i.jQuery){var d=i.jQuery;d.fn.parse=function(c){var u=c.config||{},w=[];return this.each(function(z){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var x=0;x<this.files.length;x++)w.push({file:this.files[x],inputElem:this,instanceConfig:d.extend({},u)})}),I(),this;function I(){if(w.length!==0){var z,x,ee,U,b=w[0];if(R(c.before)){var S=c.before(b.file,b.inputElem);if(typeof S=="object"){if(S.action==="abort")return z="AbortError",x=b.file,ee=b.inputElem,U=S.reason,void(R(c.error)&&c.error({name:z},x,ee,U));if(S.action==="skip")return void C();typeof S.config=="object"&&(b.instanceConfig=d.extend(b.instanceConfig,S.config))}else if(S==="skip")return void C()}var T=b.instanceConfig.complete;b.instanceConfig.complete=function(L){R(T)&&T(L,b.file,b.inputElem),C()},l.parse(b.file,b.instanceConfig)}else R(c.complete)&&c.complete()}function C(){w.splice(0,1),I()}}}function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(u){var w=G(u);w.chunkSize=parseInt(w.chunkSize),u.step||u.chunk||(w.chunkSize=null),this._handle=new E(w),(this._handle.streamer=this)._config=w}).call(this,c),this.parseChunk=function(u,w){if(this.isFirstChunk&&R(this._config.beforeFirstChunk)){var I=this._config.beforeFirstChunk(u);I!==void 0&&(u=I)}this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+u;this._partialLine="";var z=this._handle.parse(C,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var x=z.meta.cursor;this._finished||(this._partialLine=C.substring(x-this._baseIndex),this._baseIndex=x),z&&z.data&&(this._rowCount+=z.data.length);var ee=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:z,workerId:l.WORKER_ID,finished:ee});else if(R(this._config.chunk)&&!w){if(this._config.chunk(z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);z=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(z.data),this._completeResults.errors=this._completeResults.errors.concat(z.errors),this._completeResults.meta=z.meta),this._completed||!ee||!R(this._config.complete)||z&&z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ee||z&&z.meta.paused||this._nextChunk(),z}this._halted=!0},this._sendError=function(u){R(this._config.error)?this._config.error(u):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:u,finished:!1})}}function _(c){var u;(c=c||{}).chunkSize||(c.chunkSize=l.RemoteChunkSize),f.call(this,c),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),r||(u.onload=Y(this._chunkLoaded,this),u.onerror=Y(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var w=this._config.downloadRequestHeaders;for(var I in w)u.setRequestHeader(I,w[I])}if(this._config.chunkSize){var C=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+C)}try{u.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}r&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(w){var I=w.getResponseHeader("Content-Range");return I===null?-1:parseInt(I.substring(I.lastIndexOf("/")+1))}(u),this.parseChunk(u.responseText)))},this._chunkError=function(w){var I=u.statusText||w;this._sendError(new Error(I))}}function p(c){var u,w;(c=c||{}).chunkSize||(c.chunkSize=l.LocalChunkSize),f.call(this,c);var I=typeof FileReader<"u";this.stream=function(C){this._input=C,w=C.slice||C.webkitSlice||C.mozSlice,I?((u=new FileReader).onload=Y(this._chunkLoaded,this),u.onerror=Y(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var C=this._input;if(this._config.chunkSize){var z=Math.min(this._start+this._config.chunkSize,this._input.size);C=w.call(C,this._start,z)}var x=u.readAsText(C,this._config.encoding);I||this._chunkLoaded({target:{result:x}})},this._chunkLoaded=function(C){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(C.target.result)},this._chunkError=function(){this._sendError(u.error)}}function g(c){var u;f.call(this,c=c||{}),this.stream=function(w){return u=w,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var w,I=this._config.chunkSize;return I?(w=u.substring(0,I),u=u.substring(I)):(w=u,u=""),this._finished=!u,this.parseChunk(w)}}}function m(c){f.call(this,c=c||{});var u=[],w=!0,I=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(C){this._input=C,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):w=!0},this._streamData=Y(function(C){try{u.push(typeof C=="string"?C:C.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(z){this._streamError(z)}},this),this._streamError=Y(function(C){this._streamCleanUp(),this._sendError(C)},this),this._streamEnd=Y(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=Y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(c){var u,w,I,C=Math.pow(2,53),z=-C,x=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,b=0,S=0,T=!1,L=!1,te=[],O={data:[],errors:[],meta:{}};if(R(c.step)){var W=c.step;c.step=function(D){if(O=D,B())F();else{if(F(),O.data.length===0)return;b+=D.data.length,c.preview&&b>c.preview?w.abort():(O.data=O.data[0],W(O,U))}}}function y(D){return c.skipEmptyLines==="greedy"?D.join("").trim()==="":D.length===1&&D[0].length===0}function F(){return O&&I&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),I=!1),c.skipEmptyLines&&(O.data=O.data.filter(function(D){return!y(D)})),B()&&function(){if(!O)return;function D(ae,de){R(c.transformHeader)&&(ae=c.transformHeader(ae,de)),te.push(ae)}if(Array.isArray(O.data[0])){for(var Z=0;B()&&Z<O.data.length;Z++)O.data[Z].forEach(D);O.data.splice(0,1)}else O.data.forEach(D)}(),function(){if(!O||!c.header&&!c.dynamicTyping&&!c.transform)return O;function D(ae,de){var X,ve=c.header?{}:[];for(X=0;X<ae.length;X++){var _e=X,ue=ae[X];c.header&&(_e=X>=te.length?"__parsed_extra":te[X]),c.transform&&(ue=c.transform(ue,_e)),ue=ne(_e,ue),_e==="__parsed_extra"?(ve[_e]=ve[_e]||[],ve[_e].push(ue)):ve[_e]=ue}return c.header&&(X>te.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+te.length+" fields but parsed "+X,S+de):X<te.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+te.length+" fields but parsed "+X,S+de)),ve}var Z=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(D),Z=O.data.length):O.data=D(O.data,0),c.header&&O.meta&&(O.meta.fields=te),S+=Z,O}()}function B(){return c.header&&te.length===0}function ne(D,Z){return ae=D,c.dynamicTypingFunction&&c.dynamicTyping[ae]===void 0&&(c.dynamicTyping[ae]=c.dynamicTypingFunction(ae)),(c.dynamicTyping[ae]||c.dynamicTyping)===!0?Z==="true"||Z==="TRUE"||Z!=="false"&&Z!=="FALSE"&&(function(de){if(x.test(de)){var X=parseFloat(de);if(z<X&&X<C)return!0}return!1}(Z)?parseFloat(Z):ee.test(Z)?new Date(Z):Z===""?null:Z):Z;var ae}function ie(D,Z,ae,de){var X={type:D,code:Z,message:ae};de!==void 0&&(X.row=de),O.errors.push(X)}this.parse=function(D,Z,ae){var de=c.quoteChar||'"';if(c.newline||(c.newline=function(_e,ue){_e=_e.substring(0,1048576);var qe=new RegExp(P(ue)+"([^]*?)"+P(ue),"gm"),Me=(_e=_e.replace(qe,"")).split("\r"),Le=_e.split(`
`),Ie=1<Le.length&&Le[0].length<Me[0].length;if(Me.length===1||Ie)return`
`;for(var Fe=0,ge=0;ge<Me.length;ge++)Me[ge][0]===`
`&&Fe++;return Fe>=Me.length/2?`\r
`:"\r"}(D,de)),I=!1,c.delimiter)R(c.delimiter)&&(c.delimiter=c.delimiter(D),O.meta.delimiter=c.delimiter);else{var X=function(_e,ue,qe,Me,Le){var Ie,Fe,ge,he;Le=Le||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Ce=0;Ce<Le.length;Ce++){var re=Le[Ce],Qe=0,Ve=0,tt=0;ge=void 0;for(var Ae=new N({comments:Me,delimiter:re,newline:ue,preview:10}).parse(_e),Xe=0;Xe<Ae.data.length;Xe++)if(qe&&y(Ae.data[Xe]))tt++;else{var $e=Ae.data[Xe].length;Ve+=$e,ge!==void 0?0<$e&&(Qe+=Math.abs($e-ge),ge=$e):ge=$e}0<Ae.data.length&&(Ve/=Ae.data.length-tt),(Fe===void 0||Qe<=Fe)&&(he===void 0||he<Ve)&&1.99<Ve&&(Fe=Qe,Ie=re,he=Ve)}return{successful:!!(c.delimiter=Ie),bestDelimiter:Ie}}(D,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess);X.successful?c.delimiter=X.bestDelimiter:(I=!0,c.delimiter=l.DefaultDelimiter),O.meta.delimiter=c.delimiter}var ve=G(c);return c.preview&&c.header&&ve.preview++,u=D,w=new N(ve),O=w.parse(u,Z,ae),F(),T?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,w.abort(),u=R(c.chunk)?"":u.substring(w.getCharIndex())},this.resume=function(){U.streamer._halted?(T=!1,U.streamer.parseChunk(u,!0)):setTimeout(U.resume,3)},this.aborted=function(){return L},this.abort=function(){L=!0,w.abort(),O.meta.aborted=!0,R(c.complete)&&c.complete(O),u=""}}function P(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N(c){var u,w=(c=c||{}).delimiter,I=c.newline,C=c.comments,z=c.step,x=c.preview,ee=c.fastMode,U=u=c.quoteChar===void 0||c.quoteChar===null?'"':c.quoteChar;if(c.escapeChar!==void 0&&(U=c.escapeChar),(typeof w!="string"||-1<l.BAD_DELIMITERS.indexOf(w))&&(w=","),C===w)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<l.BAD_DELIMITERS.indexOf(C))&&(C=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var b=0,S=!1;this.parse=function(T,L,te){if(typeof T!="string")throw new Error("Input must be a string");var O=T.length,W=w.length,y=I.length,F=C.length,B=R(z),ne=[],ie=[],D=[],Z=b=0;if(!T)return Oe();if(c.header&&!L){var ae=T.split(I)[0].split(w),de=[],X={},ve=!1;for(var _e in ae){var ue=ae[_e];R(c.transformHeader)&&(ue=c.transformHeader(ue,_e));var qe=ue,Me=X[ue]||0;for(0<Me&&(ve=!0,qe=ue+"_"+Me),X[ue]=Me+1;de.includes(qe);)qe=qe+"_"+Me;de.push(qe)}if(ve){var Le=T.split(I);Le[0]=de.join(w),T=Le.join(I)}}if(ee||ee!==!1&&T.indexOf(u)===-1){for(var Ie=T.split(I),Fe=0;Fe<Ie.length;Fe++){if(D=Ie[Fe],b+=D.length,Fe!==Ie.length-1)b+=I.length;else if(te)return Oe();if(!C||D.substring(0,F)!==C){if(B){if(ne=[],tt(D.split(w)),We(),S)return Oe()}else tt(D.split(w));if(x&&x<=Fe)return ne=ne.slice(0,x),Oe(!0)}}return Oe()}for(var ge=T.indexOf(w,b),he=T.indexOf(I,b),Ce=new RegExp(P(U)+P(u),"g"),re=T.indexOf(u,b);;)if(T[b]!==u)if(C&&D.length===0&&T.substring(b,b+F)===C){if(he===-1)return Oe();b=he+y,he=T.indexOf(I,b),ge=T.indexOf(w,b)}else if(ge!==-1&&(ge<he||he===-1))D.push(T.substring(b,ge)),b=ge+W,ge=T.indexOf(w,b);else{if(he===-1)break;if(D.push(T.substring(b,he)),$e(he+y),B&&(We(),S))return Oe();if(x&&ne.length>=x)return Oe(!0)}else for(re=b,b++;;){if((re=T.indexOf(u,re+1))===-1)return te||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:b}),Xe();if(re===O-1)return Xe(T.substring(b,re).replace(Ce,u));if(u!==U||T[re+1]!==U){if(u===U||re===0||T[re-1]!==U){ge!==-1&&ge<re+1&&(ge=T.indexOf(w,re+1)),he!==-1&&he<re+1&&(he=T.indexOf(I,re+1));var Qe=Ae(he===-1?ge:Math.min(ge,he));if(T.substr(re+1+Qe,W)===w){D.push(T.substring(b,re).replace(Ce,u)),T[b=re+1+Qe+W]!==u&&(re=T.indexOf(u,b)),ge=T.indexOf(w,b),he=T.indexOf(I,b);break}var Ve=Ae(he);if(T.substring(re+1+Ve,re+1+Ve+y)===I){if(D.push(T.substring(b,re).replace(Ce,u)),$e(re+1+Ve+y),ge=T.indexOf(w,b),re=T.indexOf(u,b),B&&(We(),S))return Oe();if(x&&ne.length>=x)return Oe(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:b}),re++}}else re++}return Xe();function tt(De){ne.push(De),Z=b}function Ae(De){var Pt=0;if(De!==-1){var ut=T.substring(re+1,De);ut&&ut.trim()===""&&(Pt=ut.length)}return Pt}function Xe(De){return te||(De===void 0&&(De=T.substring(b)),D.push(De),b=O,tt(D),B&&We()),Oe()}function $e(De){b=De,tt(D),D=[],he=T.indexOf(I,b)}function Oe(De){return{data:ne,errors:ie,meta:{delimiter:w,linebreak:I,aborted:S,truncated:!!De,cursor:Z+(L||0)}}}function We(){z(Oe()),ne=[],ie=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return b}}function M(c){var u=c.data,w=o[u.workerId],I=!1;if(u.error)w.userError(u.error,u.file);else if(u.results&&u.results.data){var C={abort:function(){I=!0,V(u.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Q,resume:Q};if(R(w.userStep)){for(var z=0;z<u.results.data.length&&(w.userStep({data:u.results.data[z],errors:u.results.errors,meta:u.results.meta},C),!I);z++);delete u.results}else R(w.userChunk)&&(w.userChunk(u.results,C,u.file),delete u.results)}u.finished&&!I&&V(u.workerId,u.results)}function V(c,u){var w=o[c];R(w.userComplete)&&w.userComplete(u),w.terminate(),delete o[c]}function Q(){throw new Error("Not implemented.")}function G(c){if(typeof c!="object"||c===null)return c;var u=Array.isArray(c)?[]:{};for(var w in c)u[w]=G(c[w]);return u}function Y(c,u){return function(){c.apply(u,arguments)}}function R(c){return typeof c=="function"}return s&&(i.onmessage=function(c){var u=c.data;if(l.WORKER_ID===void 0&&u&&(l.WORKER_ID=u.workerId),typeof u.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(u.input,u.config),finished:!0});else if(i.File&&u.input instanceof File||u.input instanceof Object){var w=l.parse(u.input,u.config);w&&i.postMessage({workerId:l.WORKER_ID,results:w,finished:!0})}}),(_.prototype=Object.create(f.prototype)).constructor=_,(p.prototype=Object.create(f.prototype)).constructor=p,(g.prototype=Object.create(g.prototype)).constructor=g,(m.prototype=Object.create(f.prototype)).constructor=m,l})})(kr);var ns=kr.exports;const is=ts(ns),rs="https://will-moore.github.io/ome2024-ngff-challenge/idr-mark.svg",ss="https://will-moore.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",qn="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let os={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function ki(t){if(t==="IDR")return rs;let e=os[t];return e?e==="https://nfdi4bioimage.de/"?ss:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function Er(t,e,n={}){is.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(g=>{let m={...n};for(let E=0;E<r.length;E++)m[r[E]]=g[E];return m}),a=o.filter(g=>{var m;return!((m=g.url)!=null&&m.endsWith(".csv"))}),l={};a.forEach(g=>{if(l[g.url]){console.warn("Removing duplicate URL:",g.url);return}l[g.url]=g}),a=Object.values(l);let d=o.filter(g=>{var m;return(m=g.url)==null?void 0:m.includes(".csv")}),f=a.reduce((g,m)=>m.wells?g+1:g,0),_=a.reduce((g,m)=>g+parseInt(m.written||0),0),p=a.length;f>0&&(p=a.reduce((g,m)=>g+parseInt(m.images||1),0)),e.addCsv(t,d,p,f,_),e.addRows(a),d.forEach(g=>{let m=g.url;g.csv=m,Er(m,e,g)})}})}async function Cr(t){return await fetch(t).then(e=>e.json())}function Lt(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function ls(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function as(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(Sr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),d=0;for(let f=0;f<o;f++){for(let _=0;_<t.length;_++){let p=n[_],g=t[_].data,m=e[_],P=(g[f]-m[0])/(m[1]-m[0]);for(let N=0;N<3;N++){let M=P*p[N]<<0;l[d*4+N]=Math.max(l[d*4+N],M)}}l[d*4+3]=255,d+=1}return performance.now()-a<100&&cs(l,5)[4]<1&&(l=us(l,2)),l}function us(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function cs(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function Sr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const pn=4,at={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},fs=[at.magenta,at.green],hs=[at.red,at.green,at.blue],Ei=Object.values(at).slice(0,-2);function ds(t){let e;return t<=pn?e=Array(t).fill(!0):e=[...Array(pn).fill(!0),...Array(t-pn).fill(!1)],e}function _s(t,e){let n=[];if(t==1)n=[at.white];else if(t==2)n=fs;else if(t===3)n=hs;else if(t<=pn)n=Ei.slice(0,t);else{n=Array(t).fill(at.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=Ei[r]}return n.map(Ar)}function Ar(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class Ir{constructor(){this.store=Un({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await Cr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=xt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class gs extends Ir{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await Cr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Tr=new Ir,Or=new gs,Ci=5;async function Kt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await Kt(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await Kt(s)}}class ms{constructor(e="index",n=!0){this.store=Un([]),this.selectedRow=Un(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,o=r.plate_count||0,a=r.bytes||0;for(let l of r.child_csv)s+=l.image_count||0,o+=l.plate_count||0,a+=l.bytes||0;return{...r,image_count:s,plate_count:o,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let o;for(let a of this.csvFiles){if(a.url===e){o=a;break}for(let l of a.child_csv){if(l.url===e){o=l;break}for(let d of l.child_csv)if(d.url===e){o=d;break}}}o?(o.image_count=i,o.plate_count=r,o.bytes=s,o.child_csv=n):(o={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(o))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,d)=>r["size_"+l]=o[d]),r.dim_count=o.reduce((l,d)=>l+(d>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);Tr.addTerms(n);let i=e.map(r=>r.fbbiId);Or.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var p;const[n,i,r]=await Kt(e);let s=[],o=0,a=0,l=!1,d=!0,f={multiscales:n},_=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const g=(p=n[0])==null?void 0:p.datasets[0],m=g==null?void 0:g.path;if(m){const E=await fetch(`${i}/${m}/zarr.json`).then(P=>P.json()).catch(P=>{console.log(`----> Failed to parse ${i}/${m}/zarr.json`,P)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:_,shape:s,well_count:o,field_count:a,load_failed:l,loaded:d})}async loadRocrateJsonAllRows(){let e=xt(this.store);for(let n=0;n<e.length;n=n+Ci){let i=ls(n,Math.min(n+Ci,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=xt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return xt(this.store)}getRow(e){return xt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Se=new ms;function ps(t){let e,n,i,r,s,o;return{c(){e=k("button"),n=k("span"),n.textContent="^",i=j(),r=k("span"),r.textContent="^",v(n,"class","acc svelte-17vd65t"),It(n,"strong",t[1]),v(r,"class","dec svelte-17vd65t"),It(r,"strong",!t[1]),v(e,"class","svelte-17vd65t")},m(a,l){J(a,e,l),h(e,n),h(e,i),h(e,r),s||(o=be(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&It(n,"strong",a[1]),l&2&&It(r,"strong",!a[1])},i:ye,o:ye,d(a){a&&K(e),s=!1,o()}}}function vs(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class bs extends Ye{constructor(e){super(),Ze(this,e,vs,ps,xe,{toggleAscending:0,sortAscending:1})}}const gn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},rt={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Bt={OBSERVED:0,REQUESTED:1},ys={[rt.VERTICAL]:"top",[rt.HORIZONTAL]:"left"},Si={[rt.VERTICAL]:"scrollTop",[rt.HORIZONTAL]:"scrollLeft"};class ws{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=gn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case gn.END:l=a;break;case gn.CENTER:l=o-(n-s.size)/2;break;case gn.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const d=this.getTotalSize();return Math.max(0,Math.min(d-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const ks=t=>({}),Ai=t=>({});function Ii(t,e,n){const i=t.slice();return i[37]=e[n],i}const Es=t=>({style:t[0]&4,index:t[0]&4}),Ti=t=>({style:t[37].style,index:t[37].index}),Cs=t=>({}),Oi=t=>({});function Ri(t,e){let n,i;const r=e[21].item,s=Ln(r,e,e[20],Ti);return{key:t,first:null,c(){n=kn(),s&&s.c(),this.first=n},m(o,a){J(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&Dn(s,r,e,e[20],i?Fn(r,e[20],a,Es):Nn(e[20]),Ti)},i(o){i||(se(s,o),i=!0)},o(o){fe(s,o),i=!1},d(o){o&&K(n),s&&s.d(o)}}}function Ss(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,d=Ln(l,t,t[20],Oi);let f=Ue(t[2]);const _=m=>m[0]?m[0](m[37].index):m[37].index;for(let m=0;m<f.length;m+=1){let E=Ii(t,f,m),P=_(E);s.set(P,r[m]=Ri(P,E))}const p=t[21].footer,g=Ln(p,t,t[20],Ai);return{c(){e=k("div"),d&&d.c(),n=j(),i=k("div");for(let m=0;m<r.length;m+=1)r[m].c();o=j(),g&&g.c(),v(i,"class","virtual-list-inner svelte-dwpad5"),v(i,"style",t[4]),v(e,"class","virtual-list-wrapper svelte-dwpad5"),v(e,"style",t[3])},m(m,E){J(m,e,E),d&&d.m(e,null),h(e,n),h(e,i);for(let P=0;P<r.length;P+=1)r[P]&&r[P].m(i,null);h(e,o),g&&g.m(e,null),t[22](e),a=!0},p(m,E){d&&d.p&&(!a||E[0]&1048576)&&Dn(d,l,m,m[20],a?Fn(l,m[20],E,Cs):Nn(m[20]),Oi),E[0]&1048581&&(f=Ue(m[2]),Ft(),r=wr(r,E,_,1,m,f,s,i,Qr,Ri,null,Ii),Dt()),(!a||E[0]&16)&&v(i,"style",m[4]),g&&g.p&&(!a||E[0]&1048576)&&Dn(g,p,m,m[20],a?Fn(p,m[20],E,ks):Nn(m[20]),Ai),(!a||E[0]&8)&&v(e,"style",m[3])},i(m){if(!a){se(d,m);for(let E=0;E<f.length;E+=1)se(r[E]);se(g,m),a=!0}},o(m){fe(d,m);for(let E=0;E<r.length;E+=1)fe(r[E]);fe(g,m),a=!1},d(m){m&&K(e),d&&d.d(m);for(let E=0;E<r.length;E+=1)r[E].d();g&&g.d(m),t[22](null)}}}const As=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Is(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:d=null}=e,{stickyIndices:f=null}=e,{getKey:_=null}=e,{scrollDirection:p=rt.VERTICAL}=e,{scrollOffset:g=null}=e,{scrollToIndex:m=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:P="instant"}=e,{overscanCount:N=3}=e;const M=Hr(),V=new ws({itemCount:a,itemSize:l,estimatedItemSize:te()});let Q=!1,G,Y=[],R={offset:g||m!=null&&Y.length&&S(m)||0,scrollChangeReason:Bt.REQUESTED},c=R,u={scrollToIndex:m,scrollToAlignment:E,scrollOffset:g,itemCount:a,itemSize:l,estimatedItemSize:d},w={},I="",C="";ee(),on(()=>{n(18,Q=!0),G.addEventListener("scroll",T,As),g!=null?U(g):m!=null&&U(S(m))}),Jn(()=>{Q&&G.removeEventListener("scroll",T)});function z(){if(!Q)return;const y=u.scrollToIndex!==m||u.scrollToAlignment!==E,F=u.itemCount!==a||u.itemSize!==l||u.estimatedItemSize!==d;F&&(V.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:te()}),b()),u.scrollOffset!==g?n(19,R={offset:g||0,scrollChangeReason:Bt.REQUESTED}):typeof m=="number"&&(y||F)&&n(19,R={offset:S(m,E,a),scrollChangeReason:Bt.REQUESTED}),u={scrollToIndex:m,scrollToAlignment:E,scrollOffset:g,itemCount:a,itemSize:l,estimatedItemSize:d}}function x(){if(!Q)return;const{offset:y,scrollChangeReason:F}=R;(c.offset!==y||c.scrollChangeReason!==F)&&ee(),c.offset!==y&&F===Bt.REQUESTED&&U(y),c=R}function ee(){const{offset:y}=R,{start:F,stop:B}=V.getVisibleRange({containerSize:p===rt.VERTICAL?s:o,offset:y,overscanCount:N});let ne=[];const ie=V.getTotalSize();p===rt.VERTICAL?(n(3,I=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,C=`flex-direction:column;height:${ie}px;`)):(n(3,I=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,C=`min-height:100%;width:${ie}px;`));const D=f!=null&&f.length!==0;if(D)for(let Z=0;Z<f.length;Z++){const ae=f[Z];ne.push({index:ae,style:O(ae,!0)})}if(F!==void 0&&B!==void 0){for(let Z=F;Z<=B;Z++)D&&f.includes(Z)||ne.push({index:Z,style:O(Z,!1)});M("itemsUpdated",{start:F,end:B})}n(2,Y=ne)}function U(y){"scroll"in G?G.scroll({[ys[p]]:y,behavior:P}):n(1,G[Si[p]]=y,G)}function b(y=0){w={},V.resetItem(y),ee()}function S(y,F=E,B=a){return(y<0||y>=B)&&(y=0),V.getUpdatedOffsetForIndex({align:F,containerSize:p===rt.VERTICAL?s:o,currentOffset:R.offset||0,targetIndex:y})}function T(y){const F=L();F<0||R.offset===F||y.target!==G||(n(19,R={offset:F,scrollChangeReason:Bt.OBSERVED}),M("afterScroll",{offset:F,event:y}))}function L(){return G[Si[p]]}function te(){return d||typeof l=="number"&&l||50}function O(y,F){if(w[y])return w[y];const{size:B,offset:ne}=V.getSizeAndPositionForIndex(y);let ie;return p===rt.VERTICAL?(ie=`left:0;width:100%;height:${B}px;`,F?ie+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ne}px;margin-bottom:${-(ne+B)}px;`:ie+=`position:absolute;top:${ne}px;`):(ie=`top:0;width:${B}px;`,F?ie+=`position:sticky;z-index:1;left:0;margin-left:${ne}px;margin-right:${-(ne+B)}px;`:ie+=`position:absolute;height:100%;left:${ne}px;`),w[y]=ie}function W(y){Mt[y?"unshift":"push"](()=>{G=y,n(1,G)})}return t.$$set=y=>{"height"in y&&n(5,s=y.height),"width"in y&&n(6,o=y.width),"itemCount"in y&&n(7,a=y.itemCount),"itemSize"in y&&n(8,l=y.itemSize),"estimatedItemSize"in y&&n(9,d=y.estimatedItemSize),"stickyIndices"in y&&n(10,f=y.stickyIndices),"getKey"in y&&n(0,_=y.getKey),"scrollDirection"in y&&n(11,p=y.scrollDirection),"scrollOffset"in y&&n(12,g=y.scrollOffset),"scrollToIndex"in y&&n(13,m=y.scrollToIndex),"scrollToAlignment"in y&&n(14,E=y.scrollToAlignment),"scrollToBehaviour"in y&&n(15,P=y.scrollToBehaviour),"overscanCount"in y&&n(16,N=y.overscanCount),"$$scope"in y&&n(20,r=y.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&z(),t.$$.dirty[0]&524288&&x(),t.$$.dirty[0]&263264&&Q&&b(0)},[_,G,Y,I,C,s,o,a,l,d,f,p,g,m,E,P,N,b,Q,R,r,i,W]}class Ts extends Ye{constructor(e){super(),Ze(this,e,Is,Ss,xe,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Pe()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Pe()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Pe()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Pe()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Pe()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Pe()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Pe()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Pe()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Pe()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Pe()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Pe()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Pe()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Pe()}get recomputeSizes(){return this.$$.ctx[17]}}class ln extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Zn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const Os="modulepreload",Rs=function(t){return"https://will-moore.github.io/ome2024-ngff-challenge/"+t},zi={},jt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Rs(a),a in zi)return;zi[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Os,l||(f.as="script"),f.crossOrigin="",f.href=a,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((_,p)=>{f.addEventListener("load",_),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var He;class Rr{constructor(e,n,i){Te(this,He);typeof e=="number"?ke(this,He,new Uint8Array(e)):e instanceof ArrayBuffer?ke(this,He,new Uint8Array(e,n,i)):ke(this,He,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return $(this,He).byteOffset}get byteLength(){return $(this,He).byteLength}get buffer(){return $(this,He).buffer}get length(){return $(this,He).length}get(e){let n=$(this,He)[e];return typeof n=="number"?n!==0:n}set(e,n){$(this,He)[e]=n?1:0}fill(e){$(this,He).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}He=new WeakMap;var Rt;class Yn{constructor(e,n,i,r){oe(this,"_data");oe(this,"chars");Te(this,Rt);if(this.chars=e,ke(this,Rt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set($(this,Rt).encode(n))}fill(e){const n=$(this,Rt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Rt=new WeakMap;var ze;const ni=class ni{constructor(e,n,i,r){Te(this,ze);oe(this,"chars");if(this.chars=e,typeof n=="number")ke(this,ze,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),ke(this,ze,new Int32Array(n,i,r));else{const s=n,o=new ni(e,1);ke(this,ze,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*$(o,ze)}()))}}get BYTES_PER_ELEMENT(){return $(this,ze).BYTES_PER_ELEMENT*this.chars}get byteLength(){return $(this,ze).byteLength}get byteOffset(){return $(this,ze).byteOffset}get buffer(){return $(this,ze).buffer}get length(){return $(this,ze).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint($(this,ze)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=$(this,ze).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=$(this,ze).subarray(0,this.chars);for(let i=1;i<this.length;i++)$(this,ze).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};ze=new WeakMap;let Gt=ni;function an(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Mi(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const zs={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Rr},Ms=/v2:([US])(\d+)/;function zr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Ms);if(e){let[,i,r]=e;return(i==="U"?Gt:Yn).bind(null,Number(r))}let n=zs[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function mt(t,e){return(e==="C"?Ls:Fs)(t)}function Ls(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Fs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Ds({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Bn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Ns=/^([<|>])(.*)$/;function Ps(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Ns);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Us(t,e={}){let n=[],i=Ps(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function qs(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Bs(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function js(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Mr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Li=xs();function xs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Fi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Jt,lt,Zt,Yt,zt;const ii=class ii{constructor(e,n){oe(this,"kind","array_to_bytes");Te(this,Jt);Te(this,lt);Te(this,Zt);Te(this,Yt);Te(this,zt);ke(this,zt,e==null?void 0:e.endian),ke(this,lt,zr(n.data_type)),ke(this,Yt,n.shape),ke(this,Jt,mt(n.shape,Bn(n.codecs)));const i=new($(this,lt))(0);ke(this,Zt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new ii(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Li&&$(this,zt)==="big"&&Mi(n,Fi($(this,lt))),n}decode(e){return Li&&$(this,zt)==="big"&&Mi(e,Fi($(this,lt))),{data:new($(this,lt))(e.buffer,e.byteOffset,e.byteLength/$(this,Zt)),shape:$(this,Yt),stride:$(this,Jt)}}};Jt=new WeakMap,lt=new WeakMap,Zt=new WeakMap,Yt=new WeakMap,zt=new WeakMap;let yn=ii;class Qn{constructor(){oe(this,"kind","bytes_to_bytes")}static fromConfig(){return new Qn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Vs(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function Ws(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Qt,Xt;const ri=class ri{constructor(e={}){oe(this,"configuration");oe(this,"kind","array_to_bytes");Te(this,Qt);Te(this,Xt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:d=!0}=e;let f=e.separators;f||(l?f=[", ",": "]:f=[",",":"]),ke(this,Qt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:f,sort_keys:a}),ke(this,Xt,{strict:d})}static fromConfig(e){return new ri(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=$(this,Qt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Vs),a&&l.push(Ws);const d=Array.from(e.data);d.push("|O"),d.push(e.shape);let f;l.length&&(f=(p,g)=>{let m=g;for(let E of l)m=E(p,m);return m});let _=JSON.stringify(d,f,n);return r&&(_=_.replace(/[\u007F-\uFFFF]/g,p=>{const g=`0000${p.charCodeAt(0).toString(16)}`;return`\\u${g.substring(g.length-4)}`})),new TextEncoder().encode(_)}decode(e){const{strict:n}=$(this,Xt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=an(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=mt(r,"C");return{data:i,shape:r,stride:s}}};Qt=new WeakMap,Xt=new WeakMap;let jn=ri;function Di(t){return t instanceof Rr||t instanceof Yn||t instanceof Gt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Hs(t,e){let n;return t.data instanceof Yn||t.data instanceof Gt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:mt(t.shape,e)}}function Ks(t,e){let n=Hs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Di(t.data),a=Di(n.data);for(let l=0;l<r;l++){let d=0;for(let f=0;f<i;f++)d+=s[f]*n.stride[f];a[d]=o[l],s[0]+=1;for(let f=0;f<i;f++)if(s[f]===t.shape[f]){if(f+1===i)break;s[f]=0,s[f+1]+=1}}return n}function Gs(t){if(!t.stride)return"C";let e=mt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Xn{constructor(e){oe(this,"configuration");oe(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Xn(e)}encode(e){var n,i;return Gs(e)===((n=this.configuration)==null?void 0:n.order)?e:Ks(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var $t,en;const si=class si{constructor(e){oe(this,"kind","array_to_bytes");Te(this,$t);Te(this,en);ke(this,$t,e),ke(this,en,mt(e,"C"))}static fromConfig(e,n){return new si(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:$(this,$t),stride:$(this,en)}}};$t=new WeakMap,en=new WeakMap;let xn=si;function Js(){return new Map().set("blosc",()=>jt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>jt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>jt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>jt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>jt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Xn).set("bytes",()=>yn).set("crc32c",()=>Qn).set("vlen-utf8",()=>xn).set("json2",()=>jn)}const Zs=Js();function Vn(t){let e;return{async encode(n){e||(e=await Ni(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Ni(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Ni(t){let e=t.codecs.map(async s=>{var a;let o=await((a=Zs.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!Ys(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=yn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Ys(t){return t.data_type!=="v2:object"}const Pi=18446744073709551615n;function Qs(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,d)=>l/i.chunk_shape[d]),o=Vn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let d=l.map((M,V)=>Math.floor(M/s[V])),f=t.resolve(n(d)).path,_;if(f in a)_=a[f];else{let M=4,V=16*s.reduce((G,Y)=>G*Y,1),Q=await r(f,{suffixLength:V+M});_=a[f]=Q?await o.decode(Q):null}if(_===null)return;let{data:p,shape:g,stride:m}=_,E=l.map((M,V)=>M%g[V]).reduce((M,V,Q)=>M+V*m[Q],0),P=p[E],N=p[E+1];if(!(P===Pi&&N===Pi))return r(f,{offset:Number(P),length:Number(N)})}}class Nt{constructor(e,n="/"){oe(this,"store");oe(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Nt(this.store,new URL(e,n).pathname)}}var tn;class $n extends Nt{constructor(n,i,r){super(n,i);oe(this,"kind","group");Te(this,tn);ke(this,tn,r)}get attrs(){return $(this,tn).attributes}}tn=new WeakMap;const Vt=Symbol("zarrita.context");function Xs(t){return t[Vt]}function $s(t,e){let{configuration:n}=e.codecs.find(js)??{},i={encode_chunk_key:Ds(e.chunk_key_encoding),TypedArray:zr(e.data_type),fill_value:e.fill_value};if(n){let s=Bn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Vn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return mt(o,a??s)},get_chunk_bytes:Qs(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Bn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Vn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return mt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var mr,pr,gt,vr;let wn=(vr=class extends(pr=Nt,mr=Vt,pr){constructor(n,i,r){super(n,i);oe(this,"kind","array");Te(this,gt);oe(this,mr);ke(this,gt,{...r,fill_value:Mr(r)}),this[Vt]=$s(this,r)}get attrs(){return $(this,gt).attributes}get shape(){return $(this,gt).shape}get chunks(){return this[Vt].chunk_shape}get dtype(){return $(this,gt).data_type}async getChunk(n,i){let r=this[Vt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,d)=>l*d,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Bs(this.dtype,n)}},gt=new WeakMap,vr),En=eo();function eo(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function to(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?an(e):{}}async function no(t,e={}){let n="store"in t?t:new Nt(t),i={};return(e.attrs??!0)&&(i=await to(n)),e.kind==="array"?Ui(n,i):e.kind==="group"?qi(n,i):Ui(n,i).catch(r=>{if(r instanceof ln)return qi(n,i);throw r})}async function Ui(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new ln("v2 array",{cause:new Zn(n)});return En.increment(t.store,"v2"),new wn(t.store,t.path,Us(an(i),e))}async function qi(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new ln("v2 group",{cause:new Zn(n)});return En.increment(t.store,"v2"),new $n(t.store,t.path,qs(an(i),e))}async function io(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new ln("v3 array or group",{cause:new Zn(n)});let r=an(i);return r.node_type==="array"&&(r.fill_value=Mr(r)),r.node_type==="array"?new wn(e,t.path,r):new $n(e,t.path,r)}async function ro(t,e={}){let n="store"in t?t:new Nt(t),i=await io(n);if(En.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof wn||e.kind==="group"&&i instanceof $n)return i;let r=i instanceof wn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function _t(t,e={}){let n="store"in t?t.store:t,i=En.version_max(n),r=i==="v2"?_t.v2:_t.v3,s=i==="v2"?_t.v3:_t.v2;return r(t,e).catch(o=>{if(o instanceof ln)return s(t,e);throw o})}_t.v2=no;_t.v3=ro;function*so(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*oo(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function lo({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Wn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function ao(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class ei extends Error{constructor(e){super(e),this.name="IndexError"}}function uo(t,e){throw new ei(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function co(t){throw new ei(`index out of bounds for dimension with length ${t}`)}function fo(){throw new ei("only slices with step >= 1 are supported")}function ho(t,e){t.length>e.length&&uo(t,e)}function _o(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&co(e),t}class go{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"dim_sel");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");e=_o(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Bi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"start");oe(this,"stop");oe(this,"step");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");oe(this,"nchunks");const[r,s,o]=lo(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&fo(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of so(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const g=(r-this.start)%this.step;g&&(l+=this.step-g),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const d=this.stop>s?o:this.stop-r,f=[l,d,this.step],_=Math.ceil((d-l)/this.step),p=[a,a+_,1];yield{dim_chunk_ix:i,dim_chunk_sel:f,dim_out_sel:p}}}}function mo(t,e){let n=[];return t===null?n=e.map(i=>Wn(null)):Array.isArray(t)&&(n=t.map(i=>i??Wn(null))),ho(n,e),n}class po{constructor({selection:e,shape:n,chunk_shape:i}){oe(this,"dim_indexers");oe(this,"shape");this.dim_indexers=mo(e,n).map((r,s)=>new(typeof r=="number"?go:Bi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Bi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of oo(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function vo(t,e){return"get"in t?t.get(e):t[e]}async function bo(t,e,n,i){var l;let r=Xs(t),s=new po({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((d,f)=>d*f,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??ao();for(const{chunk_coords:d,mapping:f}of s)a.add(async()=>{let{data:_,shape:p,stride:g}=await t.getChunk(d,n.opts),m=i.prepare(_,p,g);i.set_from_chunk(o,m,f)});return await a.onIdle(),s.shape.length===0?vo(o.data,0):o}function ti(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return ti(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function zn(t){return globalThis.Array.isArray(t.data)?{data:ti(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function yo(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function wo(t,e){if(globalThis.Array.isArray(t.data))return ti([e]);let n=yo(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const ko={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=zn(t);Hn(i,e,wo(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=zn(t);vn(i,zn(e),i.bytes_per_element,n)}};async function Eo(t,e=null,n={}){return bo(t,e,n,ko)}function Lr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Hn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const p=t.data.subarray(o*r*i);Hn({data:p,stride:a},s,n,i);return}const[l,d,f]=r,_=Lr(l,d,f);if(s.length===0){for(let p=0;p<_;p++)t.data.set(n,o*(l+f*p)*i);return}for(let p=0;p<_;p++){const g=t.data.subarray(o*(l+f*p)*i);Hn({data:g,stride:a},s,n,i)}}function vn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...d]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}vn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let N=r.from*n;t.data.set(e.data.subarray(N,N+n),0);return}vn(t,{data:e.data.subarray(l*r.from*n),stride:d},n,s);return}const[f,_,p]=r.to,[g,m,E]=r.from,P=Lr(f,_,p);if(s.length===0){if(p===1&&E===1&&o===1&&l===1){let N=g*n,M=P*n;t.data.set(e.data.subarray(N,N+M),f*n);return}for(let N=0;N<P;N++){let M=l*(g+E*N)*n;t.data.set(e.data.subarray(M,M+n),o*(f+p*N)*n)}return}for(let N=0;N<P;N++)vn({data:t.data.subarray(o*(f+N*p)*n),stride:a},{data:e.data.subarray(l*(g+N*E)*n),stride:d},n,s)}function Fr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function Co(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function ji(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function xi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function So(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Fr(t,o-e,o,n)}var nn,rn,sn,Kn;class Ao{constructor(e,n={}){Te(this,sn);oe(this,"url");Te(this,nn);Te(this,rn);this.url=e,ke(this,nn,n.overrides??{}),ke(this,rn,n.useSuffixRequest??!1)}async get(e,n={}){let i=ji(this.url,e).href,r=await fetch(i,On(this,sn,Kn).call(this,n));return xi(r)}async getRange(e,n,i={}){let r=ji(this.url,e),s=On(this,sn,Kn).call(this,i),o;return"suffixLength"in n?o=await So(r,n.suffixLength,s,$(this,rn)):o=await Fr(r,n.offset,n.length,s),xi(o)}}nn=new WeakMap,rn=new WeakMap,sn=new WeakSet,Kn=function(e){return Co($(this,nn),e)};function Io(t){let e,n;return{c(){e=k("div"),n=k("canvas"),le(n,"width",t[3]+"px"),le(n,"height",t[4]+"px"),le(n,"background-color","lightgrey"),v(n,"height",t[2]),v(n,"width",t[1]),v(n,"class","svelte-lwhhyg"),v(e,"class","canvasWrapper svelte-lwhhyg"),le(e,"width",t[3]+"px"),le(e,"height",t[4]+"px"),It(e,"spinner",t[5])},m(i,r){J(i,e,r),h(e,n),t[12](n)},p(i,[r]){r&8&&le(n,"width",i[3]+"px"),r&16&&le(n,"height",i[4]+"px"),r&4&&v(n,"height",i[2]),r&2&&v(n,"width",i[1]),r&8&&le(e,"width",i[3]+"px"),r&16&&le(e,"height",i[4]+"px"),r&32&&It(e,"spinner",i[5])},i:ye,o:ye,d(i){i&&K(e),t[12](null)}}}function To(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,d,f=a,_=a;o>1?_=f/o:o<1&&(f=_*o);let p=f,g=_,m=!0;const E=new AbortController;async function P(){var T;let M=r.multiscales[0].datasets.map(L=>L.path),V=r.multiscales[0].axes.map(L=>L.name),Q=M.at(-1);s!=null&&s<M.length&&(Q=M[s]);const G=new Ao(i+"/"+Q),Y=await _t.v3(G,{kind:"array"});let R=V.indexOf("c"),c=Y.shape;if(c.at(-1)*c.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",c,i);return}let u=c.length,w=c[R]||1,I,C;(T=r==null?void 0:r.omero)!=null&&T.channels?(I=r.omero.channels.map(L=>L.active),C=r.omero.channels.map(L=>Ar(L.color))):(I=ds(w),C=_s(w,I)),C=C.filter((L,te)=>I[te]);let x=I.reduce((L,te,O)=>(te&&L.push(O),L),[]).map(L=>{let te=c.map((O,W)=>W==R?L:W>=u-2?Wn(0,O):V[W]=="z"||V[W]=="t"?parseInt(O/2+""):0);return Eo(Y,te,{opts:{signal:E.signal}})}),ee=await Promise.all(x),U=ee.map(L=>Sr(L)),b=as(ee,U,C);n(1,f=c.at(-1)),n(2,_=c.at(-2));let S=f/a;_>f&&(S=_/a),n(3,p=f/S),n(4,g=_/S),setTimeout(()=>{const L=d.getContext("2d");n(5,m=!1),L.putImageData(new ImageData(b,f,_),0,0)},100)}on(()=>{P()}),Jn(()=>{E.abort()});function N(M){Mt[M?"unshift":"push"](()=>{d=M,n(0,d)})}return t.$$set=M=>{"source"in M&&n(6,i=M.source),"attrs"in M&&n(7,r=M.attrs),"thumbDatasetIndex"in M&&n(8,s=M.thumbDatasetIndex),"thumbAspectRatio"in M&&n(9,o=M.thumbAspectRatio),"cssSize"in M&&n(10,a=M.cssSize),"max_size"in M&&n(11,l=M.max_size)},[d,f,_,p,g,m,i,r,s,o,a,l,N]}class Dr extends Ye{constructor(e){super(),Ze(this,e,To,Io,xe,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function Vi(t,e,n){const i=t.slice();return i[11]=e[n],i}function Wi(t){let e,n;return e=new Dr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function Hi(t){let e,n,i,r,s,o,a,l=t[0].source+"",d,f,_=t[0].csv&&Ki(t);return{c(){e=k("div"),n=k("span"),n.textContent="Data",i=j(),_&&_.c(),r=j(),s=k("span"),s.textContent="provided by",o=j(),a=k("strong"),d=q(l),f=q("."),v(n,"class","hideOnSmall svelte-afrxqy"),v(s,"class","hideOnSmall svelte-afrxqy"),le(a,"color","grey")},m(p,g){J(p,e,g),h(e,n),h(e,i),_&&_.m(e,null),h(e,r),h(e,s),h(e,o),h(e,a),h(a,d),h(e,f)},p(p,g){p[0].csv?_?_.p(p,g):(_=Ki(p),_.c(),_.m(e,r)):_&&(_.d(1),_=null),g&1&&l!==(l=p[0].source+"")&&pe(d,l)},d(p){p&&K(e),_&&_.d()}}}function Ki(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,o;return{c(){e=k("span"),e.textContent="from collection",n=j(),i=k("a"),s=q(r),v(e,"class","hideOnSmall svelte-afrxqy"),v(i,"title","Show collection in a new tab"),v(i,"href",o=Yi(t[0])),v(i,"target","_blank")},m(l,d){J(l,e,d),J(l,n,d),J(l,i,d),h(i,s)},p(l,d){var f;d&1&&r!==(r=((f=l[0].csv)==null?void 0:f.split("/").pop().replace(".csv",""))+"")&&pe(s,r),d&1&&o!==(o=Yi(l[0]))&&v(i,"href",o)},d(l){l&&(K(e),K(n),K(i))}}}function Gi(t){let e,n,i,r,s,o;return{c(){e=q("Browse "),n=k("a"),i=q("Original data"),o=q("."),v(n,"title",r="Link to original data: "+t[0].origin),v(n,"href",s=t[0].origin),v(n,"target","_blank")},m(a,l){J(a,e,l),J(a,n,l),h(n,i),J(a,o,l)},p(a,l){l&1&&r!==(r="Link to original data: "+a[0].origin)&&v(n,"title",r),l&1&&s!==(s=a[0].origin)&&v(n,"href",s)},d(a){a&&(K(e),K(n),K(o))}}}function Ji(t){let e=t[11].toUpperCase()+"",n,i,r=t[0][`size_${t[11]}`]+"",s,o;return{c(){n=q(e),i=q(":"),s=q(r),o=q("  ")},m(a,l){J(a,n,l),J(a,i,l),J(a,s,l),J(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[11]}`]+"")&&pe(s,r)},d(a){a&&(K(n),K(i),K(s),K(o))}}}function Zi(t){let e,n=t[0][`size_${t[11]}`]!==void 0&&Ji(t);return{c(){n&&n.c(),e=kn()},m(i,r){n&&n.m(i,r),J(i,e,r)},p(i,r){i[0][`size_${i[11]}`]!==void 0?n?n.p(i,r):(n=Ji(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&K(e),n&&n.d(i)}}}function Oo(t){let e,n,i=Lt(t[0].written)+"",r;return{c(){e=k("div"),n=q("Data size: "),r=q(i)},m(s,o){J(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=Lt(s[0].written)+"")&&pe(r,i)},d(s){s&&K(e)}}}function Ro(t){let e,n,i=t[0].shards+"",r;return{c(){e=k("div"),n=q("Shard shape: "),r=q(i)},m(s,o){J(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&pe(r,i)},d(s){s&&K(e)}}}function zo(t){let e,n,i=t[0].chunks+"",r;return{c(){e=k("div"),n=q("Chunk shape: "),r=q(i)},m(s,o){J(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&pe(r,i)},d(s){s&&K(e)}}}function Mo(t){let e,n,i,r,s,o,a=Qi(t[0].url)+"",l,d,f,_=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",p,g,m,E=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",P,N,M,V,Q,G,Y,R,c,u,w,I,C,z,x,ee,U=t[3]&&Wi(t),b=t[0].source&&Hi(t),S=t[0].origin&&Gi(t),T=Ue(["t","c","z","y","x"]),L=[];for(let y=0;y<5;y+=1)L[y]=Zi(Vi(t,T,y));function te(y,F){return y[2]=="chunk_pixels"?zo:y[2]=="shard_pixels"?Ro:Oo}let O=te(t),W=O(t);return{c(){e=k("div"),n=k("div"),U&&U.c(),i=j(),r=k("div"),s=k("div"),o=k("strong"),l=q(a),d=j(),f=k("div"),g=j(),m=k("div"),P=j(),b&&b.c(),N=j(),M=k("div"),V=q("Open in "),Q=k("a"),G=q("OME-Validator."),c=j(),S&&S.c(),u=j(),w=k("div"),I=q(`Image size:
      `);for(let y=0;y<5;y+=1)L[y].c();C=j(),W.c(),v(n,"class","thumbWrapper svelte-afrxqy"),v(f,"class",p=yi(t[1]==""?"hideOnSmall":"")+" svelte-afrxqy"),v(Q,"title",Y="Open in Validator: "+t[0].url),v(Q,"href",R="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),v(Q,"target","_blank"),v(e,"class","zarr-list-item svelte-afrxqy")},m(y,F){J(y,e,F),h(e,n),U&&U.m(n,null),h(e,i),h(e,r),h(r,s),h(s,o),h(o,l),h(r,d),h(r,f),f.innerHTML=_,h(r,g),h(r,m),m.innerHTML=E,h(r,P),b&&b.m(r,null),h(r,N),h(r,M),h(M,V),h(M,Q),h(Q,G),h(M,c),S&&S.m(M,null),h(r,u),h(r,w),h(w,I);for(let B=0;B<5;B+=1)L[B]&&L[B].m(w,null);h(r,C),W.m(r,null),z=!0,x||(ee=be(n,"click",t[8]),x=!0)},p(y,[F]){if(y[3]?U?(U.p(y,F),F&8&&se(U,1)):(U=Wi(y),U.c(),se(U,1),U.m(n,null)):U&&(Ft(),fe(U,1,1,()=>{U=null}),Dt()),(!z||F&1)&&a!==(a=Qi(y[0].url)+"")&&pe(l,a),(!z||F&3)&&_!==(_=(y[0].name?y[0].name.replaceAll(y[1],`<mark>${y[1]}</mark>`):"")+"")&&(f.innerHTML=_),(!z||F&2&&p!==(p=yi(y[1]==""?"hideOnSmall":"")+" svelte-afrxqy"))&&v(f,"class",p),(!z||F&130)&&E!==(E=y[7].replaceAll(y[1],`<mark>${y[1]}</mark>`)+"")&&(m.innerHTML=E),y[0].source?b?b.p(y,F):(b=Hi(y),b.c(),b.m(r,N)):b&&(b.d(1),b=null),(!z||F&1&&Y!==(Y="Open in Validator: "+y[0].url))&&v(Q,"title",Y),(!z||F&1&&R!==(R="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+y[0].url))&&v(Q,"href",R),y[0].origin?S?S.p(y,F):(S=Gi(y),S.c(),S.m(M,null)):S&&(S.d(1),S=null),F&1){T=Ue(["t","c","z","y","x"]);let B;for(B=0;B<5;B+=1){const ne=Vi(y,T,B);L[B]?L[B].p(ne,F):(L[B]=Zi(ne),L[B].c(),L[B].m(w,null))}for(;B<5;B+=1)L[B].d(1)}O===(O=te(y))&&W?W.p(y,F):(W.d(1),W=O(y),W&&(W.c(),W.m(r,null)))},i(y){z||(se(U),z=!0)},o(y){fe(U),z=!1},d(y){y&&K(e),U&&U.d(),b&&b.d(),S&&S.d(),Tt(L,y),W.d(),x=!1,ee()}}}function Yi(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Qi(t){return t.split("/").pop()}function Lo(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,d,f=1;const _=new AbortController;if(r.size_x&&r.size_y){let g=Math.max(r.size_x,r.size_y);for(d=0;g>256;)d+=1,g=g/2;f=r.size_x/r.size_y}function p(){console.log("Clicked on thumbnail"),Se.setSelectedRow(r)}return on(async()=>{let g=r.url;r.series0!==void 0&&(g+="/"+r.series0);let m=await Kt(g,_.signal);n(3,a=m[0]),n(4,l=m[1]),m[2]}),Jn(()=>{_.abort()}),t.$$set=g=>{"rowData"in g&&n(0,r=g.rowData),"textFilter"in g&&n(1,s=g.textFilter),"sortedBy"in g&&n(2,o=g.sortedBy)},t.$$.update=()=>{var g;t.$$.dirty&3&&n(7,i=s!=""&&((g=r.description)!=null&&g.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,d,f,i,p]}class Fo extends Ye{constructor(e){super(),Ze(this,e,Lo,Mo,xe,{rowData:0,textFilter:1,sortedBy:2})}}function Do(t){let e,n,i,r;return n=new Fo({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=k("div"),Je(n.$$.fragment),v(e,"slot","item"),v(e,"style",i=t[12]),v(e,"class","row svelte-1xvcjxw")},m(s,o){J(s,e,o),Ke(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&v(e,"style",i)},i(s){r||(se(n.$$.fragment,s),r=!0)},o(s){fe(n.$$.fragment,s),r=!1},d(s){s&&K(e),Ge(n)}}}function No(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,d;return st(t[8]),st(t[9]),s=new Ts({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Do,({style:f,index:_})=>({12:f,13:_}),({style:f,index:_})=>(f?4096:0)|(_?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=k("div"),Je(s.$$.fragment),v(r,"class","imageListContainer svelte-1xvcjxw"),le(r,"height",o)},m(f,_){J(f,r,_),Ke(s,r,null),t[10](r),a=!0,l||(d=[be(window,"resize",t[8]),be(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(f,[_]){_&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,f[4]),i=setTimeout(n,100));const p={};_&32&&(p.height=f[5]),_&1&&(p.itemCount=f[0].length),_&28679&&(p.$$scope={dirty:_,ctx:f}),s.$set(p),_&32&&o!==(o=`${f[5]}px`)&&le(r,"height",o)},i(f){a||(se(s.$$.fragment,f),a=!0)},o(f){fe(s.$$.fragment,f),a=!1},d(f){f&&K(r),Ge(s),t[10](null),l=!1,nt(d)}}}function Po(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(E){return r[E].url}let l,d=0,f=0;function _(E){let N=l.offsetTop-20;E.detail.offset-f<0&&d>N&&n(4,d-=1),f=E.detail.offset}function p(){n(5,i=window.innerHeight)}function g(){n(4,d=window.pageYOffset)}function m(E){Mt[E?"unshift":"push"](()=>{l=E,n(3,l)})}return t.$$set=E=>{"tableRows"in E&&n(0,r=E.tableRows),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},n(5,i=0),[r,s,o,l,d,i,a,_,p,g,m]}class Uo extends Ye{constructor(e){super(),Ze(this,e,Po,No,xe,{tableRows:0,textFilter:1,sortedBy:2})}}function Xi(t){let e,n;return e=new Dr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function qo(t){let e,n,i=t[0]&&Xi(t);return{c(){i&&i.c(),e=kn()},m(r,s){i&&i.m(r,s),J(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&se(i,1)):(i=Xi(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),fe(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){fe(i),n=!1},d(r){r&&K(e),i&&i.d(r)}}}function Bo(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return on(async()=>{let l=await Kt(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class jo extends Ye{constructor(e){super(),Ze(this,e,Bo,qo,xe,{rowData:4})}}function $i(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function er(t){let e,n;return e=new jo({props:{rowData:t[1]}}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function tr(t){let e,n,i=t[2]&&er(t);return{c(){i&&i.c(),e=kn()},m(r,s){i&&i.m(r,s),J(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&se(i,1)):(i=er(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),fe(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){fe(i),n=!1},d(r){r&&K(e),i&&i.d(r)}}}function nr(t){let e,n=Ue(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=ir($i(t,n,r));return{c(){e=k("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){J(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Ue(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=$i(r,n,o);i[o]?i[o].p(a,s):(i[o]=ir(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&K(e),Tt(i,r)}}}function ir(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=k("tr"),n=k("td"),r=q(i),s=k("td"),a=q(o)},m(l,d){J(l,e,d),h(e,n),h(n,r),h(e,s),h(s,a)},p(l,d){d&2&&i!==(i=l[5]+"")&&pe(r,i),d&2&&o!==(o=l[6]+"")&&pe(a,o)},d(l){l&&K(e)}}}function xo(t){let e,n,i,r,s=t[2],o,a,l,d,f=tr(t),_=t[1]&&nr(t);return{c(){e=k("div"),n=k("button"),n.textContent="×",i=j(),r=k("div"),f.c(),o=j(),_&&_.c(),v(n,"class","close svelte-1g3sjso"),v(n,"title","Close"),v(r,"class","scrollable svelte-1g3sjso"),v(e,"id","mypopover"),v(e,"popover",""),v(e,"class","svelte-1g3sjso")},m(p,g){J(p,e,g),h(e,n),h(e,i),h(e,r),f.m(r,null),h(r,o),_&&_.m(r,null),t[4](e),a=!0,l||(d=be(n,"click",t[3]),l=!0)},p(p,[g]){g&4&&xe(s,s=p[2])?(Ft(),fe(f,1,1,ye),Dt(),f=tr(p),f.c(),se(f,1),f.m(r,o)):f.p(p,g),p[1]?_?_.p(p,g):(_=nr(p),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(p){a||(se(f),a=!0)},o(p){fe(f),a=!1},d(p){p&&K(e),f.d(p),_&&_.d(),t[4](null),l=!1,d()}}}function Vo(t,e,n){let i,r,s;Se.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}on(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Se.setSelectedRow(null))})});function a(l){Mt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class Wo extends Ye{constructor(e){super(),Ze(this,e,Vo,xo,xe,{})}}const Ho="https://will-moore.github.io/ome2024-ngff-challenge/selectCaret.svg",Ko="https://will-moore.github.io/ome2024-ngff-challenge/ome-main-nav.svg",Go="https://will-moore.github.io/ome2024-ngff-challenge/github-mark-white.svg";function Jo(t){let e,n,i,r,s,o,a,l,d,f,_,p,g,m,E;return{c(){e=k("base"),n=j(),i=k("nav"),r=k("a"),s=k("img"),a=j(),l=k("a"),d=k("h2"),d.textContent="2024 NGFF Challenge",f=j(),_=k("div"),p=j(),g=k("a"),g.textContent="About",m=j(),E=k("a"),E.innerHTML=`<img alt="GitHub Logo" src="${Go}" class="svelte-1q2q39w"/>`,v(e,"href",t[0]),v(s,"alt","OME Logo"),Mn(s.src,o=Ko)||v(s,"src",o),v(s,"class","svelte-1q2q39w"),v(r,"class","logolink svelte-1q2q39w"),v(r,"href",t[0]),v(d,"class","svelte-1q2q39w"),v(l,"href",t[0]),v(l,"class","svelte-1q2q39w"),le(_,"flex","1"),v(g,"href","about/"),v(g,"class","svelte-1q2q39w"),v(E,"class","github svelte-1q2q39w"),v(E,"title","Open in GitHub"),v(E,"target","_blank"),v(E,"href","https://github.com/ome/ome2024-ngff-challenge/"),v(i,"class","svelte-1q2q39w")},m(P,N){J(P,e,N),J(P,n,N),J(P,i,N),h(i,r),h(r,s),h(i,a),h(i,l),h(l,d),h(i,f),h(i,_),h(i,p),h(i,g),h(i,m),h(i,E)},p:ye,i:ye,o:ye,d(P){P&&(K(e),K(n),K(i))}}}function Zo(t){let e="https://will-moore.github.io/ome2024-ngff-challenge/";return console.log("Nav base",e),[e]}class Yo extends Ye{constructor(e){super(),Ze(this,e,Zo,Jo,xe,{})}}function rr(t){let e=t[0].plate_count+"",n,i;return{c(){n=q(e),i=q(" plates")},m(r,s){J(r,n,s),J(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&pe(n,e)},d(r){r&&(K(n),K(i))}}}function Qo(t){let e,n,i,r,s,o,a,l=t[0].source+"",d,f,_,p,g,m,E=Lt(t[0].bytes)+"",P,N,M,V,Q,G,Y,R,c=t[0].image_count+"",u,w,I,C,z,x,ee,U,b,S=t[0].plate_count&&rr(t);return{c(){e=k("div"),n=k("label"),i=k("img"),o=j(),a=k("div"),d=q(l),f=j(),_=k("br"),p=j(),g=k("span"),m=q("("),P=q(E),N=q(")"),V=k("input"),G=j(),Y=k("div"),S&&S.c(),R=j(),u=q(c),w=q(" images"),I=j(),C=k("label"),z=k("input"),x=j(),ee=k("span"),ee.textContent="×",v(i,"title",r=t[0].url),v(i,"class","sourceLogo svelte-1iuq3t7"),v(i,"alt","Source logo"),Mn(i.src,s=ki(t[0].source))||v(i,"src",s),v(g,"title",M=t[0].child_csv.length+" collections"),v(V,"class","source svelte-1iuq3t7"),v(V,"type","radio"),v(V,"name","source"),V.value=Q=t[0].source,v(Y,"class","tooltip svelte-1iuq3t7"),v(n,"class","svelte-1iuq3t7"),v(z,"type","radio"),v(z,"name","source"),z.value="",v(z,"class","svelte-1iuq3t7"),v(ee,"title","Clear filter"),v(C,"class","clear svelte-1iuq3t7"),v(e,"class","source svelte-1iuq3t7")},m(T,L){J(T,e,L),h(e,n),h(n,i),h(n,o),h(n,a),h(a,d),h(a,f),h(a,_),h(a,p),h(a,g),h(g,m),h(g,P),h(g,N),h(a,V),h(a,G),h(a,Y),S&&S.m(Y,null),h(Y,R),h(Y,u),h(Y,w),h(e,I),h(e,C),h(C,z),h(C,x),h(C,ee),U||(b=[be(V,"change",function(){bn(t[1])&&t[1].apply(this,arguments)}),be(z,"change",function(){bn(t[1])&&t[1].apply(this,arguments)})],U=!0)},p(T,[L]){t=T,L&1&&r!==(r=t[0].url)&&v(i,"title",r),L&1&&!Mn(i.src,s=ki(t[0].source))&&v(i,"src",s),L&1&&l!==(l=t[0].source+"")&&pe(d,l),L&1&&E!==(E=Lt(t[0].bytes)+"")&&pe(P,E),L&1&&M!==(M=t[0].child_csv.length+" collections")&&v(g,"title",M),L&1&&Q!==(Q=t[0].source)&&(V.value=Q),t[0].plate_count?S?S.p(t,L):(S=rr(t),S.c(),S.m(Y,R)):S&&(S.d(1),S=null),L&1&&c!==(c=t[0].image_count+"")&&pe(u,c)},i:ye,o:ye,d(T){T&&K(e),S&&S.d(),U=!1,nt(b)}}}function Xo(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class $o extends Ye{constructor(e){super(),Ze(this,e,Xo,Qo,xe,{source:0,handleFilter:1})}}function el(t,e,n){const i=t.slice();return i[31]=e[n],i}function sr(t,e,n){const i=t.slice();return i[34]=e[n],i}function or(t,e,n){const i=t.slice();return i[34]=e[n],i}function lr(t,e,n){const i=t.slice();return i[39]=e[n],i}function ar(t,e,n){const i=t.slice();return i[42]=e[n],i}function ur(t){let e,n,i,r;return{c(){e=k("span"),e.textContent="  |  ",n=j(),i=k("a"),r=q("Show all collections"),le(e,"color","grey"),v(i,"href",window.location.origin+window.location.pathname)},m(s,o){J(s,e,o),J(s,n,o),J(s,i,o),h(i,r)},p:ye,d(s){s&&(K(e),K(n),K(i))}}}function cr(t){let e,n;return e=new $o({props:{source:t[42],handleFilter:t[17]}}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function fr(t){let e,n,i,r,s,o,a,l,d,f=Ue(Se.getCsvSourceList(t[14])),_=[];for(let p=0;p<f.length;p+=1)_[p]=hr(lr(t,f,p));return{c(){e=k("div"),n=k("select"),i=k("option"),i.textContent="Collection";for(let p=0;p<_.length;p+=1)_[p].c();r=j(),s=k("div"),o=k("button"),a=q("×"),i.__value="",Ee(i,i.__value),v(n,"name","collection"),v(n,"class","svelte-13v19q"),t[12]===void 0&&st(()=>t[24].call(n)),v(o,"title","Clear Filter"),le(o,"visibility",t[12]!==""?"visible":"hidden"),v(o,"class","svelte-13v19q"),v(s,"class","svelte-13v19q"),v(e,"class","selectWrapper svelte-13v19q")},m(p,g){J(p,e,g),h(e,n),h(n,i);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(n,null);ot(n,t[12],!0),h(e,r),h(e,s),h(s,o),h(o,a),l||(d=[be(n,"change",t[24]),be(n,"change",t[19]),be(o,"click",t[19])],l=!0)},p(p,g){if(g[0]&16384){f=Ue(Se.getCsvSourceList(p[14]));let m;for(m=0;m<f.length;m+=1){const E=lr(p,f,m);_[m]?_[m].p(E,g):(_[m]=hr(E),_[m].c(),_[m].m(n,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=f.length}g[0]&20480&&ot(n,p[12]),g[0]&4096&&le(o,"visibility",p[12]!==""?"visible":"hidden")},d(p){p&&K(e),Tt(_,p),l=!1,nt(d)}}}function hr(t){let e,n=(t[39].source==t[14]?gr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",o,a,l;return{c(){e=k("option"),i=q(n),r=q(" ("),o=q(s),a=q(`)
                  `),e.__value=l=t[39].url,Ee(e,e.__value)},m(d,f){J(d,e,f),h(e,i),h(e,r),h(e,o),h(e,a)},p(d,f){f[0]&16384&&n!==(n=(d[39].source==d[14]?gr(d[39].url):d[39].source)+"")&&pe(i,n),f[0]&16384&&s!==(s=d[39].image_count+"")&&pe(o,s),f[0]&16384&&l!==(l=d[39].url)&&(e.__value=l,Ee(e,e.__value))},d(d){d&&K(e)}}}function dr(t){let e,n=t[34]+"",i,r;return{c(){e=k("option"),i=q(n),e.__value=r=t[5][t[34]],Ee(e,e.__value)},m(s,o){J(s,e,o),h(e,i)},p(s,o){o[0]&32&&n!==(n=s[34]+"")&&pe(i,n),o[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,Ee(e,e.__value))},d(s){s&&K(e)}}}function _r(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=k("option"),r=q(i),n.__value=s=e[6][e[34]],Ee(n,n.__value),this.first=n},m(o,a){J(o,n,a),h(n,r)},p(o,a){e=o,a[0]&64&&i!==(i=e[34]+"")&&pe(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,Ee(n,n.__value))},d(o){o&&K(n)}}}function tl(t){let e;return{c(){e=k("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],Ee(e,e.__value)},m(n,i){J(n,e,i)},p:ye,d(n){n&&K(e)}}}function nl(t){let e,n,i,r,s,o,a,l=Lt(t[4])+"",d,f,_,p,g,m=t[1].split("/").pop()+"",E,P,N,M,V,Q,G,Y,R,c,u,w,I,C,z,x,ee=t[14]!==""&&Se.getCsvSourceList(t[14]).length>0,U,b,S,T,L=t[13]!==""?"All Dimensions":"Dimension Count",te,O,W,y,F,B,ne,ie,D,Z,ae,de,X,ve,_e=t[11]==""?"Organism":"All Organisms",ue,qe,Me,Le,Ie,Fe,ge,he,Ce,re,Qe=t[10]==""?"Imaging Modality":"All Modalities",Ve,tt,Ae=[],Xe=new Map,$e,Oe,We,De,Pt,ut,oi,Cn,li,pt,et,vt,ai,ui,bt,yt,wt,ci,un,ct,fi,kt,it,hi,cn=t[0].length+"",Sn,di,An,_i,gi,ft,Re,In,mi;e=new Wo({});let Be=t[1]!=qn&&ur(),ht=Ue(t[2]),we=[];for(let A=0;A<ht.length;A+=1)we[A]=cr(ar(t,ht,A));const Nr=A=>fe(we[A],1,1,()=>{we[A]=null});let je=ee&&fr(t),Et=Ue(Object.keys(t[5]).sort()),Ne=[];for(let A=0;A<Et.length;A+=1)Ne[A]=dr(or(t,Et,A));let fn=Ue(Object.keys(t[6]).sort());const pi=A=>A[34];for(let A=0;A<fn.length;A+=1){let H=sr(t,fn,A),me=pi(H);Xe.set(me,Ae[A]=_r(me,H))}let Pr=Ue(["x","y","z","c","t"]),Ut=[];for(let A=0;A<5;A+=1)Ut[A]=tl(el(t,Pr,A));return ct=new bs({props:{toggleAscending:t[15],sortAscending:t[8]}}),ft=new Uo({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){Je(e.$$.fragment),n=j(),i=k("main"),r=k("div"),s=k("h3"),o=q(`In the summer of 2024, the OME-NGFF project generated
        `),a=k("strong"),d=q(l),f=q(` of data in Zarr v3 format
          `),_=k("div"),p=q(`Showing Collection:
            `),g=k("a"),E=q(m),P=j(),Be&&Be.c(),N=j(),M=k("div"),V=k("input"),Q=j(),G=k("button"),Y=q("×"),R=j(),c=k("div");for(let A=0;A<we.length;A+=1)we[A].c();u=j(),w=k("div"),I=k("div"),C=k("div"),z=k("div"),z.textContent="Filter by:",x=j(),je&&je.c(),U=j(),b=k("div"),S=k("select"),T=k("option"),te=q(L),O=k("hr"),W=k("option"),W.textContent="2D",y=k("option"),y.textContent="3D",F=k("option"),F.textContent="4D",B=k("option"),B.textContent="5D",ne=j(),ie=k("div"),D=k("button"),Z=q("×"),ae=j(),de=k("div"),X=k("select"),ve=k("option"),ue=q(_e),qe=k("hr");for(let A=0;A<Ne.length;A+=1)Ne[A].c();Me=j(),Le=k("div"),Ie=k("button"),Fe=q("×"),ge=j(),he=k("div"),Ce=k("select"),re=k("option"),Ve=q(Qe),tt=k("hr");for(let A=0;A<Ae.length;A+=1)Ae[A].c();$e=j(),Oe=k("div"),We=k("button"),De=q("×"),Pt=j(),ut=k("div"),oi=j(),Cn=k("div"),Cn.textContent="Sort by:",li=j(),pt=k("div"),et=k("select"),vt=k("option"),vt.textContent="--",ai=k("hr");for(let A=0;A<5;A+=1)Ut[A].c();ui=k("hr"),bt=k("option"),bt.textContent="Data Size (bytes)",yt=k("option"),yt.textContent="Chunk Size (pixels)",wt=k("option"),wt.textContent="Shard Size (pixels)",ci=j(),un=k("div"),Je(ct.$$.fragment),fi=j(),kt=k("div"),it=k("h3"),hi=q("Showing "),Sn=q(cn),di=q(" out of "),An=q(t[3]),_i=q(" images"),gi=j(),Je(ft.$$.fragment),le(a,"font-weight","600"),v(g,"href",t[1]),le(_,"font-size","90%"),le(s,"text-align","center"),v(V,"placeholder","Filter by Name or Description"),v(V,"name","textFilter"),v(V,"class","svelte-13v19q"),v(G,"title","Clear Filter"),le(G,"visibility",t[9]!==""?"visible":"hidden"),v(G,"class","svelte-13v19q"),v(M,"class","textInputWrapper svelte-13v19q"),v(c,"class","sources svelte-13v19q"),v(r,"class","summary svelte-13v19q"),le(z,"white-space","nowrap"),T.__value="",Ee(T,T.__value),W.__value="2",Ee(W,W.__value),y.__value="3",Ee(y,y.__value),F.__value="4",Ee(F,F.__value),B.__value="5",Ee(B,B.__value),v(S,"class","svelte-13v19q"),t[13]===void 0&&st(()=>t[25].call(S)),v(D,"title","Clear Filter"),le(D,"visibility",t[13]!==""?"visible":"hidden"),v(D,"class","svelte-13v19q"),v(ie,"class","svelte-13v19q"),v(b,"class","selectWrapper svelte-13v19q"),ve.__value="",Ee(ve,ve.__value),v(X,"class","svelte-13v19q"),t[11]===void 0&&st(()=>t[26].call(X)),v(Ie,"title","Clear Filter"),le(Ie,"visibility",t[11]!==""?"visible":"hidden"),v(Ie,"class","svelte-13v19q"),v(Le,"class","svelte-13v19q"),v(de,"class","selectWrapper svelte-13v19q"),re.__value="",Ee(re,re.__value),v(Ce,"class","svelte-13v19q"),t[10]===void 0&&st(()=>t[27].call(Ce)),v(We,"title","Clear Filter"),le(We,"visibility",t[10]!==""?"visible":"hidden"),v(We,"class","svelte-13v19q"),v(Oe,"class","svelte-13v19q"),v(he,"class","selectWrapper svelte-13v19q"),v(ut,"class","clear"),vt.__value="",Ee(vt,vt.__value),bt.__value="written",Ee(bt,bt.__value),yt.__value="chunk_pixels",Ee(yt,yt.__value),wt.__value="shard_pixels",Ee(wt,wt.__value),v(et,"class","svelte-13v19q"),v(un,"class","svelte-13v19q"),v(pt,"class","selectWrapper svelte-13v19q"),v(C,"class","filters svelte-13v19q"),v(I,"class","sidebar svelte-13v19q"),le(it,"margin-left","15px"),v(it,"class","svelte-13v19q"),v(kt,"class","results svelte-13v19q"),v(w,"class","sidebarContainer svelte-13v19q"),le(i,"--form-select-bg-img","url('"+Ho+"')"),v(i,"class","svelte-13v19q")},m(A,H){Ke(e,A,H),J(A,n,H),J(A,i,H),h(i,r),h(r,s),h(s,o),h(s,a),h(a,d),h(s,f),h(s,_),h(_,p),h(_,g),h(g,E),h(_,P),Be&&Be.m(_,null),h(r,N),h(r,M),h(M,V),Ee(V,t[9]),h(M,Q),h(M,G),h(G,Y),h(r,R),h(r,c);for(let me=0;me<we.length;me+=1)we[me]&&we[me].m(c,null);h(i,u),h(i,w),h(w,I),h(I,C),h(C,z),h(C,x),je&&je.m(C,null),h(C,U),h(C,b),h(b,S),h(S,T),h(T,te),h(S,O),h(S,W),h(S,y),h(S,F),h(S,B),ot(S,t[13],!0),h(b,ne),h(b,ie),h(ie,D),h(D,Z),h(C,ae),h(C,de),h(de,X),h(X,ve),h(ve,ue),h(X,qe);for(let me=0;me<Ne.length;me+=1)Ne[me]&&Ne[me].m(X,null);ot(X,t[11],!0),h(de,Me),h(de,Le),h(Le,Ie),h(Ie,Fe),h(C,ge),h(C,he),h(he,Ce),h(Ce,re),h(re,Ve),h(Ce,tt);for(let me=0;me<Ae.length;me+=1)Ae[me]&&Ae[me].m(Ce,null);ot(Ce,t[10],!0),h(he,$e),h(he,Oe),h(Oe,We),h(We,De),h(C,Pt),h(C,ut),h(C,oi),h(C,Cn),h(C,li),h(C,pt),h(pt,et),h(et,vt),h(et,ai);for(let me=0;me<5;me+=1)Ut[me]&&Ut[me].m(et,null);h(et,ui),h(et,bt),h(et,yt),h(et,wt),h(pt,ci),h(pt,un),Ke(ct,un,null),h(w,fi),h(w,kt),h(kt,it),h(it,hi),h(it,Sn),h(it,di),h(it,An),h(it,_i),h(kt,gi),Ke(ft,kt,null),Re=!0,In||(mi=[be(V,"input",t[23]),be(V,"input",t[22]),be(G,"click",t[22]),be(S,"change",t[25]),be(S,"change",t[18]),be(D,"click",t[18]),be(X,"change",t[26]),be(X,"change",t[20]),be(Ie,"click",t[20]),be(Ce,"change",t[27]),be(Ce,"change",t[21]),be(We,"click",t[21]),be(et,"change",t[16])],In=!0)},p(A,H){if((!Re||H[0]&16)&&l!==(l=Lt(A[4])+"")&&pe(d,l),(!Re||H[0]&2)&&m!==(m=A[1].split("/").pop()+"")&&pe(E,m),(!Re||H[0]&2)&&v(g,"href",A[1]),A[1]!=qn?Be?Be.p(A,H):(Be=ur(),Be.c(),Be.m(_,null)):Be&&(Be.d(1),Be=null),H[0]&512&&V.value!==A[9]&&Ee(V,A[9]),(!Re||H[0]&512)&&le(G,"visibility",A[9]!==""?"visible":"hidden"),H[0]&131076){ht=Ue(A[2]);let ce;for(ce=0;ce<ht.length;ce+=1){const qt=ar(A,ht,ce);we[ce]?(we[ce].p(qt,H),se(we[ce],1)):(we[ce]=cr(qt),we[ce].c(),se(we[ce],1),we[ce].m(c,null))}for(Ft(),ce=ht.length;ce<we.length;ce+=1)Nr(ce);Dt()}if(H[0]&16384&&(ee=A[14]!==""&&Se.getCsvSourceList(A[14]).length>0),ee?je?je.p(A,H):(je=fr(A),je.c(),je.m(C,U)):je&&(je.d(1),je=null),(!Re||H[0]&8192)&&L!==(L=A[13]!==""?"All Dimensions":"Dimension Count")&&pe(te,L),H[0]&8192&&ot(S,A[13]),(!Re||H[0]&8192)&&le(D,"visibility",A[13]!==""?"visible":"hidden"),(!Re||H[0]&2048)&&_e!==(_e=A[11]==""?"Organism":"All Organisms")&&pe(ue,_e),H[0]&32){Et=Ue(Object.keys(A[5]).sort());let ce;for(ce=0;ce<Et.length;ce+=1){const qt=or(A,Et,ce);Ne[ce]?Ne[ce].p(qt,H):(Ne[ce]=dr(qt),Ne[ce].c(),Ne[ce].m(X,null))}for(;ce<Ne.length;ce+=1)Ne[ce].d(1);Ne.length=Et.length}H[0]&2080&&ot(X,A[11]),(!Re||H[0]&2048)&&le(Ie,"visibility",A[11]!==""?"visible":"hidden"),(!Re||H[0]&1024)&&Qe!==(Qe=A[10]==""?"Imaging Modality":"All Modalities")&&pe(Ve,Qe),H[0]&64&&(fn=Ue(Object.keys(A[6]).sort()),Ae=wr(Ae,H,pi,1,A,fn,Xe,Ce,Yr,_r,null,sr)),H[0]&1088&&ot(Ce,A[10]),(!Re||H[0]&1024)&&le(We,"visibility",A[10]!==""?"visible":"hidden");const me={};H[0]&256&&(me.sortAscending=A[8]),ct.$set(me),(!Re||H[0]&1)&&cn!==(cn=A[0].length+"")&&pe(Sn,cn),(!Re||H[0]&8)&&pe(An,A[3]);const hn={};H[0]&1&&(hn.tableRows=A[0]),H[0]&512&&(hn.textFilter=A[9]),H[0]&128&&(hn.sortedBy=A[7]),ft.$set(hn)},i(A){if(!Re){se(e.$$.fragment,A);for(let H=0;H<ht.length;H+=1)se(we[H]);se(ct.$$.fragment,A),se(ft.$$.fragment,A),Re=!0}},o(A){fe(e.$$.fragment,A),we=we.filter(Boolean);for(let H=0;H<we.length;H+=1)fe(we[H]);fe(ct.$$.fragment,A),fe(ft.$$.fragment,A),Re=!1},d(A){A&&(K(n),K(i)),Ge(e,A),Be&&Be.d(),Tt(we,A),je&&je.d(),Tt(Ne,A);for(let H=0;H<Ae.length;H+=1)Ae[H].d();Tt(Ut,A),Ge(ct),Ge(ft),In=!1,nt(mi)}}}function gr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function il(t,e,n){let i,r,s,o,a,l,f=new URLSearchParams(window.location.search).get("csv");try{new URL(f)}catch{f=qn}let _=[],p=[],g=0,m=0,E={},P={};Se.subscribe(b=>{n(0,_=G(b)),n(2,p=Se.getCsvSourceList()),n(3,g=b.length),n(4,m=b.reduce((S,T)=>S+parseInt(T.written)||0,0))}),Tr.subscribe(b=>{let S={};for(const[T,L]of Object.entries(b))S[L]=T;n(5,E=S)}),Or.subscribe(b=>{let S={};for(const[T,L]of Object.entries(b))S[L]=T;n(6,P=S)}),f&&Er(f,Se);let N="",M=!1;function V(){n(8,M=!M),Se.sortTable(N,M)}function Q(b){n(7,N=b.target.value),N===""?Se.sortTable("index",!0):Se.sortTable(N,M)}function G(b){if(i!==""&&(b=b.filter(S=>S.dim_count==i)),s!=="")b=b.filter(S=>S.csv==s);else if(r!==""){let S=Se.getCsvSourceList(r),T=[r,...S.map(L=>L.source)];b=b.filter(L=>T.includes(L.source))}if(o!==""&&(b=b.filter(S=>S.organismId==o)),a!=""&&(b=b.filter(S=>S.fbbiId==a)),l&&l!=""){let S=l.toLowerCase();b=b.filter(T=>{var L,te;return((L=T.description)==null?void 0:L.toLowerCase().includes(S))||((te=T.name)==null?void 0:te.toLowerCase().includes(S))})}return b}function Y(b){n(14,r=b.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,_=G(Se.getRows()))}function R(b){n(13,i=b.target.value||""),n(0,_=G(Se.getRows()))}function c(b){n(12,s=b.target.value||""),n(0,_=G(Se.getRows()))}function u(b){n(11,o=b.target.value||""),n(0,_=G(Se.getRows()))}function w(b){n(10,a=b.target.value||""),n(0,_=G(Se.getRows()))}function I(b){n(9,l=b.target.value),n(0,_=G(Se.getRows()))}function C(){l=this.value,n(9,l)}function z(){s=_n(this),n(12,s),n(14,r)}function x(){i=_n(this),n(13,i)}function ee(){o=_n(this),n(11,o),n(5,E)}function U(){a=_n(this),n(10,a),n(6,P)}return t.$$.update=()=>{t.$$.dirty[0]&1&&_.some(b=>b.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,o=""),n(10,a=""),n(9,l=""),[_,f,p,g,m,E,P,N,M,l,a,o,s,i,r,V,Q,Y,R,c,u,w,I,C,z,x,ee,U]}class rl extends Ye{constructor(e){super(),Ze(this,e,il,nl,xe,{},null,[-1,-1])}}function sl(t){let e;return{c(){e=k("div"),e.innerHTML=`<h2>Introduction</h2> <p>The <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>
    was conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024. The stated goals of Challenge were:</p> <ul><li>Collect examples of OME-Zarr from multiple modalities, use cases, and
      institutions, available from a single location.</li> <li>Test the utility (and lack thereof) of existing OME-Zarr metadata and
      image viewers.</li> <li>Advance the adoption of the Zarr V3 specification, and also existing
      OME-Zarr RFCs.</li></ul> <p>The inspiration for the Challenge came from presentations at the OME Meeting
    that demonstrated the level of adoption of OME-Zarr, but highlighted the
    poor findability of the data.</p> <p>Work on the challenge started in earnest in July 2024. All progress is
    tracked in the <a href="https://github.com/ome/ome2024-ngff-challenge">ome2024-ngff-challenge</a>
    repo. It was agreed that the results
    of the OME-NGFF Challenge would be presented at the
    <a href="https://globalbioimaging.org/exchange-of-experience/exchange-of-experience-ix">2024 Global BioImaging Meeting</a>.</p> <h2>Process</h2> <p>The Challenge was run via a series of virtual meetings coordinated on the
    Image.sc Forums, with all
    <a href="https://hackmd.io/3emKqKQsT_2U35vLepzDEQ">notes and lists of participants</a>
    available.</p> <h2>Results</h2> <p>At the outset, we weren’t sure how much OME-Zarr data was available, if it
    could be converted to Zarr V3, or how many organisations would participate.
    In the end, we have far exceeded our expectations, with more than 0.5 PByte
    of OME-Zarr made available, across a wide range of modalities.</p> <p>To make the assembly as accessible as possible, we built the the OME-NGFF
    Challenge Viewer [URL?}, which incorporates a CSV with locations of
    datasets, and connects datasets to the OME NGFF Validator, for metadata
    validation and viewing.</p> <p>Perhaps the most important outcome of the Challenge is the establishment of
    a federated bioimage data system based on OME-Zarr. To our knowledge, this
    is the largest federated bioimage data collection ever assembled.</p>`,v(e,"class","svelte-1ivuwa5")},m(n,i){J(n,e,i)},p:ye,i:ye,o:ye,d(n){n&&K(e)}}}class ol extends Ye{constructor(e){super(),Ze(this,e,null,sl,xe,{})}}function ll(t){let e,n;return e=new rl({}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function al(t){let e,n;return e=new ol({}),{c(){Je(e.$$.fragment)},m(i,r){Ke(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){fe(e.$$.fragment,i),n=!1},d(i){Ge(e,i)}}}function ul(t){let e,n,i,r,s,o;n=new Yo({});const a=[al,ll],l=[];function d(f,_){return f[0].endsWith("/about/")?0:1}return r=d(t),s=l[r]=a[r](t),{c(){e=k("div"),Je(n.$$.fragment),i=j(),s.c(),v(e,"class","app svelte-1mc4mod")},m(f,_){J(f,e,_),Ke(n,e,null),h(e,i),l[r].m(e,null),o=!0},p:ye,i(f){o||(se(n.$$.fragment,f),se(s),o=!0)},o(f){fe(n.$$.fragment,f),fe(s),o=!1},d(f){f&&K(e),Ge(n),l[r].d()}}}function cl(t){return[window.location.pathname]}class fl extends Ye{constructor(e){super(),Ze(this,e,cl,ul,xe,{})}}new fl({target:document.getElementById("app")});
