const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Fr=Object.defineProperty;var gi=t=>{throw TypeError(t)};var Mr=(t,e,n)=>e in t?Fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>Mr(t,typeof e!="symbol"?e+"":e,n),Tn=(t,e,n)=>e.has(t)||gi("Cannot "+n);var Y=(t,e,n)=>(Tn(t,e,"read from private field"),n?n.call(t):e.get(t)),Ce=(t,e,n)=>e.has(t)?gi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),we=(t,e,n,i)=>(Tn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Rn=(t,e,n)=>(Tn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ie(){}function Dr(t,e){for(const n in e)t[n]=e[n];return t}function _r(t){return t()}function mi(){return Object.create(null)}function $e(t){t.forEach(_r)}function vn(t){return typeof t=="function"}function qe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let hn;function pi(t,e){return t===e?!0:(hn||(hn=document.createElement("a")),hn.href=e,t===hn.href)}function Nr(t){return Object.keys(t).length===0}function Pr(t,...e){if(t==null){for(const i of e)i(void 0);return Ie}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function xt(t){let e;return Pr(t,n=>e=n)(),e}function Ln(t,e,n,i){if(t){const r=gr(t,e,n,i);return t[0](r)}}function gr(t,e,n,i){return t[1]&&i?Dr(n.ctx.slice(),t[1](i(e))):n.ctx}function Fn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Mn(t,e,n,i,r,s){if(r){const o=gr(e,n,i,s);t.p(o,r)}}function Dn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function h(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function X(t){t.parentNode&&t.parentNode.removeChild(t)}function Rt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function j(t){return document.createTextNode(t)}function Q(){return j(" ")}function En(){return j("")}function ve(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ur(t){return Array.from(t.childNodes)}function ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function ke(t,e){t.value=e??""}function ce(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function dn(t){const e=t.querySelector(":checked");return e&&e.__value}function Tt(t,e,n){t.classList.toggle(e,!!n)}function jr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Ht;function Wt(t){Ht=t}function Kn(){if(!Ht)throw new Error("Function called outside component initialization");return Ht}function sn(t){Kn().$$.on_mount.push(t)}function Jn(t){Kn().$$.on_destroy.push(t)}function Br(){const t=Kn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=jr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const It=[],Ft=[];let zt=[];const vi=[],xr=Promise.resolve();let Nn=!1;function Vr(){Nn||(Nn=!0,xr.then(Ne))}function rt(t){zt.push(t)}const zn=new Set;let At=0;function Ne(){if(At!==0)return;const t=Ht;do{try{for(;At<It.length;){const e=It[At];At++,Wt(e),Wr(e.$$)}}catch(e){throw It.length=0,At=0,e}for(Wt(null),It.length=0,At=0;Ft.length;)Ft.pop()();for(let e=0;e<zt.length;e+=1){const n=zt[e];zn.has(n)||(zn.add(n),n())}zt.length=0}while(It.length);for(;vi.length;)vi.pop()();Nn=!1,zn.clear(),Wt(t)}function Wr(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}function Hr(t){const e=[],n=[];zt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),zt=e}const gn=new Set;let ht;function Mt(){ht={r:0,c:[],p:ht}}function Dt(){ht.r||$e(ht.c),ht=ht.p}function ue(t,e){t&&t.i&&(gn.delete(t),t.i(e))}function ge(t,e,n,i){if(t&&t.o){if(gn.has(t))return;gn.add(t),ht.c.push(()=>{gn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function qr(t,e){t.d(1),e.delete(t.key)}function Kr(t,e){ge(t,1,1,()=>{e.delete(t.key)})}function mr(t,e,n,i,r,s,o,a,l,d,c,_){let g=t.length,v=s.length,m=g;const k={};for(;m--;)k[t[m].key]=m;const F=[],M=new Map,O=new Map,H=[];for(m=v;m--;){const R=_(r,s,m),f=n(R);let u=o.get(f);u?H.push(()=>u.p(R,e)):(u=d(f,R),u.c()),M.set(f,F[m]=u),f in k&&O.set(f,Math.abs(m-k[f]))}const ee=new Set,q=new Set;function Z(R){ue(R,1),R.m(a,c),o.set(R.key,R),c=R.first,v--}for(;g&&v;){const R=F[v-1],f=t[g-1],u=R.key,b=f.key;R===f?(c=R.first,g--,v--):M.has(b)?!o.has(u)||ee.has(u)?Z(R):q.has(b)?g--:O.get(u)>O.get(b)?(q.add(u),Z(R)):(ee.add(b),g--):(l(f,o),g--)}for(;g--;){const R=t[g];M.has(R.key)||l(R,o)}for(;v;)Z(F[v-1]);return $e(H),F}function Xe(t){t&&t.c()}function Ye(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),rt(()=>{const s=t.$$.on_mount.map(_r).filter(vn);t.$$.on_destroy?t.$$.on_destroy.push(...s):$e(s),t.$$.on_mount=[]}),r.forEach(rt)}function Qe(t,e){const n=t.$$;n.fragment!==null&&(Hr(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Jr(t,e){t.$$.dirty[0]===-1&&(It.push(t),Vr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(t,e,n,i,r,s,o=null,a=[-1]){const l=Ht;Wt(t);const d=t.$$={fragment:null,ctx:[],props:s,update:Ie,not_equal:r,bound:mi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:mi(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(d.root);let c=!1;if(d.ctx=n?n(t,e.props||{},(_,g,...v)=>{const m=v.length?v[0]:g;return d.ctx&&r(d.ctx[_],d.ctx[_]=m)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](m),c&&Jr(t,_)),g}):[],d.update(),c=!0,$e(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const _=Ur(e.target);d.fragment&&d.fragment.l(_),_.forEach(X)}else d.fragment&&d.fragment.c();e.intro&&ue(t.$$.fragment),Ye(t,e.target,e.anchor),Ne()}Wt(l)}class tt{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Qe(this,1),this.$destroy=Ie}$on(e,n){if(!vn(n))return Ie;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Nr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gr);const Ct=[];function Pn(t,e=Ie){let n;const i=new Set;function r(a){if(qe(t,a)&&(t=a,n)){const l=!Ct.length;for(const d of i)d[1](),Ct.push(d,t);if(l){for(let d=0;d<Ct.length;d+=2)Ct[d][0](Ct[d+1]);Ct.length=0}}}function s(a){r(a(t))}function o(a,l=Ie){const d=[a,l];return i.add(d),i.size===1&&(n=e(r,s)||Ie),a(t),()=>{i.delete(d),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Yr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(f,u){var b=(u=u||{}).dynamicTyping||!1;if(R(b)&&(u.dynamicTypingFunction=b,b={}),u.dynamicTyping=b,u.transform=!!R(u.transform)&&u.transform,u.worker&&l.WORKERS_SUPPORTED){var I=function(){if(!l.WORKERS_SUPPORTED)return!1;var U=(D=i.URL||i.webkitURL||null,x=n.toString(),l.BLOB_URL||(l.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",x,")();"],{type:"text/javascript"})))),W=new i.Worker(U),D,x;return W.onmessage=O,W.id=a++,o[W.id]=W}();return I.userStep=u.step,I.userChunk=u.chunk,I.userComplete=u.complete,I.userError=u.error,u.step=R(u.step),u.chunk=R(u.chunk),u.complete=R(u.complete),u.error=R(u.error),delete u.worker,void I.postMessage({input:f,config:u,workerId:I.id})}var S=null;return l.NODE_STREAM_INPUT,typeof f=="string"?(f=function(U){return U.charCodeAt(0)===65279?U.slice(1):U}(f),S=u.download?new _(u):new v(u)):f.readable===!0&&R(f.read)&&R(f.on)?S=new m(u):(i.File&&f instanceof File||f instanceof Object)&&(S=new g(u)),S.stream(f)},unparse:function(f,u){var b=!1,I=!0,S=",",U=`\r
`,W='"',D=W+W,x=!1,p=null,P=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||l.BAD_DELIMITERS.filter(function(C){return u.delimiter.indexOf(C)!==-1}).length||(S=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(b=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(x=u.skipEmptyLines),typeof u.newline=="string"&&(U=u.newline),typeof u.quoteChar=="string"&&(W=u.quoteChar),typeof u.header=="boolean"&&(I=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");p=u.columns}u.escapeChar!==void 0&&(D=u.escapeChar+W),(typeof u.escapeFormulae=="boolean"||u.escapeFormulae instanceof RegExp)&&(P=u.escapeFormulae instanceof RegExp?u.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var z=new RegExp(F(W),"g");if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return V(null,f,x);if(typeof f[0]=="object")return V(p||Object.keys(f[0]),f,x)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||p),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),V(f.fields||[],f.data||[],x);throw new Error("Unable to serialize unrecognized input");function V(C,T,E){var L="";typeof C=="string"&&(C=JSON.parse(C)),typeof T=="string"&&(T=JSON.parse(T));var G=Array.isArray(C)&&0<C.length,ne=!Array.isArray(T[0]);if(G&&I){for(var ie=0;ie<C.length;ie++)0<ie&&(L+=S),L+=J(C[ie],ie);0<T.length&&(L+=U)}for(var N=0;N<T.length;N++){var B=G?C.length:T[N].length,te=!1,me=G?Object.keys(T[N]).length===0:T[N].length===0;if(E&&!G&&(te=E==="greedy"?T[N].join("").trim()==="":T[N].length===1&&T[N][0].length===0),E==="greedy"&&G){for(var se=[],Ae=0;Ae<B;Ae++){var pe=ne?C[Ae]:Ae;se.push(T[N][pe])}te=se.join("").trim()===""}if(!te){for(var oe=0;oe<B;oe++){0<oe&&!me&&(L+=S);var Ee=G&&ne?C[oe]:oe;L+=J(T[N][Ee],oe)}N<T.length-1&&(!E||0<B&&!me)&&(L+=U)}}return L}function J(C,T){if(C==null)return"";if(C.constructor===Date)return JSON.stringify(C).slice(1,25);var E=!1;P&&typeof C=="string"&&P.test(C)&&(C="'"+C,E=!0);var L=C.toString().replace(z,D);return(E=E||b===!0||typeof b=="function"&&b(C,T)||Array.isArray(b)&&b[T]||function(G,ne){for(var ie=0;ie<ne.length;ie++)if(-1<G.indexOf(ne[ie]))return!0;return!1}(L,l.BAD_DELIMITERS)||-1<L.indexOf(S)||L.charAt(0)===" "||L.charAt(L.length-1)===" ")?W+L+W:L}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=M,l.ParserHandle=k,l.NetworkStreamer=_,l.FileStreamer=g,l.StringStreamer=v,l.ReadableStreamStreamer=m,i.jQuery){var d=i.jQuery;d.fn.parse=function(f){var u=f.config||{},b=[];return this.each(function(U){if(!(d(this).prop("tagName").toUpperCase()==="INPUT"&&d(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var W=0;W<this.files.length;W++)b.push({file:this.files[W],inputElem:this,instanceConfig:d.extend({},u)})}),I(),this;function I(){if(b.length!==0){var U,W,D,x,p=b[0];if(R(f.before)){var P=f.before(p.file,p.inputElem);if(typeof P=="object"){if(P.action==="abort")return U="AbortError",W=p.file,D=p.inputElem,x=P.reason,void(R(f.error)&&f.error({name:U},W,D,x));if(P.action==="skip")return void S();typeof P.config=="object"&&(p.instanceConfig=d.extend(p.instanceConfig,P.config))}else if(P==="skip")return void S()}var z=p.instanceConfig.complete;p.instanceConfig.complete=function(V){R(z)&&z(V,p.file,p.inputElem),S()},l.parse(p.file,p.instanceConfig)}else R(f.complete)&&f.complete()}function S(){b.splice(0,1),I()}}}function c(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(u){var b=q(u);b.chunkSize=parseInt(b.chunkSize),u.step||u.chunk||(b.chunkSize=null),this._handle=new k(b),(this._handle.streamer=this)._config=b}).call(this,f),this.parseChunk=function(u,b){if(this.isFirstChunk&&R(this._config.beforeFirstChunk)){var I=this._config.beforeFirstChunk(u);I!==void 0&&(u=I)}this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+u;this._partialLine="";var U=this._handle.parse(S,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var W=U.meta.cursor;this._finished||(this._partialLine=S.substring(W-this._baseIndex),this._baseIndex=W),U&&U.data&&(this._rowCount+=U.data.length);var D=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:U,workerId:l.WORKER_ID,finished:D});else if(R(this._config.chunk)&&!b){if(this._config.chunk(U,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);U=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(U.data),this._completeResults.errors=this._completeResults.errors.concat(U.errors),this._completeResults.meta=U.meta),this._completed||!D||!R(this._config.complete)||U&&U.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||U&&U.meta.paused||this._nextChunk(),U}this._halted=!0},this._sendError=function(u){R(this._config.error)?this._config.error(u):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:u,finished:!1})}}function _(f){var u;(f=f||{}).chunkSize||(f.chunkSize=l.RemoteChunkSize),c.call(this,f),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),r||(u.onload=Z(this._chunkLoaded,this),u.onerror=Z(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var b=this._config.downloadRequestHeaders;for(var I in b)u.setRequestHeader(I,b[I])}if(this._config.chunkSize){var S=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+S)}try{u.send(this._config.downloadRequestBody)}catch(U){this._chunkError(U.message)}r&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(b){var I=b.getResponseHeader("Content-Range");return I===null?-1:parseInt(I.substring(I.lastIndexOf("/")+1))}(u),this.parseChunk(u.responseText)))},this._chunkError=function(b){var I=u.statusText||b;this._sendError(new Error(I))}}function g(f){var u,b;(f=f||{}).chunkSize||(f.chunkSize=l.LocalChunkSize),c.call(this,f);var I=typeof FileReader<"u";this.stream=function(S){this._input=S,b=S.slice||S.webkitSlice||S.mozSlice,I?((u=new FileReader).onload=Z(this._chunkLoaded,this),u.onerror=Z(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input;if(this._config.chunkSize){var U=Math.min(this._start+this._config.chunkSize,this._input.size);S=b.call(S,this._start,U)}var W=u.readAsText(S,this._config.encoding);I||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(u.error)}}function v(f){var u;c.call(this,f=f||{}),this.stream=function(b){return u=b,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var b,I=this._config.chunkSize;return I?(b=u.substring(0,I),u=u.substring(I)):(b=u,u=""),this._finished=!u,this.parseChunk(b)}}}function m(f){c.call(this,f=f||{});var u=[],b=!0,I=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):b=!0},this._streamData=Z(function(S){try{u.push(typeof S=="string"?S:S.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(U){this._streamError(U)}},this),this._streamError=Z(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=Z(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(f){var u,b,I,S=Math.pow(2,53),U=-S,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,D=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,x=this,p=0,P=0,z=!1,V=!1,J=[],C={data:[],errors:[],meta:{}};if(R(f.step)){var T=f.step;f.step=function(N){if(C=N,G())L();else{if(L(),C.data.length===0)return;p+=N.data.length,f.preview&&p>f.preview?b.abort():(C.data=C.data[0],T(C,x))}}}function E(N){return f.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function L(){return C&&I&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),I=!1),f.skipEmptyLines&&(C.data=C.data.filter(function(N){return!E(N)})),G()&&function(){if(!C)return;function N(te,me){R(f.transformHeader)&&(te=f.transformHeader(te,me)),J.push(te)}if(Array.isArray(C.data[0])){for(var B=0;G()&&B<C.data.length;B++)C.data[B].forEach(N);C.data.splice(0,1)}else C.data.forEach(N)}(),function(){if(!C||!f.header&&!f.dynamicTyping&&!f.transform)return C;function N(te,me){var se,Ae=f.header?{}:[];for(se=0;se<te.length;se++){var pe=se,oe=te[se];f.header&&(pe=se>=J.length?"__parsed_extra":J[se]),f.transform&&(oe=f.transform(oe,pe)),oe=ne(pe,oe),pe==="__parsed_extra"?(Ae[pe]=Ae[pe]||[],Ae[pe].push(oe)):Ae[pe]=oe}return f.header&&(se>J.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+se,P+me):se<J.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+se,P+me)),Ae}var B=1;return!C.data.length||Array.isArray(C.data[0])?(C.data=C.data.map(N),B=C.data.length):C.data=N(C.data,0),f.header&&C.meta&&(C.meta.fields=J),P+=B,C}()}function G(){return f.header&&J.length===0}function ne(N,B){return te=N,f.dynamicTypingFunction&&f.dynamicTyping[te]===void 0&&(f.dynamicTyping[te]=f.dynamicTypingFunction(te)),(f.dynamicTyping[te]||f.dynamicTyping)===!0?B==="true"||B==="TRUE"||B!=="false"&&B!=="FALSE"&&(function(me){if(W.test(me)){var se=parseFloat(me);if(U<se&&se<S)return!0}return!1}(B)?parseFloat(B):D.test(B)?new Date(B):B===""?null:B):B;var te}function ie(N,B,te,me){var se={type:N,code:B,message:te};me!==void 0&&(se.row=me),C.errors.push(se)}this.parse=function(N,B,te){var me=f.quoteChar||'"';if(f.newline||(f.newline=function(pe,oe){pe=pe.substring(0,1048576);var Ee=new RegExp(F(oe)+"([^]*?)"+F(oe),"gm"),Le=(pe=pe.replace(Ee,"")).split("\r"),xe=pe.split(`
`),ze=1<xe.length&&xe[0].length<Le[0].length;if(Le.length===1||ze)return`
`;for(var he=0,le=0;le<Le.length;le++)Le[le][0]===`
`&&he++;return he>=Le.length/2?`\r
`:"\r"}(N,me)),I=!1,f.delimiter)R(f.delimiter)&&(f.delimiter=f.delimiter(N),C.meta.delimiter=f.delimiter);else{var se=function(pe,oe,Ee,Le,xe){var ze,he,le,de;xe=xe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Ke=0;Ke<xe.length;Ke++){var ae=xe[Ke],Te=0,He=0,Ze=0;le=void 0;for(var Ve=new M({comments:Le,delimiter:ae,newline:oe,preview:10}).parse(pe),Re=0;Re<Ve.data.length;Re++)if(Ee&&E(Ve.data[Re]))Ze++;else{var Je=Ve.data[Re].length;He+=Je,le!==void 0?0<Je&&(Te+=Math.abs(Je-le),le=Je):le=Je}0<Ve.data.length&&(He/=Ve.data.length-Ze),(he===void 0||Te<=he)&&(de===void 0||de<He)&&1.99<He&&(he=Te,ze=ae,de=He)}return{successful:!!(f.delimiter=ze),bestDelimiter:ze}}(N,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess);se.successful?f.delimiter=se.bestDelimiter:(I=!0,f.delimiter=l.DefaultDelimiter),C.meta.delimiter=f.delimiter}var Ae=q(f);return f.preview&&f.header&&Ae.preview++,u=N,b=new M(Ae),C=b.parse(u,B,te),L(),z?{meta:{paused:!0}}:C||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,b.abort(),u=R(f.chunk)?"":u.substring(b.getCharIndex())},this.resume=function(){x.streamer._halted?(z=!1,x.streamer.parseChunk(u,!0)):setTimeout(x.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,b.abort(),C.meta.aborted=!0,R(f.complete)&&f.complete(C),u=""}}function F(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(f){var u,b=(f=f||{}).delimiter,I=f.newline,S=f.comments,U=f.step,W=f.preview,D=f.fastMode,x=u=f.quoteChar===void 0||f.quoteChar===null?'"':f.quoteChar;if(f.escapeChar!==void 0&&(x=f.escapeChar),(typeof b!="string"||-1<l.BAD_DELIMITERS.indexOf(b))&&(b=","),S===b)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<l.BAD_DELIMITERS.indexOf(S))&&(S=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var p=0,P=!1;this.parse=function(z,V,J){if(typeof z!="string")throw new Error("Input must be a string");var C=z.length,T=b.length,E=I.length,L=S.length,G=R(U),ne=[],ie=[],N=[],B=p=0;if(!z)return Fe();if(f.header&&!V){var te=z.split(I)[0].split(b),me=[],se={},Ae=!1;for(var pe in te){var oe=te[pe];R(f.transformHeader)&&(oe=f.transformHeader(oe,pe));var Ee=oe,Le=se[oe]||0;for(0<Le&&(Ae=!0,Ee=oe+"_"+Le),se[oe]=Le+1;me.includes(Ee);)Ee=Ee+"_"+Le;me.push(Ee)}if(Ae){var xe=z.split(I);xe[0]=me.join(b),z=xe.join(I)}}if(D||D!==!1&&z.indexOf(u)===-1){for(var ze=z.split(I),he=0;he<ze.length;he++){if(N=ze[he],p+=N.length,he!==ze.length-1)p+=I.length;else if(J)return Fe();if(!S||N.substring(0,L)!==S){if(G){if(ne=[],Ze(N.split(b)),st(),P)return Fe()}else Ze(N.split(b));if(W&&W<=he)return ne=ne.slice(0,W),Fe(!0)}}return Fe()}for(var le=z.indexOf(b,p),de=z.indexOf(I,p),Ke=new RegExp(F(x)+F(u),"g"),ae=z.indexOf(u,p);;)if(z[p]!==u)if(S&&N.length===0&&z.substring(p,p+L)===S){if(de===-1)return Fe();p=de+E,de=z.indexOf(I,p),le=z.indexOf(b,p)}else if(le!==-1&&(le<de||de===-1))N.push(z.substring(p,le)),p=le+T,le=z.indexOf(b,p);else{if(de===-1)break;if(N.push(z.substring(p,de)),Je(de+E),G&&(st(),P))return Fe();if(W&&ne.length>=W)return Fe(!0)}else for(ae=p,p++;;){if((ae=z.indexOf(u,ae+1))===-1)return J||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:p}),Re();if(ae===C-1)return Re(z.substring(p,ae).replace(Ke,u));if(u!==x||z[ae+1]!==x){if(u===x||ae===0||z[ae-1]!==x){le!==-1&&le<ae+1&&(le=z.indexOf(b,ae+1)),de!==-1&&de<ae+1&&(de=z.indexOf(I,ae+1));var Te=Ve(de===-1?le:Math.min(le,de));if(z.substr(ae+1+Te,T)===b){N.push(z.substring(p,ae).replace(Ke,u)),z[p=ae+1+Te+T]!==u&&(ae=z.indexOf(u,p)),le=z.indexOf(b,p),de=z.indexOf(I,p);break}var He=Ve(de);if(z.substring(ae+1+He,ae+1+He+E)===I){if(N.push(z.substring(p,ae).replace(Ke,u)),Je(ae+1+He+E),le=z.indexOf(b,p),ae=z.indexOf(u,p),G&&(st(),P))return Fe();if(W&&ne.length>=W)return Fe(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:p}),ae++}}else ae++}return Re();function Ze(Me){ne.push(Me),B=p}function Ve(Me){var mt=0;if(Me!==-1){var pt=z.substring(ae+1,Me);pt&&pt.trim()===""&&(mt=pt.length)}return mt}function Re(Me){return J||(Me===void 0&&(Me=z.substring(p)),N.push(Me),p=C,Ze(N),G&&st()),Fe()}function Je(Me){p=Me,Ze(N),N=[],de=z.indexOf(I,p)}function Fe(Me){return{data:ne,errors:ie,meta:{delimiter:b,linebreak:I,aborted:P,truncated:!!Me,cursor:B+(V||0)}}}function st(){U(Fe()),ne=[],ie=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return p}}function O(f){var u=f.data,b=o[u.workerId],I=!1;if(u.error)b.userError(u.error,u.file);else if(u.results&&u.results.data){var S={abort:function(){I=!0,H(u.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(R(b.userStep)){for(var U=0;U<u.results.data.length&&(b.userStep({data:u.results.data[U],errors:u.results.errors,meta:u.results.meta},S),!I);U++);delete u.results}else R(b.userChunk)&&(b.userChunk(u.results,S,u.file),delete u.results)}u.finished&&!I&&H(u.workerId,u.results)}function H(f,u){var b=o[f];R(b.userComplete)&&b.userComplete(u),b.terminate(),delete o[f]}function ee(){throw new Error("Not implemented.")}function q(f){if(typeof f!="object"||f===null)return f;var u=Array.isArray(f)?[]:{};for(var b in f)u[b]=q(f[b]);return u}function Z(f,u){return function(){f.apply(u,arguments)}}function R(f){return typeof f=="function"}return s&&(i.onmessage=function(f){var u=f.data;if(l.WORKER_ID===void 0&&u&&(l.WORKER_ID=u.workerId),typeof u.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(u.input,u.config),finished:!0});else if(i.File&&u.input instanceof File||u.input instanceof Object){var b=l.parse(u.input,u.config);b&&i.postMessage({workerId:l.WORKER_ID,results:b,finished:!0})}}),(_.prototype=Object.create(c.prototype)).constructor=_,(g.prototype=Object.create(c.prototype)).constructor=g,(v.prototype=Object.create(v.prototype)).constructor=v,(m.prototype=Object.create(c.prototype)).constructor=m,l})})(pr);var Zr=pr.exports;const Xr=Qr(Zr),$r="https://will-moore.github.io/ome2024-ngff-challenge/idr-mark.svg",es="https://will-moore.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Un="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let ts={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function bi(t){if(t==="IDR")return $r;let e=ts[t];return e?e==="https://nfdi4bioimage.de/"?es:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function vr(t,e,n={}){Xr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(c=>{let _={...n};for(let g=0;g<r.length;g++)_[r[g]]=c[g];return _}),a=o.filter(c=>{var _;return!((_=c.url)!=null&&_.endsWith(".csv"))}),l={};a.forEach(c=>{if(l[c.url]){console.warn("Removing duplicate URL:",c.url);return}l[c.url]=c}),a=Object.values(l);let d=o.filter(c=>{var _;return(_=c.url)==null?void 0:_.includes(".csv")});e.addCsv(t,d,a.length),e.addRows(a),d.forEach(c=>{let _=c.url;c.csv=_,vr(_,e,c)})}})}async function br(t){return await fetch(t).then(e=>e.json())}function bn(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function ns(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function is(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(yr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),d=0;for(let c=0;c<o;c++){for(let _=0;_<t.length;_++){let g=n[_],v=t[_].data,m=e[_],F=(v[c]-m[0])/(m[1]-m[0]);for(let M=0;M<3;M++){let O=F*g[M]<<0;l[d*4+M]=Math.max(l[d*4+M],O)}}l[d*4+3]=255,d+=1}return performance.now()-a<100&&ss(l,5)[4]<1&&(l=rs(l,2)),l}function rs(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function ss(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function yr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const mn=4,at={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},os=[at.magenta,at.green],ls=[at.red,at.green,at.blue],yi=Object.values(at).slice(0,-2);function as(t){let e;return t<=mn?e=Array(t).fill(!0):e=[...Array(mn).fill(!0),...Array(t-mn).fill(!1)],e}function us(t,e){let n=[];if(t==1)n=[at.white];else if(t==2)n=os;else if(t===3)n=ls;else if(t<=mn)n=yi.slice(0,t);else{n=Array(t).fill(at.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=yi[r]}return n.map(wr)}function wr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class kr{constructor(){this.store=Pn({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await br(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=xt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class fs extends kr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await br(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Er=new kr,Sr=new fs,wi=5;async function qt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await qt(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await qt(s)}}class cs{constructor(e="index",n=!0){this.store=Pn([]),this.selectedRow=Pn(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0;for(let o of r.child_csv)s+=o.image_count||0;return{...r,total_count:s}}):[]}addCsv(e,n,i){n=n.map(s=>({...s,child_csv:[]}));let r;for(let s of this.csvFiles){if(s.url===e){r=s;break}for(let o of s.child_csv){if(o.url===e){r=o;break}for(let a of o.child_csv)if(a.url===e){r=a;break}}}r?(r.image_count=i,r.child_csv=n):(r={url:e,image_count:i,child_csv:n},this.csvFiles.push(r))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,d)=>r["size_"+l]=o[d]),r.dim_count=o.reduce((l,d)=>l+(d>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);Er.addTerms(n);let i=e.map(r=>r.fbbiId);Sr.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var g;const[n,i,r]=await qt(e);let s=[],o=0,a=0,l=!1,d=!0,c={multiscales:n},_=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const v=(g=n[0])==null?void 0:g.datasets[0],m=v==null?void 0:v.path;if(m){const k=await fetch(`${i}/${m}/zarr.json`).then(F=>F.json()).catch(F=>{console.log(`----> Failed to parse ${i}/${m}/zarr.json`,F)});s=k==null?void 0:k.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:c,image_url:_,shape:s,well_count:o,field_count:a,load_failed:l,loaded:d})}async loadRocrateJsonAllRows(){let e=xt(this.store);for(let n=0;n<e.length;n=n+wi){let i=ns(n,Math.min(n+wi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=xt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return xt(this.store)}getRow(e){return xt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Se=new cs;function hs(t){let e,n,i,r,s,o;return{c(){e=y("button"),n=y("span"),n.textContent="^",i=Q(),r=y("span"),r.textContent="^",w(n,"class","acc svelte-17vd65t"),Tt(n,"strong",t[1]),w(r,"class","dec svelte-17vd65t"),Tt(r,"strong",!t[1]),w(e,"class","svelte-17vd65t")},m(a,l){$(a,e,l),h(e,n),h(e,i),h(e,r),s||(o=ve(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&Tt(n,"strong",a[1]),l&2&&Tt(r,"strong",!a[1])},i:Ie,o:Ie,d(a){a&&X(e),s=!1,o()}}}function ds(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class _s extends tt{constructor(e){super(),et(this,e,ds,hs,qe,{toggleAscending:0,sortAscending:1})}}const _n={AUTO:"auto",START:"start",CENTER:"center",END:"end"},it={HORIZONTAL:"horizontal",VERTICAL:"vertical"},jt={OBSERVED:0,REQUESTED:1},gs={[it.VERTICAL]:"top",[it.HORIZONTAL]:"left"},ki={[it.VERTICAL]:"scrollTop",[it.HORIZONTAL]:"scrollLeft"};class ms{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=_n.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case _n.END:l=a;break;case _n.CENTER:l=o-(n-s.size)/2;break;case _n.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const d=this.getTotalSize();return Math.max(0,Math.min(d-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const ps=t=>({}),Ei=t=>({});function Si(t,e,n){const i=t.slice();return i[37]=e[n],i}const vs=t=>({style:t[0]&4,index:t[0]&4}),Ai=t=>({style:t[37].style,index:t[37].index}),bs=t=>({}),Ci=t=>({});function Ii(t,e){let n,i;const r=e[21].item,s=Ln(r,e,e[20],Ai);return{key:t,first:null,c(){n=En(),s&&s.c(),this.first=n},m(o,a){$(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&Mn(s,r,e,e[20],i?Fn(r,e[20],a,vs):Dn(e[20]),Ai)},i(o){i||(ue(s,o),i=!0)},o(o){ge(s,o),i=!1},d(o){o&&X(n),s&&s.d(o)}}}function ys(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,d=Ln(l,t,t[20],Ci);let c=Pe(t[2]);const _=m=>m[0]?m[0](m[37].index):m[37].index;for(let m=0;m<c.length;m+=1){let k=Si(t,c,m),F=_(k);s.set(F,r[m]=Ii(F,k))}const g=t[21].footer,v=Ln(g,t,t[20],Ei);return{c(){e=y("div"),d&&d.c(),n=Q(),i=y("div");for(let m=0;m<r.length;m+=1)r[m].c();o=Q(),v&&v.c(),w(i,"class","virtual-list-inner svelte-dwpad5"),w(i,"style",t[4]),w(e,"class","virtual-list-wrapper svelte-dwpad5"),w(e,"style",t[3])},m(m,k){$(m,e,k),d&&d.m(e,null),h(e,n),h(e,i);for(let F=0;F<r.length;F+=1)r[F]&&r[F].m(i,null);h(e,o),v&&v.m(e,null),t[22](e),a=!0},p(m,k){d&&d.p&&(!a||k[0]&1048576)&&Mn(d,l,m,m[20],a?Fn(l,m[20],k,bs):Dn(m[20]),Ci),k[0]&1048581&&(c=Pe(m[2]),Mt(),r=mr(r,k,_,1,m,c,s,i,Kr,Ii,null,Si),Dt()),(!a||k[0]&16)&&w(i,"style",m[4]),v&&v.p&&(!a||k[0]&1048576)&&Mn(v,g,m,m[20],a?Fn(g,m[20],k,ps):Dn(m[20]),Ei),(!a||k[0]&8)&&w(e,"style",m[3])},i(m){if(!a){ue(d,m);for(let k=0;k<c.length;k+=1)ue(r[k]);ue(v,m),a=!0}},o(m){ge(d,m);for(let k=0;k<r.length;k+=1)ge(r[k]);ge(v,m),a=!1},d(m){m&&X(e),d&&d.d(m);for(let k=0;k<r.length;k+=1)r[k].d();v&&v.d(m),t[22](null)}}}const ws=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function ks(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:d=null}=e,{stickyIndices:c=null}=e,{getKey:_=null}=e,{scrollDirection:g=it.VERTICAL}=e,{scrollOffset:v=null}=e,{scrollToIndex:m=null}=e,{scrollToAlignment:k=null}=e,{scrollToBehaviour:F="instant"}=e,{overscanCount:M=3}=e;const O=Br(),H=new ms({itemCount:a,itemSize:l,estimatedItemSize:J()});let ee=!1,q,Z=[],R={offset:v||m!=null&&Z.length&&P(m)||0,scrollChangeReason:jt.REQUESTED},f=R,u={scrollToIndex:m,scrollToAlignment:k,scrollOffset:v,itemCount:a,itemSize:l,estimatedItemSize:d},b={},I="",S="";D(),sn(()=>{n(18,ee=!0),q.addEventListener("scroll",z,ws),v!=null?x(v):m!=null&&x(P(m))}),Jn(()=>{ee&&q.removeEventListener("scroll",z)});function U(){if(!ee)return;const E=u.scrollToIndex!==m||u.scrollToAlignment!==k,L=u.itemCount!==a||u.itemSize!==l||u.estimatedItemSize!==d;L&&(H.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:J()}),p()),u.scrollOffset!==v?n(19,R={offset:v||0,scrollChangeReason:jt.REQUESTED}):typeof m=="number"&&(E||L)&&n(19,R={offset:P(m,k,a),scrollChangeReason:jt.REQUESTED}),u={scrollToIndex:m,scrollToAlignment:k,scrollOffset:v,itemCount:a,itemSize:l,estimatedItemSize:d}}function W(){if(!ee)return;const{offset:E,scrollChangeReason:L}=R;(f.offset!==E||f.scrollChangeReason!==L)&&D(),f.offset!==E&&L===jt.REQUESTED&&x(E),f=R}function D(){const{offset:E}=R,{start:L,stop:G}=H.getVisibleRange({containerSize:g===it.VERTICAL?s:o,offset:E,overscanCount:M});let ne=[];const ie=H.getTotalSize();g===it.VERTICAL?(n(3,I=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,S=`flex-direction:column;height:${ie}px;`)):(n(3,I=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,S=`min-height:100%;width:${ie}px;`));const N=c!=null&&c.length!==0;if(N)for(let B=0;B<c.length;B++){const te=c[B];ne.push({index:te,style:C(te,!0)})}if(L!==void 0&&G!==void 0){for(let B=L;B<=G;B++)N&&c.includes(B)||ne.push({index:B,style:C(B,!1)});O("itemsUpdated",{start:L,end:G})}n(2,Z=ne)}function x(E){"scroll"in q?q.scroll({[gs[g]]:E,behavior:F}):n(1,q[ki[g]]=E,q)}function p(E=0){b={},H.resetItem(E),D()}function P(E,L=k,G=a){return(E<0||E>=G)&&(E=0),H.getUpdatedOffsetForIndex({align:L,containerSize:g===it.VERTICAL?s:o,currentOffset:R.offset||0,targetIndex:E})}function z(E){const L=V();L<0||R.offset===L||E.target!==q||(n(19,R={offset:L,scrollChangeReason:jt.OBSERVED}),O("afterScroll",{offset:L,event:E}))}function V(){return q[ki[g]]}function J(){return d||typeof l=="number"&&l||50}function C(E,L){if(b[E])return b[E];const{size:G,offset:ne}=H.getSizeAndPositionForIndex(E);let ie;return g===it.VERTICAL?(ie=`left:0;width:100%;height:${G}px;`,L?ie+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ne}px;margin-bottom:${-(ne+G)}px;`:ie+=`position:absolute;top:${ne}px;`):(ie=`top:0;width:${G}px;`,L?ie+=`position:sticky;z-index:1;left:0;margin-left:${ne}px;margin-right:${-(ne+G)}px;`:ie+=`position:absolute;height:100%;left:${ne}px;`),b[E]=ie}function T(E){Ft[E?"unshift":"push"](()=>{q=E,n(1,q)})}return t.$$set=E=>{"height"in E&&n(5,s=E.height),"width"in E&&n(6,o=E.width),"itemCount"in E&&n(7,a=E.itemCount),"itemSize"in E&&n(8,l=E.itemSize),"estimatedItemSize"in E&&n(9,d=E.estimatedItemSize),"stickyIndices"in E&&n(10,c=E.stickyIndices),"getKey"in E&&n(0,_=E.getKey),"scrollDirection"in E&&n(11,g=E.scrollDirection),"scrollOffset"in E&&n(12,v=E.scrollOffset),"scrollToIndex"in E&&n(13,m=E.scrollToIndex),"scrollToAlignment"in E&&n(14,k=E.scrollToAlignment),"scrollToBehaviour"in E&&n(15,F=E.scrollToBehaviour),"overscanCount"in E&&n(16,M=E.overscanCount),"$$scope"in E&&n(20,r=E.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&U(),t.$$.dirty[0]&524288&&W(),t.$$.dirty[0]&263264&&ee&&p(0)},[_,q,Z,I,S,s,o,a,l,d,c,g,v,m,k,F,M,p,ee,R,r,i,T]}class Es extends tt{constructor(e){super(),et(this,e,ks,ys,qe,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Ne()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Ne()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Ne()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Ne()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Ne()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Ne()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Ne()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Ne()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Ne()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Ne()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Ne()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Ne()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Ne()}get recomputeSizes(){return this.$$.ctx[17]}}class on extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Gn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const Ss="modulepreload",As=function(t){return"https://will-moore.github.io/ome2024-ngff-challenge/"+t},Ti={},Bt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=As(a),a in Ti)return;Ti[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":Ss,l||(c.as="script"),c.crossOrigin="",c.href=a,o&&c.setAttribute("nonce",o),document.head.appendChild(c),l)return new Promise((_,g)=>{c.addEventListener("load",_),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var We;class Ar{constructor(e,n,i){Ce(this,We);typeof e=="number"?we(this,We,new Uint8Array(e)):e instanceof ArrayBuffer?we(this,We,new Uint8Array(e,n,i)):we(this,We,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return Y(this,We).byteOffset}get byteLength(){return Y(this,We).byteLength}get buffer(){return Y(this,We).buffer}get length(){return Y(this,We).length}get(e){let n=Y(this,We)[e];return typeof n=="number"?n!==0:n}set(e,n){Y(this,We)[e]=n?1:0}fill(e){Y(this,We).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}We=new WeakMap;var Ot;class Yn{constructor(e,n,i,r){re(this,"_data");re(this,"chars");Ce(this,Ot);if(this.chars=e,we(this,Ot,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(Y(this,Ot).encode(n))}fill(e){const n=Y(this,Ot).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ot=new WeakMap;var Oe;const ti=class ti{constructor(e,n,i,r){Ce(this,Oe);re(this,"chars");if(this.chars=e,typeof n=="number")we(this,Oe,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),we(this,Oe,new Int32Array(n,i,r));else{const s=n,o=new ti(e,1);we(this,Oe,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*Y(o,Oe)}()))}}get BYTES_PER_ELEMENT(){return Y(this,Oe).BYTES_PER_ELEMENT*this.chars}get byteLength(){return Y(this,Oe).byteLength}get byteOffset(){return Y(this,Oe).byteOffset}get buffer(){return Y(this,Oe).buffer}get length(){return Y(this,Oe).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(Y(this,Oe)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=Y(this,Oe).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=Y(this,Oe).subarray(0,this.chars);for(let i=1;i<this.length;i++)Y(this,Oe).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Oe=new WeakMap;let Kt=ti;function ln(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Ri(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const Cs={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Ar},Is=/v2:([US])(\d+)/;function Cr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Is);if(e){let[,i,r]=e;return(i==="U"?Kt:Yn).bind(null,Number(r))}let n=Cs[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function gt(t,e){return(e==="C"?Ts:Rs)(t)}function Ts(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Rs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function zs({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function jn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Os=/^([<|>])(.*)$/;function Ls(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Os);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Fs(t,e={}){let n=[],i=Ls(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Ms(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Ds(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Ns(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Ir(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const zi=Ps();function Ps(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Oi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Jt,lt,Gt,Yt,Lt;const ni=class ni{constructor(e,n){re(this,"kind","array_to_bytes");Ce(this,Jt);Ce(this,lt);Ce(this,Gt);Ce(this,Yt);Ce(this,Lt);we(this,Lt,e==null?void 0:e.endian),we(this,lt,Cr(n.data_type)),we(this,Yt,n.shape),we(this,Jt,gt(n.shape,jn(n.codecs)));const i=new(Y(this,lt))(0);we(this,Gt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new ni(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return zi&&Y(this,Lt)==="big"&&Ri(n,Oi(Y(this,lt))),n}decode(e){return zi&&Y(this,Lt)==="big"&&Ri(e,Oi(Y(this,lt))),{data:new(Y(this,lt))(e.buffer,e.byteOffset,e.byteLength/Y(this,Gt)),shape:Y(this,Yt),stride:Y(this,Jt)}}};Jt=new WeakMap,lt=new WeakMap,Gt=new WeakMap,Yt=new WeakMap,Lt=new WeakMap;let yn=ni;class Qn{constructor(){re(this,"kind","bytes_to_bytes")}static fromConfig(){return new Qn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Us(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function js(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Qt,Zt;const ii=class ii{constructor(e={}){re(this,"configuration");re(this,"kind","array_to_bytes");Ce(this,Qt);Ce(this,Zt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:d=!0}=e;let c=e.separators;c||(l?c=[", ",": "]:c=[",",":"]),we(this,Qt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:c,sort_keys:a}),we(this,Zt,{strict:d})}static fromConfig(e){return new ii(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=Y(this,Qt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Us),a&&l.push(js);const d=Array.from(e.data);d.push("|O"),d.push(e.shape);let c;l.length&&(c=(g,v)=>{let m=v;for(let k of l)m=k(g,m);return m});let _=JSON.stringify(d,c,n);return r&&(_=_.replace(/[\u007F-\uFFFF]/g,g=>{const v=`0000${g.charCodeAt(0).toString(16)}`;return`\\u${v.substring(v.length-4)}`})),new TextEncoder().encode(_)}decode(e){const{strict:n}=Y(this,Zt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=ln(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=gt(r,"C");return{data:i,shape:r,stride:s}}};Qt=new WeakMap,Zt=new WeakMap;let Bn=ii;function Li(t){return t instanceof Ar||t instanceof Yn||t instanceof Kt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Bs(t,e){let n;return t.data instanceof Yn||t.data instanceof Kt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:gt(t.shape,e)}}function xs(t,e){let n=Bs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Li(t.data),a=Li(n.data);for(let l=0;l<r;l++){let d=0;for(let c=0;c<i;c++)d+=s[c]*n.stride[c];a[d]=o[l],s[0]+=1;for(let c=0;c<i;c++)if(s[c]===t.shape[c]){if(c+1===i)break;s[c]=0,s[c+1]+=1}}return n}function Vs(t){if(!t.stride)return"C";let e=gt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Zn{constructor(e){re(this,"configuration");re(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Zn(e)}encode(e){var n,i;return Vs(e)===((n=this.configuration)==null?void 0:n.order)?e:xs(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Xt,$t;const ri=class ri{constructor(e){re(this,"kind","array_to_bytes");Ce(this,Xt);Ce(this,$t);we(this,Xt,e),we(this,$t,gt(e,"C"))}static fromConfig(e,n){return new ri(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:Y(this,Xt),stride:Y(this,$t)}}};Xt=new WeakMap,$t=new WeakMap;let xn=ri;function Ws(){return new Map().set("blosc",()=>Bt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Bt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Bt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Bt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Bt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Zn).set("bytes",()=>yn).set("crc32c",()=>Qn).set("vlen-utf8",()=>xn).set("json2",()=>Bn)}const Hs=Ws();function Vn(t){let e;return{async encode(n){e||(e=await Fi(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Fi(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Fi(t){let e=t.codecs.map(async s=>{var a;let o=await((a=Hs.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!qs(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=yn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function qs(t){return t.data_type!=="v2:object"}const Mi=18446744073709551615n;function Ks(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,d)=>l/i.chunk_shape[d]),o=Vn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let d=l.map((O,H)=>Math.floor(O/s[H])),c=t.resolve(n(d)).path,_;if(c in a)_=a[c];else{let O=4,H=16*s.reduce((q,Z)=>q*Z,1),ee=await r(c,{suffixLength:H+O});_=a[c]=ee?await o.decode(ee):null}if(_===null)return;let{data:g,shape:v,stride:m}=_,k=l.map((O,H)=>O%v[H]).reduce((O,H,ee)=>O+H*m[ee],0),F=g[k],M=g[k+1];if(!(F===Mi&&M===Mi))return r(c,{offset:Number(F),length:Number(M)})}}class Nt{constructor(e,n="/"){re(this,"store");re(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Nt(this.store,new URL(e,n).pathname)}}var en;class Xn extends Nt{constructor(n,i,r){super(n,i);re(this,"kind","group");Ce(this,en);we(this,en,r)}get attrs(){return Y(this,en).attributes}}en=new WeakMap;const Vt=Symbol("zarrita.context");function Js(t){return t[Vt]}function Gs(t,e){let{configuration:n}=e.codecs.find(Ns)??{},i={encode_chunk_key:zs(e.chunk_key_encoding),TypedArray:Cr(e.data_type),fill_value:e.fill_value};if(n){let s=jn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Vn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return gt(o,a??s)},get_chunk_bytes:Ks(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=jn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Vn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return gt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var cr,hr,_t,dr;let wn=(dr=class extends(hr=Nt,cr=Vt,hr){constructor(n,i,r){super(n,i);re(this,"kind","array");Ce(this,_t);re(this,cr);we(this,_t,{...r,fill_value:Ir(r)}),this[Vt]=Gs(this,r)}get attrs(){return Y(this,_t).attributes}get shape(){return Y(this,_t).shape}get chunks(){return this[Vt].chunk_shape}get dtype(){return Y(this,_t).data_type}async getChunk(n,i){let r=this[Vt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,d)=>l*d,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Ds(this.dtype,n)}},_t=new WeakMap,dr),Sn=Ys();function Ys(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Qs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?ln(e):{}}async function Zs(t,e={}){let n="store"in t?t:new Nt(t),i={};return(e.attrs??!0)&&(i=await Qs(n)),e.kind==="array"?Di(n,i):e.kind==="group"?Ni(n,i):Di(n,i).catch(r=>{if(r instanceof on)return Ni(n,i);throw r})}async function Di(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new on("v2 array",{cause:new Gn(n)});return Sn.increment(t.store,"v2"),new wn(t.store,t.path,Fs(ln(i),e))}async function Ni(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new on("v2 group",{cause:new Gn(n)});return Sn.increment(t.store,"v2"),new Xn(t.store,t.path,Ms(ln(i),e))}async function Xs(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new on("v3 array or group",{cause:new Gn(n)});let r=ln(i);return r.node_type==="array"&&(r.fill_value=Ir(r)),r.node_type==="array"?new wn(e,t.path,r):new Xn(e,t.path,r)}async function $s(t,e={}){let n="store"in t?t:new Nt(t),i=await Xs(n);if(Sn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof wn||e.kind==="group"&&i instanceof Xn)return i;let r=i instanceof wn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function dt(t,e={}){let n="store"in t?t.store:t,i=Sn.version_max(n),r=i==="v2"?dt.v2:dt.v3,s=i==="v2"?dt.v3:dt.v2;return r(t,e).catch(o=>{if(o instanceof on)return s(t,e);throw o})}dt.v2=Zs;dt.v3=$s;function*eo(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*to(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function no({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Wn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function io(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class $n extends Error{constructor(e){super(e),this.name="IndexError"}}function ro(t,e){throw new $n(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function so(t){throw new $n(`index out of bounds for dimension with length ${t}`)}function oo(){throw new $n("only slices with step >= 1 are supported")}function lo(t,e){t.length>e.length&&ro(t,e)}function ao(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&so(e),t}class uo{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){re(this,"dim_sel");re(this,"dim_len");re(this,"dim_chunk_len");re(this,"nitems");e=ao(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Pi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){re(this,"start");re(this,"stop");re(this,"step");re(this,"dim_len");re(this,"dim_chunk_len");re(this,"nitems");re(this,"nchunks");const[r,s,o]=no(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&oo(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of eo(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const v=(r-this.start)%this.step;v&&(l+=this.step-v),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const d=this.stop>s?o:this.stop-r,c=[l,d,this.step],_=Math.ceil((d-l)/this.step),g=[a,a+_,1];yield{dim_chunk_ix:i,dim_chunk_sel:c,dim_out_sel:g}}}}function fo(t,e){let n=[];return t===null?n=e.map(i=>Wn(null)):Array.isArray(t)&&(n=t.map(i=>i??Wn(null))),lo(n,e),n}class co{constructor({selection:e,shape:n,chunk_shape:i}){re(this,"dim_indexers");re(this,"shape");this.dim_indexers=fo(e,n).map((r,s)=>new(typeof r=="number"?uo:Pi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Pi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of to(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function ho(t,e){return"get"in t?t.get(e):t[e]}async function _o(t,e,n,i){var l;let r=Js(t),s=new co({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((d,c)=>d*c,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??io();for(const{chunk_coords:d,mapping:c}of s)a.add(async()=>{let{data:_,shape:g,stride:v}=await t.getChunk(d,n.opts),m=i.prepare(_,g,v);i.set_from_chunk(o,m,c)});return await a.onIdle(),s.shape.length===0?ho(o.data,0):o}function ei(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return ei(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function On(t){return globalThis.Array.isArray(t.data)?{data:ei(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function go(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function mo(t,e){if(globalThis.Array.isArray(t.data))return ei([e]);let n=go(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const po={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=On(t);Hn(i,e,mo(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=On(t);pn(i,On(e),i.bytes_per_element,n)}};async function vo(t,e=null,n={}){return _o(t,e,n,po)}function Tr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Hn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const g=t.data.subarray(o*r*i);Hn({data:g,stride:a},s,n,i);return}const[l,d,c]=r,_=Tr(l,d,c);if(s.length===0){for(let g=0;g<_;g++)t.data.set(n,o*(l+c*g)*i);return}for(let g=0;g<_;g++){const v=t.data.subarray(o*(l+c*g)*i);Hn({data:v,stride:a},s,n,i)}}function pn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...d]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}pn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let M=r.from*n;t.data.set(e.data.subarray(M,M+n),0);return}pn(t,{data:e.data.subarray(l*r.from*n),stride:d},n,s);return}const[c,_,g]=r.to,[v,m,k]=r.from,F=Tr(c,_,g);if(s.length===0){if(g===1&&k===1&&o===1&&l===1){let M=v*n,O=F*n;t.data.set(e.data.subarray(M,M+O),c*n);return}for(let M=0;M<F;M++){let O=l*(v+k*M)*n;t.data.set(e.data.subarray(O,O+n),o*(c+g*M)*n)}return}for(let M=0;M<F;M++)pn({data:t.data.subarray(o*(c+M*g)*n),stride:a},{data:e.data.subarray(l*(v+M*k)*n),stride:d},n,s)}function Rr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function bo(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Ui(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function ji(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function yo(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Rr(t,o-e,o,n)}var tn,nn,rn,qn;class wo{constructor(e,n={}){Ce(this,rn);re(this,"url");Ce(this,tn);Ce(this,nn);this.url=e,we(this,tn,n.overrides??{}),we(this,nn,n.useSuffixRequest??!1)}async get(e,n={}){let i=Ui(this.url,e).href,r=await fetch(i,Rn(this,rn,qn).call(this,n));return ji(r)}async getRange(e,n,i={}){let r=Ui(this.url,e),s=Rn(this,rn,qn).call(this,i),o;return"suffixLength"in n?o=await yo(r,n.suffixLength,s,Y(this,nn)):o=await Rr(r,n.offset,n.length,s),ji(o)}}tn=new WeakMap,nn=new WeakMap,rn=new WeakSet,qn=function(e){return bo(Y(this,tn),e)};function ko(t){let e,n;return{c(){e=y("div"),n=y("canvas"),ce(n,"width",t[3]+"px"),ce(n,"height",t[4]+"px"),ce(n,"background-color","lightgrey"),w(n,"height",t[2]),w(n,"width",t[1]),w(n,"class","svelte-lwhhyg"),w(e,"class","canvasWrapper svelte-lwhhyg"),ce(e,"width",t[3]+"px"),ce(e,"height",t[4]+"px"),Tt(e,"spinner",t[5])},m(i,r){$(i,e,r),h(e,n),t[12](n)},p(i,[r]){r&8&&ce(n,"width",i[3]+"px"),r&16&&ce(n,"height",i[4]+"px"),r&4&&w(n,"height",i[2]),r&2&&w(n,"width",i[1]),r&8&&ce(e,"width",i[3]+"px"),r&16&&ce(e,"height",i[4]+"px"),r&32&&Tt(e,"spinner",i[5])},i:Ie,o:Ie,d(i){i&&X(e),t[12](null)}}}function Eo(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,d,c=a,_=a;o>1?_=c/o:o<1&&(c=_*o);let g=c,v=_,m=!0;const k=new AbortController;async function F(){var z;let O=r.multiscales[0].datasets.map(V=>V.path),H=r.multiscales[0].axes.map(V=>V.name),ee=O.at(-1);s!=null&&s<O.length&&(ee=O[s]);const q=new wo(i+"/"+ee),Z=await dt.v3(q,{kind:"array"});let R=H.indexOf("c"),f=Z.shape;if(f.at(-1)*f.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",f,i);return}let u=f.length,b=f[R]||1,I,S;(z=r==null?void 0:r.omero)!=null&&z.channels?(I=r.omero.channels.map(V=>V.active),S=r.omero.channels.map(V=>wr(V.color))):(I=as(b),S=us(b,I)),S=S.filter((V,J)=>I[J]);let W=I.reduce((V,J,C)=>(J&&V.push(C),V),[]).map(V=>{let J=f.map((C,T)=>T==R?V:T>=u-2?Wn(0,C):H[T]=="z"||H[T]=="t"?parseInt(C/2+""):0);return vo(Z,J,{opts:{signal:k.signal}})}),D=await Promise.all(W),x=D.map(V=>yr(V)),p=is(D,x,S);n(1,c=f.at(-1)),n(2,_=f.at(-2));let P=c/a;_>c&&(P=_/a),n(3,g=c/P),n(4,v=_/P),setTimeout(()=>{const V=d.getContext("2d");n(5,m=!1),V.putImageData(new ImageData(p,c,_),0,0)},100)}sn(()=>{F()}),Jn(()=>{k.abort()});function M(O){Ft[O?"unshift":"push"](()=>{d=O,n(0,d)})}return t.$$set=O=>{"source"in O&&n(6,i=O.source),"attrs"in O&&n(7,r=O.attrs),"thumbDatasetIndex"in O&&n(8,s=O.thumbDatasetIndex),"thumbAspectRatio"in O&&n(9,o=O.thumbAspectRatio),"cssSize"in O&&n(10,a=O.cssSize),"max_size"in O&&n(11,l=O.max_size)},[d,c,_,g,v,m,i,r,s,o,a,l,M]}class zr extends tt{constructor(e){super(),et(this,e,Eo,ko,qe,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function Bi(t,e,n){const i=t.slice();return i[11]=e[n],i}function xi(t){let e,n;return e=new zr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Xe(e.$$.fragment)},m(i,r){Ye(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Qe(e,i)}}}function Vi(t){let e,n,i,r,s=t[0].source+"",o,a,l=t[0].csv&&Wi(t);return{c(){e=y("div"),n=j(`Data
        `),l&&l.c(),i=j(`
        provided by `),r=y("strong"),o=j(s),a=j("."),ce(r,"color","grey")},m(d,c){$(d,e,c),h(e,n),l&&l.m(e,null),h(e,i),h(e,r),h(r,o),h(e,a)},p(d,c){d[0].csv?l?l.p(d,c):(l=Wi(d),l.c(),l.m(e,i)):l&&(l.d(1),l=null),c&1&&s!==(s=d[0].source+"")&&ye(o,s)},d(d){d&&X(e),l&&l.d()}}}function Wi(t){var o;let e,n,i=((o=t[0].csv)==null?void 0:o.split("/").pop().replace(".csv",""))+"",r,s;return{c(){e=j(`from collection
          `),n=y("a"),r=j(i),w(n,"title","Show collection in a new tab"),w(n,"href",s=Ji(t[0])),w(n,"target","_blank")},m(a,l){$(a,e,l),$(a,n,l),h(n,r)},p(a,l){var d;l&1&&i!==(i=((d=a[0].csv)==null?void 0:d.split("/").pop().replace(".csv",""))+"")&&ye(r,i),l&1&&s!==(s=Ji(a[0]))&&w(n,"href",s)},d(a){a&&(X(e),X(n))}}}function Hi(t){let e,n,i,r,s,o;return{c(){e=j("Browse "),n=y("a"),i=j("Original data"),o=j("."),w(n,"title",r="Link to original data: "+t[0].origin),w(n,"href",s=t[0].origin),w(n,"target","_blank")},m(a,l){$(a,e,l),$(a,n,l),h(n,i),$(a,o,l)},p(a,l){l&1&&r!==(r="Link to original data: "+a[0].origin)&&w(n,"title",r),l&1&&s!==(s=a[0].origin)&&w(n,"href",s)},d(a){a&&(X(e),X(n),X(o))}}}function qi(t){let e=t[11].toUpperCase()+"",n,i,r=t[0][`size_${t[11]}`]+"",s,o;return{c(){n=j(e),i=j(":"),s=j(r),o=j("  ")},m(a,l){$(a,n,l),$(a,i,l),$(a,s,l),$(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[11]}`]+"")&&ye(s,r)},d(a){a&&(X(n),X(i),X(s),X(o))}}}function Ki(t){let e,n=t[0][`size_${t[11]}`]!==void 0&&qi(t);return{c(){n&&n.c(),e=En()},m(i,r){n&&n.m(i,r),$(i,e,r)},p(i,r){i[0][`size_${i[11]}`]!==void 0?n?n.p(i,r):(n=qi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&X(e),n&&n.d(i)}}}function So(t){let e,n,i=bn(t[0].written)+"",r;return{c(){e=y("div"),n=j("Data size: "),r=j(i)},m(s,o){$(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=bn(s[0].written)+"")&&ye(r,i)},d(s){s&&X(e)}}}function Ao(t){let e,n,i=t[0].shards+"",r;return{c(){e=y("div"),n=j("Shard shape: "),r=j(i)},m(s,o){$(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&ye(r,i)},d(s){s&&X(e)}}}function Co(t){let e,n,i=t[0].chunks+"",r;return{c(){e=y("div"),n=j("Chunk shape: "),r=j(i)},m(s,o){$(s,e,o),h(e,n),h(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&ye(r,i)},d(s){s&&X(e)}}}function Io(t){let e,n,i,r,s,o,a=Gi(t[0].url)+"",l,d,c,_=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",g,v,m=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",k,F,M,O,H,ee,q,Z,R,f,u,b,I,S,U,W,D=t[3]&&xi(t),x=t[0].source&&Vi(t),p=t[0].origin&&Hi(t),P=Pe(["t","c","z","y","x"]),z=[];for(let T=0;T<5;T+=1)z[T]=Ki(Bi(t,P,T));function V(T,E){return T[2]=="chunk_pixels"?Co:T[2]=="shard_pixels"?Ao:So}let J=V(t),C=J(t);return{c(){e=y("div"),n=y("div"),D&&D.c(),i=Q(),r=y("div"),s=y("div"),o=y("strong"),l=j(a),d=Q(),c=y("div"),g=Q(),v=y("div"),k=Q(),x&&x.c(),F=Q(),M=y("div"),O=j("Open in "),H=y("a"),ee=j("OME-Validator."),R=Q(),p&&p.c(),f=Q(),u=y("div"),b=j(`Image size:
      `);for(let T=0;T<5;T+=1)z[T].c();I=Q(),C.c(),w(n,"class","thumbWrapper svelte-1kl3tsw"),w(H,"title",q="Open in Validator: "+t[0].url),w(H,"href",Z="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),w(H,"target","_blank"),w(e,"class","zarr-list-item svelte-1kl3tsw")},m(T,E){$(T,e,E),h(e,n),D&&D.m(n,null),h(e,i),h(e,r),h(r,s),h(s,o),h(o,l),h(r,d),h(r,c),c.innerHTML=_,h(r,g),h(r,v),v.innerHTML=m,h(r,k),x&&x.m(r,null),h(r,F),h(r,M),h(M,O),h(M,H),h(H,ee),h(M,R),p&&p.m(M,null),h(r,f),h(r,u),h(u,b);for(let L=0;L<5;L+=1)z[L]&&z[L].m(u,null);h(r,I),C.m(r,null),S=!0,U||(W=ve(n,"click",t[8]),U=!0)},p(T,[E]){if(T[3]?D?(D.p(T,E),E&8&&ue(D,1)):(D=xi(T),D.c(),ue(D,1),D.m(n,null)):D&&(Mt(),ge(D,1,1,()=>{D=null}),Dt()),(!S||E&1)&&a!==(a=Gi(T[0].url)+"")&&ye(l,a),(!S||E&3)&&_!==(_=(T[0].name?T[0].name.replaceAll(T[1],`<mark>${T[1]}</mark>`):"")+"")&&(c.innerHTML=_),(!S||E&130)&&m!==(m=T[7].replaceAll(T[1],`<mark>${T[1]}</mark>`)+"")&&(v.innerHTML=m),T[0].source?x?x.p(T,E):(x=Vi(T),x.c(),x.m(r,F)):x&&(x.d(1),x=null),(!S||E&1&&q!==(q="Open in Validator: "+T[0].url))&&w(H,"title",q),(!S||E&1&&Z!==(Z="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+T[0].url))&&w(H,"href",Z),T[0].origin?p?p.p(T,E):(p=Hi(T),p.c(),p.m(M,null)):p&&(p.d(1),p=null),E&1){P=Pe(["t","c","z","y","x"]);let L;for(L=0;L<5;L+=1){const G=Bi(T,P,L);z[L]?z[L].p(G,E):(z[L]=Ki(G),z[L].c(),z[L].m(u,null))}for(;L<5;L+=1)z[L].d(1)}J===(J=V(T))&&C?C.p(T,E):(C.d(1),C=J(T),C&&(C.c(),C.m(r,null)))},i(T){S||(ue(D),S=!0)},o(T){ge(D),S=!1},d(T){T&&X(e),D&&D.d(),x&&x.d(),p&&p.d(),Rt(z,T),C.d(),U=!1,W()}}}function Ji(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Gi(t){return t.split("/").pop()}function To(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,d,c=1;const _=new AbortController;if(r.size_x&&r.size_y){let v=Math.max(r.size_x,r.size_y);for(d=0;v>256;)d+=1,v=v/2;c=r.size_x/r.size_y}function g(){console.log("Clicked on thumbnail"),Se.setSelectedRow(r)}return sn(async()=>{let v=r.url;r.series0!==void 0&&(v+="/"+r.series0);let m=await qt(v,_.signal);n(3,a=m[0]),n(4,l=m[1]),m[2]}),Jn(()=>{_.abort()}),t.$$set=v=>{"rowData"in v&&n(0,r=v.rowData),"textFilter"in v&&n(1,s=v.textFilter),"sortedBy"in v&&n(2,o=v.sortedBy)},t.$$.update=()=>{var v;t.$$.dirty&3&&n(7,i=s!=""&&((v=r.description)!=null&&v.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,d,c,i,g]}class Ro extends tt{constructor(e){super(),et(this,e,To,Io,qe,{rowData:0,textFilter:1,sortedBy:2})}}function zo(t){let e,n,i,r;return n=new Ro({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=y("div"),Xe(n.$$.fragment),w(e,"slot","item"),w(e,"style",i=t[12]),w(e,"class","row svelte-1xvcjxw")},m(s,o){$(s,e,o),Ye(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&w(e,"style",i)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){ge(n.$$.fragment,s),r=!1},d(s){s&&X(e),Qe(n)}}}function Oo(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,d;return rt(t[8]),rt(t[9]),s=new Es({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[zo,({style:c,index:_})=>({12:c,13:_}),({style:c,index:_})=>(c?4096:0)|(_?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=y("div"),Xe(s.$$.fragment),w(r,"class","imageListContainer svelte-1xvcjxw"),ce(r,"height",o)},m(c,_){$(c,r,_),Ye(s,r,null),t[10](r),a=!0,l||(d=[ve(window,"resize",t[8]),ve(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(c,[_]){_&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,c[4]),i=setTimeout(n,100));const g={};_&32&&(g.height=c[5]),_&1&&(g.itemCount=c[0].length),_&28679&&(g.$$scope={dirty:_,ctx:c}),s.$set(g),_&32&&o!==(o=`${c[5]}px`)&&ce(r,"height",o)},i(c){a||(ue(s.$$.fragment,c),a=!0)},o(c){ge(s.$$.fragment,c),a=!1},d(c){c&&X(r),Qe(s),t[10](null),l=!1,$e(d)}}}function Lo(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(k){return r[k].url}let l,d=0,c=0;function _(k){let M=l.offsetTop-20;k.detail.offset-c<0&&d>M&&n(4,d-=1),c=k.detail.offset}function g(){n(5,i=window.innerHeight)}function v(){n(4,d=window.pageYOffset)}function m(k){Ft[k?"unshift":"push"](()=>{l=k,n(3,l)})}return t.$$set=k=>{"tableRows"in k&&n(0,r=k.tableRows),"textFilter"in k&&n(1,s=k.textFilter),"sortedBy"in k&&n(2,o=k.sortedBy)},n(5,i=0),[r,s,o,l,d,i,a,_,g,v,m]}class Fo extends tt{constructor(e){super(),et(this,e,Lo,Oo,qe,{tableRows:0,textFilter:1,sortedBy:2})}}function Yi(t){let e,n;return e=new zr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Xe(e.$$.fragment)},m(i,r){Ye(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Qe(e,i)}}}function Mo(t){let e,n,i=t[0]&&Yi(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),$(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&ue(i,1)):(i=Yi(r),i.c(),ue(i,1),i.m(e.parentNode,e)):i&&(Mt(),ge(i,1,1,()=>{i=null}),Dt())},i(r){n||(ue(i),n=!0)},o(r){ge(i),n=!1},d(r){r&&X(e),i&&i.d(r)}}}function Do(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return sn(async()=>{let l=await qt(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class No extends tt{constructor(e){super(),et(this,e,Do,Mo,qe,{rowData:4})}}function Qi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Zi(t){let e,n;return e=new No({props:{rowData:t[1]}}),{c(){Xe(e.$$.fragment)},m(i,r){Ye(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Qe(e,i)}}}function Xi(t){let e,n,i=t[2]&&Zi(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),$(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&ue(i,1)):(i=Zi(r),i.c(),ue(i,1),i.m(e.parentNode,e)):i&&(Mt(),ge(i,1,1,()=>{i=null}),Dt())},i(r){n||(ue(i),n=!0)},o(r){ge(i),n=!1},d(r){r&&X(e),i&&i.d(r)}}}function $i(t){let e,n=Pe(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=er(Qi(t,n,r));return{c(){e=y("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){$(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Pe(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=Qi(r,n,o);i[o]?i[o].p(a,s):(i[o]=er(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&X(e),Rt(i,r)}}}function er(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=y("tr"),n=y("td"),r=j(i),s=y("td"),a=j(o)},m(l,d){$(l,e,d),h(e,n),h(n,r),h(e,s),h(s,a)},p(l,d){d&2&&i!==(i=l[5]+"")&&ye(r,i),d&2&&o!==(o=l[6]+"")&&ye(a,o)},d(l){l&&X(e)}}}function Po(t){let e,n,i,r,s=t[2],o,a,l,d,c=Xi(t),_=t[1]&&$i(t);return{c(){e=y("div"),n=y("button"),n.textContent="×",i=Q(),r=y("div"),c.c(),o=Q(),_&&_.c(),w(n,"class","close svelte-1g3sjso"),w(n,"title","Close"),w(r,"class","scrollable svelte-1g3sjso"),w(e,"id","mypopover"),w(e,"popover",""),w(e,"class","svelte-1g3sjso")},m(g,v){$(g,e,v),h(e,n),h(e,i),h(e,r),c.m(r,null),h(r,o),_&&_.m(r,null),t[4](e),a=!0,l||(d=ve(n,"click",t[3]),l=!0)},p(g,[v]){v&4&&qe(s,s=g[2])?(Mt(),ge(c,1,1,Ie),Dt(),c=Xi(g),c.c(),ue(c,1),c.m(r,o)):c.p(g,v),g[1]?_?_.p(g,v):(_=$i(g),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(g){a||(ue(c),a=!0)},o(g){ge(c),a=!1},d(g){g&&X(e),c.d(g),_&&_.d(),t[4](null),l=!1,d()}}}function Uo(t,e,n){let i,r,s;Se.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}sn(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Se.setSelectedRow(null))})});function a(l){Ft[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class jo extends tt{constructor(e){super(),et(this,e,Uo,Po,qe,{})}}const Bo="https://will-moore.github.io/ome2024-ngff-challenge/selectCaret.svg",xo="https://will-moore.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function Vo(t){let e;return{c(){e=y("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${xo}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,w(e,"class","svelte-jcf7ka")},m(n,i){$(n,e,i)},p:Ie,i:Ie,o:Ie,d(n){n&&X(e)}}}class Wo extends tt{constructor(e){super(),et(this,e,null,Vo,qe,{})}}function Ho(t){let e,n,i,r,s,o,a,l=t[0].source+"",d,c,_,g,v,m,k=t[0].total_count+"",F,M,O,H,ee,q,Z,R,f,u,b;return{c(){e=y("div"),n=y("label"),i=y("img"),o=Q(),a=y("div"),d=j(l),c=Q(),_=y("br"),g=Q(),v=y("span"),m=j("("),F=j(k),M=j(" images)"),H=y("input"),q=Q(),Z=y("label"),R=y("input"),f=j(`
    ×`),w(i,"title",r=t[0].url),w(i,"class","sourceLogo svelte-1613fuf"),w(i,"alt","Source logo"),pi(i.src,s=bi(t[0].source))||w(i,"src",s),w(v,"title",O=t[0].child_csv.length+" collections"),w(H,"class","source svelte-1613fuf"),w(H,"type","radio"),w(H,"name","source"),H.value=ee=t[0].source,w(n,"class","svelte-1613fuf"),w(R,"type","radio"),w(R,"name","source"),R.value="",w(R,"class","svelte-1613fuf"),w(Z,"class","clear svelte-1613fuf"),w(e,"class","source svelte-1613fuf")},m(I,S){$(I,e,S),h(e,n),h(n,i),h(n,o),h(n,a),h(a,d),h(a,c),h(a,_),h(a,g),h(a,v),h(v,m),h(v,F),h(v,M),h(a,H),h(e,q),h(e,Z),h(Z,R),h(Z,f),u||(b=[ve(H,"change",function(){vn(t[1])&&t[1].apply(this,arguments)}),ve(R,"change",function(){vn(t[1])&&t[1].apply(this,arguments)})],u=!0)},p(I,[S]){t=I,S&1&&r!==(r=t[0].url)&&w(i,"title",r),S&1&&!pi(i.src,s=bi(t[0].source))&&w(i,"src",s),S&1&&l!==(l=t[0].source+"")&&ye(d,l),S&1&&k!==(k=t[0].total_count+"")&&ye(F,k),S&1&&O!==(O=t[0].child_csv.length+" collections")&&w(v,"title",O),S&1&&ee!==(ee=t[0].source)&&(H.value=ee)},i:Ie,o:Ie,d(I){I&&X(e),u=!1,$e(b)}}}function qo(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Ko extends tt{constructor(e){super(),et(this,e,qo,Ho,qe,{source:0,handleFilter:1})}}function Jo(t,e,n){const i=t.slice();return i[31]=e[n],i}function tr(t,e,n){const i=t.slice();return i[34]=e[n],i}function nr(t,e,n){const i=t.slice();return i[34]=e[n],i}function ir(t,e,n){const i=t.slice();return i[39]=e[n],i}function rr(t,e,n){const i=t.slice();return i[42]=e[n],i}function sr(t){let e,n,i,r=kn(t[1])+"",s,o,a,l,d,c;return{c(){e=y("h4"),n=j("Showing Collection: "),i=y("strong"),s=j(r),o=Q(),a=y("span"),a.textContent="  |  ",l=Q(),d=y("a"),c=j("Show all collections"),ce(a,"color","grey"),w(d,"href",window.location.origin+window.location.pathname)},m(_,g){$(_,e,g),h(e,n),h(e,i),h(i,s),h(e,o),h(e,a),h(e,l),h(e,d),h(d,c)},p(_,g){g[0]&2&&r!==(r=kn(_[1])+"")&&ye(s,r)},d(_){_&&X(e)}}}function or(t){let e,n;return e=new Ko({props:{source:t[42],handleFilter:t[17]}}),{c(){Xe(e.$$.fragment)},m(i,r){Ye(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(ue(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Qe(e,i)}}}function lr(t){let e,n,i,r,s,o,a,l,d,c=Pe(Se.getCsvSourceList(t[14])),_=[];for(let g=0;g<c.length;g+=1)_[g]=ar(ir(t,c,g));return{c(){e=y("div"),n=y("select"),i=y("option"),i.textContent="Collection";for(let g=0;g<_.length;g+=1)_[g].c();r=Q(),s=y("div"),o=y("button"),a=j("×"),i.__value="",ke(i,i.__value),w(n,"name","collection"),w(n,"class","svelte-1f7uefw"),t[12]===void 0&&rt(()=>t[24].call(n)),w(o,"title","Clear Filter"),ce(o,"visibility",t[12]!==""?"visible":"hidden"),w(o,"class","svelte-1f7uefw"),w(s,"class","svelte-1f7uefw"),w(e,"class","selectWrapper svelte-1f7uefw")},m(g,v){$(g,e,v),h(e,n),h(n,i);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(n,null);ot(n,t[12],!0),h(e,r),h(e,s),h(s,o),h(o,a),l||(d=[ve(n,"change",t[24]),ve(n,"change",t[19]),ve(o,"click",t[19])],l=!0)},p(g,v){if(v[0]&16384){c=Pe(Se.getCsvSourceList(g[14]));let m;for(m=0;m<c.length;m+=1){const k=ir(g,c,m);_[m]?_[m].p(k,v):(_[m]=ar(k),_[m].c(),_[m].m(n,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=c.length}v[0]&20480&&ot(n,g[12]),v[0]&4096&&ce(o,"visibility",g[12]!==""?"visible":"hidden")},d(g){g&&X(e),Rt(_,g),l=!1,$e(d)}}}function ar(t){let e,n=(t[39].source==t[14]?kn(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",o,a,l;return{c(){e=y("option"),i=j(n),r=j(" ("),o=j(s),a=j(`)
                  `),e.__value=l=t[39].url,ke(e,e.__value)},m(d,c){$(d,e,c),h(e,i),h(e,r),h(e,o),h(e,a)},p(d,c){c[0]&16384&&n!==(n=(d[39].source==d[14]?kn(d[39].url):d[39].source)+"")&&ye(i,n),c[0]&16384&&s!==(s=d[39].image_count+"")&&ye(o,s),c[0]&16384&&l!==(l=d[39].url)&&(e.__value=l,ke(e,e.__value))},d(d){d&&X(e)}}}function ur(t){let e,n=t[34]+"",i,r;return{c(){e=y("option"),i=j(n),e.__value=r=t[5][t[34]],ke(e,e.__value)},m(s,o){$(s,e,o),h(e,i)},p(s,o){o[0]&32&&n!==(n=s[34]+"")&&ye(i,n),o[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,ke(e,e.__value))},d(s){s&&X(e)}}}function fr(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=y("option"),r=j(i),n.__value=s=e[6][e[34]],ke(n,n.__value),this.first=n},m(o,a){$(o,n,a),h(n,r)},p(o,a){e=o,a[0]&64&&i!==(i=e[34]+"")&&ye(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,ke(n,n.__value))},d(o){o&&X(n)}}}function Go(t){let e;return{c(){e=y("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],ke(e,e.__value)},m(n,i){$(n,e,i)},p:Ie,d(n){n&&X(e)}}}function Yo(t){let e,n,i,r,s,o,a,l,d,c,_=bn(t[4])+"",g,v,m,k,F,M,O,H,ee,q,Z,R,f,u,b,I,S=t[14]!==""&&Se.getCsvSourceList(t[14]).length>0,U,W,D,x,p=t[13]!==""?"All Dimensions":"Dimension Count",P,z,V,J,C,T,E,L,G,ne,ie,N,B,te,me=t[11]==""?"Organism":"All Organisms",se,Ae,pe,oe,Ee,Le,xe,ze,he,le,de=t[10]==""?"Imaging Modality":"All Modalities",Ke,ae,Te=[],He=new Map,Ze,Ve,Re,Je,Fe,st,Me,mt,pt,vt,Ge,bt,si,oi,yt,wt,kt,li,an,ut,ai,Et,nt,ui,un=t[0].length+"",An,fi,Cn,ci,hi,ft,Ue,In,di;n=new Wo({}),r=new jo({});let je=t[1]!=Un&&sr(t),ct=Pe(t[2]),be=[];for(let A=0;A<ct.length;A+=1)be[A]=or(rr(t,ct,A));const Or=A=>ge(be[A],1,1,()=>{be[A]=null});let Be=S&&lr(t),St=Pe(Object.keys(t[5]).sort()),De=[];for(let A=0;A<St.length;A+=1)De[A]=ur(nr(t,St,A));let fn=Pe(Object.keys(t[6]).sort());const _i=A=>A[34];for(let A=0;A<fn.length;A+=1){let K=tr(t,fn,A),_e=_i(K);He.set(_e,Te[A]=fr(_e,K))}let Lr=Pe(["x","y","z","c","t"]),Pt=[];for(let A=0;A<5;A+=1)Pt[A]=Go(Jo(t,Lr,A));return ut=new _s({props:{toggleAscending:t[15],sortAscending:t[8]}}),ft=new Fo({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){e=y("div"),Xe(n.$$.fragment),i=Q(),Xe(r.$$.fragment),s=Q(),o=y("main"),a=y("div"),l=y("h3"),d=j(`In the summer of 2024, the OME-NGFF project generated
        `),c=y("strong"),g=j(_),v=j(` of data in Zarr v3 format

        `),je&&je.c(),m=Q(),k=y("div"),F=y("input"),M=Q(),O=y("button"),H=j("×"),ee=Q(),q=y("div");for(let A=0;A<be.length;A+=1)be[A].c();Z=Q(),R=y("div"),f=y("div"),u=y("div"),b=y("div"),b.textContent="Filter by:",I=Q(),Be&&Be.c(),U=Q(),W=y("div"),D=y("select"),x=y("option"),P=j(p),z=y("hr"),V=y("option"),V.textContent="2D",J=y("option"),J.textContent="3D",C=y("option"),C.textContent="4D",T=y("option"),T.textContent="5D",E=Q(),L=y("div"),G=y("button"),ne=j("×"),ie=Q(),N=y("div"),B=y("select"),te=y("option"),se=j(me),Ae=y("hr");for(let A=0;A<De.length;A+=1)De[A].c();pe=Q(),oe=y("div"),Ee=y("button"),Le=j("×"),xe=Q(),ze=y("div"),he=y("select"),le=y("option"),Ke=j(de),ae=y("hr");for(let A=0;A<Te.length;A+=1)Te[A].c();Ze=Q(),Ve=y("div"),Re=y("button"),Je=j("×"),Fe=Q(),st=y("div"),Me=Q(),mt=y("div"),mt.textContent="Sort by:",pt=Q(),vt=y("div"),Ge=y("select"),bt=y("option"),bt.textContent="--",si=y("hr");for(let A=0;A<5;A+=1)Pt[A].c();oi=y("hr"),yt=y("option"),yt.textContent="Data Size (bytes)",wt=y("option"),wt.textContent="Chunk Size (pixels)",kt=y("option"),kt.textContent="Shard Size (pixels)",li=Q(),an=y("div"),Xe(ut.$$.fragment),ai=Q(),Et=y("div"),nt=y("h3"),ui=j("Showing "),An=j(un),fi=j(" out of "),Cn=j(t[3]),ci=j(" images"),hi=Q(),Xe(ft.$$.fragment),ce(c,"font-weight","600"),ce(l,"text-align","center"),w(F,"placeholder","Filter by Name or Description"),w(F,"name","textFilter"),w(F,"class","svelte-1f7uefw"),w(O,"title","Clear Filter"),ce(O,"visibility",t[9]!==""?"visible":"hidden"),w(O,"class","svelte-1f7uefw"),w(k,"class","textInputWrapper svelte-1f7uefw"),w(q,"class","sources svelte-1f7uefw"),w(a,"class","summary svelte-1f7uefw"),ce(b,"white-space","nowrap"),x.__value="",ke(x,x.__value),V.__value="2",ke(V,V.__value),J.__value="3",ke(J,J.__value),C.__value="4",ke(C,C.__value),T.__value="5",ke(T,T.__value),w(D,"class","svelte-1f7uefw"),t[13]===void 0&&rt(()=>t[25].call(D)),w(G,"title","Clear Filter"),ce(G,"visibility",t[13]!==""?"visible":"hidden"),w(G,"class","svelte-1f7uefw"),w(L,"class","svelte-1f7uefw"),w(W,"class","selectWrapper svelte-1f7uefw"),te.__value="",ke(te,te.__value),w(B,"class","svelte-1f7uefw"),t[11]===void 0&&rt(()=>t[26].call(B)),w(Ee,"title","Clear Filter"),ce(Ee,"visibility",t[11]!==""?"visible":"hidden"),w(Ee,"class","svelte-1f7uefw"),w(oe,"class","svelte-1f7uefw"),w(N,"class","selectWrapper svelte-1f7uefw"),le.__value="",ke(le,le.__value),w(he,"class","svelte-1f7uefw"),t[10]===void 0&&rt(()=>t[27].call(he)),w(Re,"title","Clear Filter"),ce(Re,"visibility",t[10]!==""?"visible":"hidden"),w(Re,"class","svelte-1f7uefw"),w(Ve,"class","svelte-1f7uefw"),w(ze,"class","selectWrapper svelte-1f7uefw"),w(st,"class","clear"),bt.__value="",ke(bt,bt.__value),yt.__value="written",ke(yt,yt.__value),wt.__value="chunk_pixels",ke(wt,wt.__value),kt.__value="shard_pixels",ke(kt,kt.__value),w(Ge,"class","svelte-1f7uefw"),w(an,"class","svelte-1f7uefw"),w(vt,"class","selectWrapper svelte-1f7uefw"),w(u,"class","filters svelte-1f7uefw"),w(f,"class","sidebar svelte-1f7uefw"),ce(nt,"margin-left","15px"),w(nt,"class","svelte-1f7uefw"),w(Et,"class","results svelte-1f7uefw"),w(R,"class","sidebarContainer svelte-1f7uefw"),w(o,"class","svelte-1f7uefw"),w(e,"class","app svelte-1f7uefw"),ce(e,"--form-select-bg-img","url('"+Bo+"')")},m(A,K){$(A,e,K),Ye(n,e,null),h(e,i),Ye(r,e,null),h(e,s),h(e,o),h(o,a),h(a,l),h(l,d),h(l,c),h(c,g),h(l,v),je&&je.m(l,null),h(a,m),h(a,k),h(k,F),ke(F,t[9]),h(k,M),h(k,O),h(O,H),h(a,ee),h(a,q);for(let _e=0;_e<be.length;_e+=1)be[_e]&&be[_e].m(q,null);h(o,Z),h(o,R),h(R,f),h(f,u),h(u,b),h(u,I),Be&&Be.m(u,null),h(u,U),h(u,W),h(W,D),h(D,x),h(x,P),h(D,z),h(D,V),h(D,J),h(D,C),h(D,T),ot(D,t[13],!0),h(W,E),h(W,L),h(L,G),h(G,ne),h(u,ie),h(u,N),h(N,B),h(B,te),h(te,se),h(B,Ae);for(let _e=0;_e<De.length;_e+=1)De[_e]&&De[_e].m(B,null);ot(B,t[11],!0),h(N,pe),h(N,oe),h(oe,Ee),h(Ee,Le),h(u,xe),h(u,ze),h(ze,he),h(he,le),h(le,Ke),h(he,ae);for(let _e=0;_e<Te.length;_e+=1)Te[_e]&&Te[_e].m(he,null);ot(he,t[10],!0),h(ze,Ze),h(ze,Ve),h(Ve,Re),h(Re,Je),h(u,Fe),h(u,st),h(u,Me),h(u,mt),h(u,pt),h(u,vt),h(vt,Ge),h(Ge,bt),h(Ge,si);for(let _e=0;_e<5;_e+=1)Pt[_e]&&Pt[_e].m(Ge,null);h(Ge,oi),h(Ge,yt),h(Ge,wt),h(Ge,kt),h(vt,li),h(vt,an),Ye(ut,an,null),h(R,ai),h(R,Et),h(Et,nt),h(nt,ui),h(nt,An),h(nt,fi),h(nt,Cn),h(nt,ci),h(Et,hi),Ye(ft,Et,null),Ue=!0,In||(di=[ve(F,"input",t[23]),ve(F,"input",t[22]),ve(O,"click",t[22]),ve(D,"change",t[25]),ve(D,"change",t[18]),ve(G,"click",t[18]),ve(B,"change",t[26]),ve(B,"change",t[20]),ve(Ee,"click",t[20]),ve(he,"change",t[27]),ve(he,"change",t[21]),ve(Re,"click",t[21]),ve(Ge,"change",t[16])],In=!0)},p(A,K){if((!Ue||K[0]&16)&&_!==(_=bn(A[4])+"")&&ye(g,_),A[1]!=Un?je?je.p(A,K):(je=sr(A),je.c(),je.m(l,null)):je&&(je.d(1),je=null),K[0]&512&&F.value!==A[9]&&ke(F,A[9]),(!Ue||K[0]&512)&&ce(O,"visibility",A[9]!==""?"visible":"hidden"),K[0]&131076){ct=Pe(A[2]);let fe;for(fe=0;fe<ct.length;fe+=1){const Ut=rr(A,ct,fe);be[fe]?(be[fe].p(Ut,K),ue(be[fe],1)):(be[fe]=or(Ut),be[fe].c(),ue(be[fe],1),be[fe].m(q,null))}for(Mt(),fe=ct.length;fe<be.length;fe+=1)Or(fe);Dt()}if(K[0]&16384&&(S=A[14]!==""&&Se.getCsvSourceList(A[14]).length>0),S?Be?Be.p(A,K):(Be=lr(A),Be.c(),Be.m(u,U)):Be&&(Be.d(1),Be=null),(!Ue||K[0]&8192)&&p!==(p=A[13]!==""?"All Dimensions":"Dimension Count")&&ye(P,p),K[0]&8192&&ot(D,A[13]),(!Ue||K[0]&8192)&&ce(G,"visibility",A[13]!==""?"visible":"hidden"),(!Ue||K[0]&2048)&&me!==(me=A[11]==""?"Organism":"All Organisms")&&ye(se,me),K[0]&32){St=Pe(Object.keys(A[5]).sort());let fe;for(fe=0;fe<St.length;fe+=1){const Ut=nr(A,St,fe);De[fe]?De[fe].p(Ut,K):(De[fe]=ur(Ut),De[fe].c(),De[fe].m(B,null))}for(;fe<De.length;fe+=1)De[fe].d(1);De.length=St.length}K[0]&2080&&ot(B,A[11]),(!Ue||K[0]&2048)&&ce(Ee,"visibility",A[11]!==""?"visible":"hidden"),(!Ue||K[0]&1024)&&de!==(de=A[10]==""?"Imaging Modality":"All Modalities")&&ye(Ke,de),K[0]&64&&(fn=Pe(Object.keys(A[6]).sort()),Te=mr(Te,K,_i,1,A,fn,He,he,qr,fr,null,tr)),K[0]&1088&&ot(he,A[10]),(!Ue||K[0]&1024)&&ce(Re,"visibility",A[10]!==""?"visible":"hidden");const _e={};K[0]&256&&(_e.sortAscending=A[8]),ut.$set(_e),(!Ue||K[0]&1)&&un!==(un=A[0].length+"")&&ye(An,un),(!Ue||K[0]&8)&&ye(Cn,A[3]);const cn={};K[0]&1&&(cn.tableRows=A[0]),K[0]&512&&(cn.textFilter=A[9]),K[0]&128&&(cn.sortedBy=A[7]),ft.$set(cn)},i(A){if(!Ue){ue(n.$$.fragment,A),ue(r.$$.fragment,A);for(let K=0;K<ct.length;K+=1)ue(be[K]);ue(ut.$$.fragment,A),ue(ft.$$.fragment,A),Ue=!0}},o(A){ge(n.$$.fragment,A),ge(r.$$.fragment,A),be=be.filter(Boolean);for(let K=0;K<be.length;K+=1)ge(be[K]);ge(ut.$$.fragment,A),ge(ft.$$.fragment,A),Ue=!1},d(A){A&&X(e),Qe(n),Qe(r),je&&je.d(),Rt(be,A),Be&&Be.d(),Rt(De,A);for(let K=0;K<Te.length;K+=1)Te[K].d();Rt(Pt,A),Qe(ut),Qe(ft),In=!1,$e(di)}}}function kn(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Qo(t,e,n){let i,r,s,o,a,l,c=new URLSearchParams(window.location.search).get("csv");try{new URL(c)}catch{c=Un}let _=[],g=[],v=0,m=0,k={},F={};Se.subscribe(p=>{n(0,_=q(p)),n(2,g=Se.getCsvSourceList()),n(3,v=p.length),n(4,m=p.reduce((P,z)=>P+parseInt(z.written)||0,0))}),Er.subscribe(p=>{let P={};for(const[z,V]of Object.entries(p))P[V]=z;n(5,k=P)}),Sr.subscribe(p=>{let P={};for(const[z,V]of Object.entries(p))P[V]=z;n(6,F=P)}),c&&vr(c,Se);let M="",O=!1;function H(){n(8,O=!O),Se.sortTable(M,O)}function ee(p){n(7,M=p.target.value),M===""?Se.sortTable("index",!0):Se.sortTable(M,O)}function q(p){if(i!==""&&(p=p.filter(P=>P.dim_count==i)),s!=="")p=p.filter(P=>P.csv==s);else if(r!==""){let P=Se.getCsvSourceList(r),z=[r,...P.map(V=>V.source)];p=p.filter(V=>z.includes(V.source))}if(o!==""&&(p=p.filter(P=>P.organismId==o)),a!=""&&(p=p.filter(P=>P.fbbiId==a)),l&&l!=""){let P=l.toLowerCase();p=p.filter(z=>{var V,J;return((V=z.description)==null?void 0:V.toLowerCase().includes(P))||((J=z.name)==null?void 0:J.toLowerCase().includes(P))})}return p}function Z(p){n(14,r=p.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,_=q(Se.getRows()))}function R(p){n(13,i=p.target.value||""),n(0,_=q(Se.getRows()))}function f(p){n(12,s=p.target.value||""),n(0,_=q(Se.getRows()))}function u(p){n(11,o=p.target.value||""),n(0,_=q(Se.getRows()))}function b(p){n(10,a=p.target.value||""),n(0,_=q(Se.getRows()))}function I(p){n(9,l=p.target.value),n(0,_=q(Se.getRows()))}function S(){l=this.value,n(9,l)}function U(){s=dn(this),n(12,s),n(14,r)}function W(){i=dn(this),n(13,i)}function D(){o=dn(this),n(11,o),n(5,k)}function x(){a=dn(this),n(10,a),n(6,F)}return t.$$.update=()=>{t.$$.dirty[0]&1&&_.some(p=>p.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,o=""),n(10,a=""),n(9,l=""),[_,c,g,v,m,k,F,M,O,l,a,o,s,i,r,H,ee,Z,R,f,u,b,I,S,U,W,D,x]}class Zo extends tt{constructor(e){super(),et(this,e,Qo,Yo,qe,{},null,[-1,-1])}}new Zo({target:document.getElementById("app")});
