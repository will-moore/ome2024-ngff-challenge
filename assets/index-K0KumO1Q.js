const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Fr=Object.defineProperty;var _i=t=>{throw TypeError(t)};var Mr=(t,e,n)=>e in t?Fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>Mr(t,typeof e!="symbol"?e+"":e,n),Cn=(t,e,n)=>e.has(t)||_i("Cannot "+n);var Y=(t,e,n)=>(Cn(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?_i("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ye=(t,e,n,i)=>(Cn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),In=(t,e,n)=>(Cn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ie(){}function Dr(t,e){for(const n in e)t[n]=e[n];return t}function _r(t){return t()}function gi(){return Object.create(null)}function rt(t){t.forEach(_r)}function Vn(t){return typeof t=="function"}function He(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let hn;function mi(t,e){return t===e?!0:(hn||(hn=document.createElement("a")),hn.href=e,t===hn.href)}function Nr(t){return Object.keys(t).length===0}function Pr(t,...e){if(t==null){for(const i of e)i(void 0);return Ie}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Bt(t){let e;return Pr(t,n=>e=n)(),e}function zn(t,e,n,i){if(t){const r=gr(t,e,n,i);return t[0](r)}}function gr(t,e,n,i){return t[1]&&i?Dr(n.ctx.slice(),t[1](i(e))):n.ctx}function On(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Ln(t,e,n,i,r,s){if(r){const o=gr(e,n,i,s);t.p(o,r)}}function Fn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function d(t,e){t.appendChild(e)}function te(t,e,n){t.insertBefore(e,n||null)}function ee(t){t.parentNode&&t.parentNode.removeChild(t)}function Tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function Z(){return U(" ")}function wn(){return U("")}function pe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function qr(t){return Array.from(t.childNodes)}function ke(t,e){e=""+e,t.data!==e&&(t.data=e)}function we(t,e){t.value=e??""}function he(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function st(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function dn(t){const e=t.querySelector(":checked");return e&&e.__value}function It(t,e,n){t.classList.toggle(e,!!n)}function Ur(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Wt;function Vt(t){Wt=t}function Wn(){if(!Wt)throw new Error("Function called outside component initialization");return Wt}function sn(t){Wn().$$.on_mount.push(t)}function Hn(t){Wn().$$.on_destroy.push(t)}function jr(){const t=Wn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Ur(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const Ct=[],Lt=[];let Rt=[];const pi=[],Br=Promise.resolve();let Mn=!1;function xr(){Mn||(Mn=!0,Br.then(De))}function it(t){Rt.push(t)}const Tn=new Set;let St=0;function De(){if(St!==0)return;const t=Wt;do{try{for(;St<Ct.length;){const e=Ct[St];St++,Vt(e),Vr(e.$$)}}catch(e){throw Ct.length=0,St=0,e}for(Vt(null),Ct.length=0,St=0;Lt.length;)Lt.pop()();for(let e=0;e<Rt.length;e+=1){const n=Rt[e];Tn.has(n)||(Tn.add(n),n())}Rt.length=0}while(Ct.length);for(;pi.length;)pi.pop()();Mn=!1,Tn.clear(),Vt(t)}function Vr(t){if(t.fragment!==null){t.update(),rt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}function Wr(t){const e=[],n=[];Rt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Rt=e}const gn=new Set;let dt;function Ft(){dt={r:0,c:[],p:dt}}function Mt(){dt.r||rt(dt.c),dt=dt.p}function ae(t,e){t&&t.i&&(gn.delete(t),t.i(e))}function ge(t,e,n,i){if(t&&t.o){if(gn.has(t))return;gn.add(t),dt.c.push(()=>{gn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Hr(t,e){t.d(1),e.delete(t.key)}function Kr(t,e){ge(t,1,1,()=>{e.delete(t.key)})}function mr(t,e,n,i,r,s,o,a,l,h,f,_){let g=t.length,b=s.length,m=g;const E={};for(;m--;)E[t[m].key]=m;const F=[],M=new Map,O=new Map,V=[];for(m=b;m--;){const z=_(r,s,m),u=n(z);let c=o.get(u);c?V.push(()=>c.p(z,e)):(c=h(u,z),c.c()),M.set(u,F[m]=c),u in E&&O.set(u,Math.abs(m-E[u]))}const ie=new Set,H=new Set;function ne(z){ae(z,1),z.m(a,f),o.set(z.key,z),f=z.first,b--}for(;g&&b;){const z=F[b-1],u=t[g-1],c=z.key,p=u.key;z===u?(f=z.first,g--,b--):M.has(p)?!o.has(c)||ie.has(c)?ne(z):H.has(p)?g--:O.get(c)>O.get(p)?(H.add(c),ne(z)):(ie.add(p),g--):(l(u,o),g--)}for(;g--;){const z=t[g];M.has(z.key)||l(z,o)}for(;b;)ne(F[b-1]);return rt(V),F}function Ze(t){t&&t.c()}function Ge(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),it(()=>{const s=t.$$.on_mount.map(_r).filter(Vn);t.$$.on_destroy?t.$$.on_destroy.push(...s):rt(s),t.$$.on_mount=[]}),r.forEach(it)}function Ye(t,e){const n=t.$$;n.fragment!==null&&(Wr(n.after_update),rt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Jr(t,e){t.$$.dirty[0]===-1&&(Ct.push(t),xr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Xe(t,e,n,i,r,s,o=null,a=[-1]){const l=Wt;Vt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:Ie,not_equal:r,bound:gi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:gi(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(_,g,...b)=>{const m=b.length?b[0]:g;return h.ctx&&r(h.ctx[_],h.ctx[_]=m)&&(!h.skip_bound&&h.bound[_]&&h.bound[_](m),f&&Jr(t,_)),g}):[],h.update(),f=!0,rt(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const _=qr(e.target);h.fragment&&h.fragment.l(_),_.forEach(ee)}else h.fragment&&h.fragment.c();e.intro&&ae(t.$$.fragment),Ge(t,e.target,e.anchor),De()}Vt(l)}class $e{constructor(){se(this,"$$");se(this,"$$set")}$destroy(){Ye(this,1),this.$destroy=Ie}$on(e,n){if(!Vn(n))return Ie;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Nr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gr);const At=[];function Dn(t,e=Ie){let n;const i=new Set;function r(a){if(He(t,a)&&(t=a,n)){const l=!At.length;for(const h of i)h[1](),At.push(h,t);if(l){for(let h=0;h<At.length;h+=2)At[h][0](At[h+1]);At.length=0}}}function s(a){r(a(t))}function o(a,l=Ie){const h=[a,l];return i.add(h),i.size===1&&(n=e(r,s)||Ie),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Yr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(u,c){var p=(c=c||{}).dynamicTyping||!1;if(z(p)&&(c.dynamicTypingFunction=p,p={}),c.dynamicTyping=p,c.transform=!!z(c.transform)&&c.transform,c.worker&&l.WORKERS_SUPPORTED){var C=function(){if(!l.WORKERS_SUPPORTED)return!1;var P=(j=i.URL||i.webkitURL||null,D=n.toString(),l.BLOB_URL||(l.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))),W=new i.Worker(P),j,D;return W.onmessage=O,W.id=a++,o[W.id]=W}();return C.userStep=c.step,C.userChunk=c.chunk,C.userComplete=c.complete,C.userError=c.error,c.step=z(c.step),c.chunk=z(c.chunk),c.complete=z(c.complete),c.error=z(c.error),delete c.worker,void C.postMessage({input:u,config:c,workerId:C.id})}var T=null;return l.NODE_STREAM_INPUT,typeof u=="string"?(u=function(P){return P.charCodeAt(0)===65279?P.slice(1):P}(u),T=c.download?new _(c):new b(c)):u.readable===!0&&z(u.read)&&z(u.on)?T=new m(c):(i.File&&u instanceof File||u instanceof Object)&&(T=new g(c)),T.stream(u)},unparse:function(u,c){var p=!1,C=!0,T=",",P=`\r
`,W='"',j=W+W,D=!1,v=null,N=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||l.BAD_DELIMITERS.filter(function(A){return c.delimiter.indexOf(A)!==-1}).length||(T=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(p=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(D=c.skipEmptyLines),typeof c.newline=="string"&&(P=c.newline),typeof c.quoteChar=="string"&&(W=c.quoteChar),typeof c.header=="boolean"&&(C=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");v=c.columns}c.escapeChar!==void 0&&(j=c.escapeChar+W),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(N=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var R=new RegExp(F(W),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return B(null,u,D);if(typeof u[0]=="object")return B(v||Object.keys(u[0]),u,D)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||v),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),B(u.fields||[],u.data||[],D);throw new Error("Unable to serialize unrecognized input");function B(A,I,k){var L="";typeof A=="string"&&(A=JSON.parse(A)),typeof I=="string"&&(I=JSON.parse(I));var X=Array.isArray(A)&&0<A.length,Q=!Array.isArray(I[0]);if(X&&C){for(var re=0;re<A.length;re++)0<re&&(L+=T),L+=J(A[re],re);0<I.length&&(L+=P)}for(var q=0;q<I.length;q++){var x=X?A.length:I[q].length,G=!1,de=X?Object.keys(I[q]).length===0:I[q].length===0;if(k&&!X&&(G=k==="greedy"?I[q].join("").trim()==="":I[q].length===1&&I[q][0].length===0),k==="greedy"&&X){for(var oe=[],Ee=0;Ee<x;Ee++){var me=Q?A[Ee]:Ee;oe.push(I[q][me])}G=oe.join("").trim()===""}if(!G){for(var ue=0;ue<x;ue++){0<ue&&!de&&(L+=T);var ze=X&&Q?A[ue]:ue;L+=J(I[q][ze],ue)}q<I.length-1&&(!k||0<x&&!de)&&(L+=P)}}return L}function J(A,I){if(A==null)return"";if(A.constructor===Date)return JSON.stringify(A).slice(1,25);var k=!1;N&&typeof A=="string"&&N.test(A)&&(A="'"+A,k=!0);var L=A.toString().replace(R,j);return(k=k||p===!0||typeof p=="function"&&p(A,I)||Array.isArray(p)&&p[I]||function(X,Q){for(var re=0;re<Q.length;re++)if(-1<X.indexOf(Q[re]))return!0;return!1}(L,l.BAD_DELIMITERS)||-1<L.indexOf(T)||L.charAt(0)===" "||L.charAt(L.length-1)===" ")?W+L+W:L}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=M,l.ParserHandle=E,l.NetworkStreamer=_,l.FileStreamer=g,l.StringStreamer=b,l.ReadableStreamStreamer=m,i.jQuery){var h=i.jQuery;h.fn.parse=function(u){var c=u.config||{},p=[];return this.each(function(P){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var W=0;W<this.files.length;W++)p.push({file:this.files[W],inputElem:this,instanceConfig:h.extend({},c)})}),C(),this;function C(){if(p.length!==0){var P,W,j,D,v=p[0];if(z(u.before)){var N=u.before(v.file,v.inputElem);if(typeof N=="object"){if(N.action==="abort")return P="AbortError",W=v.file,j=v.inputElem,D=N.reason,void(z(u.error)&&u.error({name:P},W,j,D));if(N.action==="skip")return void T();typeof N.config=="object"&&(v.instanceConfig=h.extend(v.instanceConfig,N.config))}else if(N==="skip")return void T()}var R=v.instanceConfig.complete;v.instanceConfig.complete=function(B){z(R)&&R(B,v.file,v.inputElem),T()},l.parse(v.file,v.instanceConfig)}else z(u.complete)&&u.complete()}function T(){p.splice(0,1),C()}}}function f(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var p=H(c);p.chunkSize=parseInt(p.chunkSize),c.step||c.chunk||(p.chunkSize=null),this._handle=new E(p),(this._handle.streamer=this)._config=p}).call(this,u),this.parseChunk=function(c,p){if(this.isFirstChunk&&z(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(c);C!==void 0&&(c=C)}this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+c;this._partialLine="";var P=this._handle.parse(T,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var W=P.meta.cursor;this._finished||(this._partialLine=T.substring(W-this._baseIndex),this._baseIndex=W),P&&P.data&&(this._rowCount+=P.data.length);var j=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:P,workerId:l.WORKER_ID,finished:j});else if(z(this._config.chunk)&&!p){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);P=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!j||!z(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function(c){z(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:c,finished:!1})}}function _(u){var c;(u=u||{}).chunkSize||(u.chunkSize=l.RemoteChunkSize),f.call(this,u),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(p){this._input=p,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=ne(this._chunkLoaded,this),c.onerror=ne(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var p=this._config.downloadRequestHeaders;for(var C in p)c.setRequestHeader(C,p[C])}if(this._config.chunkSize){var T=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+T)}try{c.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(p){var C=p.getResponseHeader("Content-Range");return C===null?-1:parseInt(C.substring(C.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(p){var C=c.statusText||p;this._sendError(new Error(C))}}function g(u){var c,p;(u=u||{}).chunkSize||(u.chunkSize=l.LocalChunkSize),f.call(this,u);var C=typeof FileReader<"u";this.stream=function(T){this._input=T,p=T.slice||T.webkitSlice||T.mozSlice,C?((c=new FileReader).onload=ne(this._chunkLoaded,this),c.onerror=ne(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input;if(this._config.chunkSize){var P=Math.min(this._start+this._config.chunkSize,this._input.size);T=p.call(T,this._start,P)}var W=c.readAsText(T,this._config.encoding);C||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(c.error)}}function b(u){var c;f.call(this,u=u||{}),this.stream=function(p){return c=p,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var p,C=this._config.chunkSize;return C?(p=c.substring(0,C),c=c.substring(C)):(p=c,c=""),this._finished=!c,this.parseChunk(p)}}}function m(u){f.call(this,u=u||{});var c=[],p=!0,C=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):p=!0},this._streamData=ne(function(T){try{c.push(typeof T=="string"?T:T.toString(this._config.encoding)),p&&(p=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(P){this._streamError(P)}},this),this._streamError=ne(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=ne(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=ne(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(u){var c,p,C,T=Math.pow(2,53),P=-T,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,j=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,v=0,N=0,R=!1,B=!1,J=[],A={data:[],errors:[],meta:{}};if(z(u.step)){var I=u.step;u.step=function(q){if(A=q,X())L();else{if(L(),A.data.length===0)return;v+=q.data.length,u.preview&&v>u.preview?p.abort():(A.data=A.data[0],I(A,D))}}}function k(q){return u.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function L(){return A&&C&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),C=!1),u.skipEmptyLines&&(A.data=A.data.filter(function(q){return!k(q)})),X()&&function(){if(!A)return;function q(G,de){z(u.transformHeader)&&(G=u.transformHeader(G,de)),J.push(G)}if(Array.isArray(A.data[0])){for(var x=0;X()&&x<A.data.length;x++)A.data[x].forEach(q);A.data.splice(0,1)}else A.data.forEach(q)}(),function(){if(!A||!u.header&&!u.dynamicTyping&&!u.transform)return A;function q(G,de){var oe,Ee=u.header?{}:[];for(oe=0;oe<G.length;oe++){var me=oe,ue=G[oe];u.header&&(me=oe>=J.length?"__parsed_extra":J[oe]),u.transform&&(ue=u.transform(ue,me)),ue=Q(me,ue),me==="__parsed_extra"?(Ee[me]=Ee[me]||[],Ee[me].push(ue)):Ee[me]=ue}return u.header&&(oe>J.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+oe,N+de):oe<J.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+oe,N+de)),Ee}var x=1;return!A.data.length||Array.isArray(A.data[0])?(A.data=A.data.map(q),x=A.data.length):A.data=q(A.data,0),u.header&&A.meta&&(A.meta.fields=J),N+=x,A}()}function X(){return u.header&&J.length===0}function Q(q,x){return G=q,u.dynamicTypingFunction&&u.dynamicTyping[G]===void 0&&(u.dynamicTyping[G]=u.dynamicTypingFunction(G)),(u.dynamicTyping[G]||u.dynamicTyping)===!0?x==="true"||x==="TRUE"||x!=="false"&&x!=="FALSE"&&(function(de){if(W.test(de)){var oe=parseFloat(de);if(P<oe&&oe<T)return!0}return!1}(x)?parseFloat(x):j.test(x)?new Date(x):x===""?null:x):x;var G}function re(q,x,G,de){var oe={type:q,code:x,message:G};de!==void 0&&(oe.row=de),A.errors.push(oe)}this.parse=function(q,x,G){var de=u.quoteChar||'"';if(u.newline||(u.newline=function(me,ue){me=me.substring(0,1048576);var ze=new RegExp(F(ue)+"([^]*?)"+F(ue),"gm"),be=(me=me.replace(ze,"")).split("\r"),je=me.split(`
`),Ve=1<je.length&&je[0].length<be[0].length;if(be.length===1||Ve)return`
`;for(var Ce=0,$=0;$<be.length;$++)be[$][0]===`
`&&Ce++;return Ce>=be.length/2?`\r
`:"\r"}(q,de)),C=!1,u.delimiter)z(u.delimiter)&&(u.delimiter=u.delimiter(q),A.meta.delimiter=u.delimiter);else{var oe=function(me,ue,ze,be,je){var Ve,Ce,$,fe;je=je||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var We=0;We<je.length;We++){var le=je[We],et=0,Se=0,Qe=0;$=void 0;for(var Ke=new M({comments:be,delimiter:le,newline:ue,preview:10}).parse(me),Be=0;Be<Ke.data.length;Be++)if(ze&&k(Ke.data[Be]))Qe++;else{var Re=Ke.data[Be].length;Se+=Re,$!==void 0?0<Re&&(et+=Math.abs(Re-$),$=Re):$=Re}0<Ke.data.length&&(Se/=Ke.data.length-Qe),(Ce===void 0||et<=Ce)&&(fe===void 0||fe<Se)&&1.99<Se&&(Ce=et,Ve=le,fe=Se)}return{successful:!!(u.delimiter=Ve),bestDelimiter:Ve}}(q,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);oe.successful?u.delimiter=oe.bestDelimiter:(C=!0,u.delimiter=l.DefaultDelimiter),A.meta.delimiter=u.delimiter}var Ee=H(u);return u.preview&&u.header&&Ee.preview++,c=q,p=new M(Ee),A=p.parse(c,x,G),L(),R?{meta:{paused:!0}}:A||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,p.abort(),c=z(u.chunk)?"":c.substring(p.getCharIndex())},this.resume=function(){D.streamer._halted?(R=!1,D.streamer.parseChunk(c,!0)):setTimeout(D.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,p.abort(),A.meta.aborted=!0,z(u.complete)&&u.complete(A),c=""}}function F(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(u){var c,p=(u=u||{}).delimiter,C=u.newline,T=u.comments,P=u.step,W=u.preview,j=u.fastMode,D=c=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(D=u.escapeChar),(typeof p!="string"||-1<l.BAD_DELIMITERS.indexOf(p))&&(p=","),T===p)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<l.BAD_DELIMITERS.indexOf(T))&&(T=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var v=0,N=!1;this.parse=function(R,B,J){if(typeof R!="string")throw new Error("Input must be a string");var A=R.length,I=p.length,k=C.length,L=T.length,X=z(P),Q=[],re=[],q=[],x=v=0;if(!R)return Fe();if(u.header&&!B){var G=R.split(C)[0].split(p),de=[],oe={},Ee=!1;for(var me in G){var ue=G[me];z(u.transformHeader)&&(ue=u.transformHeader(ue,me));var ze=ue,be=oe[ue]||0;for(0<be&&(Ee=!0,ze=ue+"_"+be),oe[ue]=be+1;de.includes(ze);)ze=ze+"_"+be;de.push(ze)}if(Ee){var je=R.split(C);je[0]=de.join(p),R=je.join(C)}}if(j||j!==!1&&R.indexOf(c)===-1){for(var Ve=R.split(C),Ce=0;Ce<Ve.length;Ce++){if(q=Ve[Ce],v+=q.length,Ce!==Ve.length-1)v+=C.length;else if(J)return Fe();if(!T||q.substring(0,L)!==T){if(X){if(Q=[],Qe(q.split(p)),at(),N)return Fe()}else Qe(q.split(p));if(W&&W<=Ce)return Q=Q.slice(0,W),Fe(!0)}}return Fe()}for(var $=R.indexOf(p,v),fe=R.indexOf(C,v),We=new RegExp(F(D)+F(c),"g"),le=R.indexOf(c,v);;)if(R[v]!==c)if(T&&q.length===0&&R.substring(v,v+L)===T){if(fe===-1)return Fe();v=fe+k,fe=R.indexOf(C,v),$=R.indexOf(p,v)}else if($!==-1&&($<fe||fe===-1))q.push(R.substring(v,$)),v=$+I,$=R.indexOf(p,v);else{if(fe===-1)break;if(q.push(R.substring(v,fe)),Re(fe+k),X&&(at(),N))return Fe();if(W&&Q.length>=W)return Fe(!0)}else for(le=v,v++;;){if((le=R.indexOf(c,le+1))===-1)return J||re.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Q.length,index:v}),Be();if(le===A-1)return Be(R.substring(v,le).replace(We,c));if(c!==D||R[le+1]!==D){if(c===D||le===0||R[le-1]!==D){$!==-1&&$<le+1&&($=R.indexOf(p,le+1)),fe!==-1&&fe<le+1&&(fe=R.indexOf(C,le+1));var et=Ke(fe===-1?$:Math.min($,fe));if(R.substr(le+1+et,I)===p){q.push(R.substring(v,le).replace(We,c)),R[v=le+1+et+I]!==c&&(le=R.indexOf(c,v)),$=R.indexOf(p,v),fe=R.indexOf(C,v);break}var Se=Ke(fe);if(R.substring(le+1+Se,le+1+Se+k)===C){if(q.push(R.substring(v,le).replace(We,c)),Re(le+1+Se+k),$=R.indexOf(p,v),le=R.indexOf(c,v),X&&(at(),N))return Fe();if(W&&Q.length>=W)return Fe(!0);break}re.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Q.length,index:v}),le++}}else le++}return Be();function Qe(Oe){Q.push(Oe),x=v}function Ke(Oe){var Nt=0;if(Oe!==-1){var ut=R.substring(le+1,Oe);ut&&ut.trim()===""&&(Nt=ut.length)}return Nt}function Be(Oe){return J||(Oe===void 0&&(Oe=R.substring(v)),q.push(Oe),v=A,Qe(q),X&&at()),Fe()}function Re(Oe){v=Oe,Qe(q),q=[],fe=R.indexOf(C,v)}function Fe(Oe){return{data:Q,errors:re,meta:{delimiter:p,linebreak:C,aborted:N,truncated:!!Oe,cursor:x+(B||0)}}}function at(){P(Fe()),Q=[],re=[]}},this.abort=function(){N=!0},this.getCharIndex=function(){return v}}function O(u){var c=u.data,p=o[c.workerId],C=!1;if(c.error)p.userError(c.error,c.file);else if(c.results&&c.results.data){var T={abort:function(){C=!0,V(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ie,resume:ie};if(z(p.userStep)){for(var P=0;P<c.results.data.length&&(p.userStep({data:c.results.data[P],errors:c.results.errors,meta:c.results.meta},T),!C);P++);delete c.results}else z(p.userChunk)&&(p.userChunk(c.results,T,c.file),delete c.results)}c.finished&&!C&&V(c.workerId,c.results)}function V(u,c){var p=o[u];z(p.userComplete)&&p.userComplete(c),p.terminate(),delete o[u]}function ie(){throw new Error("Not implemented.")}function H(u){if(typeof u!="object"||u===null)return u;var c=Array.isArray(u)?[]:{};for(var p in u)c[p]=H(u[p]);return c}function ne(u,c){return function(){u.apply(c,arguments)}}function z(u){return typeof u=="function"}return s&&(i.onmessage=function(u){var c=u.data;if(l.WORKER_ID===void 0&&c&&(l.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var p=l.parse(c.input,c.config);p&&i.postMessage({workerId:l.WORKER_ID,results:p,finished:!0})}}),(_.prototype=Object.create(f.prototype)).constructor=_,(g.prototype=Object.create(f.prototype)).constructor=g,(b.prototype=Object.create(b.prototype)).constructor=b,(m.prototype=Object.create(f.prototype)).constructor=m,l})})(pr);var Zr=pr.exports;const Xr=Qr(Zr),$r="https://will-moore.github.io/ome2024-ngff-challenge/idr-mark.svg",es="https://will-moore.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",ts="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let ns={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function vi(t){if(t==="IDR")return $r;let e=ns[t];return e?e==="https://nfdi4bioimage.de/"?es:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function vr(t,e,n={}){Xr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(f=>{let _={...n};for(let g=0;g<r.length;g++)_[r[g]]=f[g];return _}),a=o.filter(f=>{var _;return!((_=f.url)!=null&&_.endsWith(".csv"))}),l={};a.forEach(f=>{if(l[f.url]){console.warn("Removing duplicate URL:",f.url);return}l[f.url]=f}),a=Object.values(l);let h=o.filter(f=>{var _;return(_=f.url)==null?void 0:_.includes(".csv")});e.addCsv(t,h,a.length),e.addRows(a),h.forEach(f=>{let _=f.url;f.csv=_,vr(_,e,f)})}})}async function br(t){return await fetch(t).then(e=>e.json())}function vn(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function is(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function rs(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(yr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let f=0;f<o;f++){for(let _=0;_<t.length;_++){let g=n[_],b=t[_].data,m=e[_],F=(b[f]-m[0])/(m[1]-m[0]);for(let M=0;M<3;M++){let O=F*g[M]<<0;l[h*4+M]=Math.max(l[h*4+M],O)}}l[h*4+3]=255,h+=1}return performance.now()-a<100&&os(l,5)[4]<1&&(l=ss(l,2)),l}function ss(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function os(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function yr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const mn=4,lt={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},ls=[lt.magenta,lt.green],as=[lt.red,lt.green,lt.blue],bi=Object.values(lt).slice(0,-2);function us(t){let e;return t<=mn?e=Array(t).fill(!0):e=[...Array(mn).fill(!0),...Array(t-mn).fill(!1)],e}function cs(t,e){let n=[];if(t==1)n=[lt.white];else if(t==2)n=ls;else if(t===3)n=as;else if(t<=mn)n=bi.slice(0,t);else{n=Array(t).fill(lt.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=bi[r]}return n.map(wr)}function wr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class kr{constructor(){this.store=Dn({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await br(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=Bt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class fs extends kr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await br(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Er=new kr,Sr=new fs,yi=5;async function Ht(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await Ht(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await Ht(s)}}class hs{constructor(e="index",n=!0){this.store=Dn([]),this.selectedRow=Dn(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0;for(let o of r.child_csv)s+=o.image_count||0;return{...r,total_count:s}}):[]}addCsv(e,n,i){n=n.map(s=>({...s,child_csv:[]}));let r;for(let s of this.csvFiles){if(s.url===e){r=s;break}for(let o of s.child_csv){if(o.url===e){r=o;break}for(let a of o.child_csv)if(a.url===e){r=a;break}}}r?(r.image_count=i,r.child_csv=n):(r={url:e,image_count:i,child_csv:n},this.csvFiles.push(r))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,h)=>r["size_"+l]=o[h]),r.dim_count=o.reduce((l,h)=>l+(h>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);Er.addTerms(n);let i=e.map(r=>r.fbbiId);Sr.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var g;const[n,i,r]=await Ht(e);let s=[],o=0,a=0,l=!1,h=!0,f={multiscales:n},_=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const b=(g=n[0])==null?void 0:g.datasets[0],m=b==null?void 0:b.path;if(m){const E=await fetch(`${i}/${m}/zarr.json`).then(F=>F.json()).catch(F=>{console.log(`----> Failed to parse ${i}/${m}/zarr.json`,F)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:_,shape:s,well_count:o,field_count:a,load_failed:l,loaded:h})}async loadRocrateJsonAllRows(){let e=Bt(this.store);for(let n=0;n<e.length;n=n+yi){let i=is(n,Math.min(n+yi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=Bt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return Bt(this.store)}getRow(e){return Bt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ae=new hs;function ds(t){let e,n,i,r,s,o;return{c(){e=y("button"),n=y("span"),n.textContent="^",i=Z(),r=y("span"),r.textContent="^",w(n,"class","acc svelte-17vd65t"),It(n,"strong",t[1]),w(r,"class","dec svelte-17vd65t"),It(r,"strong",!t[1]),w(e,"class","svelte-17vd65t")},m(a,l){te(a,e,l),d(e,n),d(e,i),d(e,r),s||(o=pe(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&It(n,"strong",a[1]),l&2&&It(r,"strong",!a[1])},i:Ie,o:Ie,d(a){a&&ee(e),s=!1,o()}}}function _s(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class gs extends $e{constructor(e){super(),Xe(this,e,_s,ds,He,{toggleAscending:0,sortAscending:1})}}const _n={AUTO:"auto",START:"start",CENTER:"center",END:"end"},nt={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ut={OBSERVED:0,REQUESTED:1},ms={[nt.VERTICAL]:"top",[nt.HORIZONTAL]:"left"},wi={[nt.VERTICAL]:"scrollTop",[nt.HORIZONTAL]:"scrollLeft"};class ps{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=_n.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case _n.END:l=a;break;case _n.CENTER:l=o-(n-s.size)/2;break;case _n.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const vs=t=>({}),ki=t=>({});function Ei(t,e,n){const i=t.slice();return i[37]=e[n],i}const bs=t=>({style:t[0]&4,index:t[0]&4}),Si=t=>({style:t[37].style,index:t[37].index}),ys=t=>({}),Ai=t=>({});function Ci(t,e){let n,i;const r=e[21].item,s=zn(r,e,e[20],Si);return{key:t,first:null,c(){n=wn(),s&&s.c(),this.first=n},m(o,a){te(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&Ln(s,r,e,e[20],i?On(r,e[20],a,bs):Fn(e[20]),Si)},i(o){i||(ae(s,o),i=!0)},o(o){ge(s,o),i=!1},d(o){o&&ee(n),s&&s.d(o)}}}function ws(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,h=zn(l,t,t[20],Ai);let f=Ne(t[2]);const _=m=>m[0]?m[0](m[37].index):m[37].index;for(let m=0;m<f.length;m+=1){let E=Ei(t,f,m),F=_(E);s.set(F,r[m]=Ci(F,E))}const g=t[21].footer,b=zn(g,t,t[20],ki);return{c(){e=y("div"),h&&h.c(),n=Z(),i=y("div");for(let m=0;m<r.length;m+=1)r[m].c();o=Z(),b&&b.c(),w(i,"class","virtual-list-inner svelte-dwpad5"),w(i,"style",t[4]),w(e,"class","virtual-list-wrapper svelte-dwpad5"),w(e,"style",t[3])},m(m,E){te(m,e,E),h&&h.m(e,null),d(e,n),d(e,i);for(let F=0;F<r.length;F+=1)r[F]&&r[F].m(i,null);d(e,o),b&&b.m(e,null),t[22](e),a=!0},p(m,E){h&&h.p&&(!a||E[0]&1048576)&&Ln(h,l,m,m[20],a?On(l,m[20],E,ys):Fn(m[20]),Ai),E[0]&1048581&&(f=Ne(m[2]),Ft(),r=mr(r,E,_,1,m,f,s,i,Kr,Ci,null,Ei),Mt()),(!a||E[0]&16)&&w(i,"style",m[4]),b&&b.p&&(!a||E[0]&1048576)&&Ln(b,g,m,m[20],a?On(g,m[20],E,vs):Fn(m[20]),ki),(!a||E[0]&8)&&w(e,"style",m[3])},i(m){if(!a){ae(h,m);for(let E=0;E<f.length;E+=1)ae(r[E]);ae(b,m),a=!0}},o(m){ge(h,m);for(let E=0;E<r.length;E+=1)ge(r[E]);ge(b,m),a=!1},d(m){m&&ee(e),h&&h.d(m);for(let E=0;E<r.length;E+=1)r[E].d();b&&b.d(m),t[22](null)}}}const ks=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Es(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:_=null}=e,{scrollDirection:g=nt.VERTICAL}=e,{scrollOffset:b=null}=e,{scrollToIndex:m=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:F="instant"}=e,{overscanCount:M=3}=e;const O=jr(),V=new ps({itemCount:a,itemSize:l,estimatedItemSize:J()});let ie=!1,H,ne=[],z={offset:b||m!=null&&ne.length&&N(m)||0,scrollChangeReason:Ut.REQUESTED},u=z,c={scrollToIndex:m,scrollToAlignment:E,scrollOffset:b,itemCount:a,itemSize:l,estimatedItemSize:h},p={},C="",T="";j(),sn(()=>{n(18,ie=!0),H.addEventListener("scroll",R,ks),b!=null?D(b):m!=null&&D(N(m))}),Hn(()=>{ie&&H.removeEventListener("scroll",R)});function P(){if(!ie)return;const k=c.scrollToIndex!==m||c.scrollToAlignment!==E,L=c.itemCount!==a||c.itemSize!==l||c.estimatedItemSize!==h;L&&(V.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:J()}),v()),c.scrollOffset!==b?n(19,z={offset:b||0,scrollChangeReason:Ut.REQUESTED}):typeof m=="number"&&(k||L)&&n(19,z={offset:N(m,E,a),scrollChangeReason:Ut.REQUESTED}),c={scrollToIndex:m,scrollToAlignment:E,scrollOffset:b,itemCount:a,itemSize:l,estimatedItemSize:h}}function W(){if(!ie)return;const{offset:k,scrollChangeReason:L}=z;(u.offset!==k||u.scrollChangeReason!==L)&&j(),u.offset!==k&&L===Ut.REQUESTED&&D(k),u=z}function j(){const{offset:k}=z,{start:L,stop:X}=V.getVisibleRange({containerSize:g===nt.VERTICAL?s:o,offset:k,overscanCount:M});let Q=[];const re=V.getTotalSize();g===nt.VERTICAL?(n(3,C=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,T=`flex-direction:column;height:${re}px;`)):(n(3,C=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,T=`min-height:100%;width:${re}px;`));const q=f!=null&&f.length!==0;if(q)for(let x=0;x<f.length;x++){const G=f[x];Q.push({index:G,style:A(G,!0)})}if(L!==void 0&&X!==void 0){for(let x=L;x<=X;x++)q&&f.includes(x)||Q.push({index:x,style:A(x,!1)});O("itemsUpdated",{start:L,end:X})}n(2,ne=Q)}function D(k){"scroll"in H?H.scroll({[ms[g]]:k,behavior:F}):n(1,H[wi[g]]=k,H)}function v(k=0){p={},V.resetItem(k),j()}function N(k,L=E,X=a){return(k<0||k>=X)&&(k=0),V.getUpdatedOffsetForIndex({align:L,containerSize:g===nt.VERTICAL?s:o,currentOffset:z.offset||0,targetIndex:k})}function R(k){const L=B();L<0||z.offset===L||k.target!==H||(n(19,z={offset:L,scrollChangeReason:Ut.OBSERVED}),O("afterScroll",{offset:L,event:k}))}function B(){return H[wi[g]]}function J(){return h||typeof l=="number"&&l||50}function A(k,L){if(p[k])return p[k];const{size:X,offset:Q}=V.getSizeAndPositionForIndex(k);let re;return g===nt.VERTICAL?(re=`left:0;width:100%;height:${X}px;`,L?re+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${Q}px;margin-bottom:${-(Q+X)}px;`:re+=`position:absolute;top:${Q}px;`):(re=`top:0;width:${X}px;`,L?re+=`position:sticky;z-index:1;left:0;margin-left:${Q}px;margin-right:${-(Q+X)}px;`:re+=`position:absolute;height:100%;left:${Q}px;`),p[k]=re}function I(k){Lt[k?"unshift":"push"](()=>{H=k,n(1,H)})}return t.$$set=k=>{"height"in k&&n(5,s=k.height),"width"in k&&n(6,o=k.width),"itemCount"in k&&n(7,a=k.itemCount),"itemSize"in k&&n(8,l=k.itemSize),"estimatedItemSize"in k&&n(9,h=k.estimatedItemSize),"stickyIndices"in k&&n(10,f=k.stickyIndices),"getKey"in k&&n(0,_=k.getKey),"scrollDirection"in k&&n(11,g=k.scrollDirection),"scrollOffset"in k&&n(12,b=k.scrollOffset),"scrollToIndex"in k&&n(13,m=k.scrollToIndex),"scrollToAlignment"in k&&n(14,E=k.scrollToAlignment),"scrollToBehaviour"in k&&n(15,F=k.scrollToBehaviour),"overscanCount"in k&&n(16,M=k.overscanCount),"$$scope"in k&&n(20,r=k.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&P(),t.$$.dirty[0]&524288&&W(),t.$$.dirty[0]&263264&&ie&&v(0)},[_,H,ne,C,T,s,o,a,l,h,f,g,b,m,E,F,M,v,ie,z,r,i,I]}class Ss extends $e{constructor(e){super(),Xe(this,e,Es,ws,He,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),De()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),De()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),De()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),De()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),De()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),De()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),De()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),De()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),De()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),De()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),De()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),De()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),De()}get recomputeSizes(){return this.$$.ctx[17]}}class on extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Kn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const As="modulepreload",Cs=function(t){return"https://will-moore.github.io/ome2024-ngff-challenge/"+t},Ii={},jt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Cs(a),a in Ii)return;Ii[a]=!0;const l=a.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":As,l||(f.as="script"),f.crossOrigin="",f.href=a,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((_,g)=>{f.addEventListener("load",_),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var xe;class Ar{constructor(e,n,i){Te(this,xe);typeof e=="number"?ye(this,xe,new Uint8Array(e)):e instanceof ArrayBuffer?ye(this,xe,new Uint8Array(e,n,i)):ye(this,xe,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return Y(this,xe).byteOffset}get byteLength(){return Y(this,xe).byteLength}get buffer(){return Y(this,xe).buffer}get length(){return Y(this,xe).length}get(e){let n=Y(this,xe)[e];return typeof n=="number"?n!==0:n}set(e,n){Y(this,xe)[e]=n?1:0}fill(e){Y(this,xe).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}xe=new WeakMap;var zt;class Jn{constructor(e,n,i,r){se(this,"_data");se(this,"chars");Te(this,zt);if(this.chars=e,ye(this,zt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(Y(this,zt).encode(n))}fill(e){const n=Y(this,zt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}zt=new WeakMap;var Le;const $n=class $n{constructor(e,n,i,r){Te(this,Le);se(this,"chars");if(this.chars=e,typeof n=="number")ye(this,Le,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),ye(this,Le,new Int32Array(n,i,r));else{const s=n,o=new $n(e,1);ye(this,Le,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*Y(o,Le)}()))}}get BYTES_PER_ELEMENT(){return Y(this,Le).BYTES_PER_ELEMENT*this.chars}get byteLength(){return Y(this,Le).byteLength}get byteOffset(){return Y(this,Le).byteOffset}get buffer(){return Y(this,Le).buffer}get length(){return Y(this,Le).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(Y(this,Le)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=Y(this,Le).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=Y(this,Le).subarray(0,this.chars);for(let i=1;i<this.length;i++)Y(this,Le).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Le=new WeakMap;let Kt=$n;function ln(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Ti(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const Is={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Ar},Ts=/v2:([US])(\d+)/;function Cr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Ts);if(e){let[,i,r]=e;return(i==="U"?Kt:Jn).bind(null,Number(r))}let n=Is[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function mt(t,e){return(e==="C"?Rs:zs)(t)}function Rs(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function zs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Os({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Nn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Ls=/^([<|>])(.*)$/;function Fs(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Ls);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Ms(t,e={}){let n=[],i=Fs(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Ds(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Ns(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Ps(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Ir(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ri=qs();function qs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function zi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Jt,ot,Gt,Yt,Ot;const ei=class ei{constructor(e,n){se(this,"kind","array_to_bytes");Te(this,Jt);Te(this,ot);Te(this,Gt);Te(this,Yt);Te(this,Ot);ye(this,Ot,e==null?void 0:e.endian),ye(this,ot,Cr(n.data_type)),ye(this,Yt,n.shape),ye(this,Jt,mt(n.shape,Nn(n.codecs)));const i=new(Y(this,ot))(0);ye(this,Gt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new ei(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ri&&Y(this,Ot)==="big"&&Ti(n,zi(Y(this,ot))),n}decode(e){return Ri&&Y(this,Ot)==="big"&&Ti(e,zi(Y(this,ot))),{data:new(Y(this,ot))(e.buffer,e.byteOffset,e.byteLength/Y(this,Gt)),shape:Y(this,Yt),stride:Y(this,Jt)}}};Jt=new WeakMap,ot=new WeakMap,Gt=new WeakMap,Yt=new WeakMap,Ot=new WeakMap;let bn=ei;class Gn{constructor(){se(this,"kind","bytes_to_bytes")}static fromConfig(){return new Gn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Us(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function js(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Qt,Zt;const ti=class ti{constructor(e={}){se(this,"configuration");se(this,"kind","array_to_bytes");Te(this,Qt);Te(this,Zt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:h=!0}=e;let f=e.separators;f||(l?f=[", ",": "]:f=[",",":"]),ye(this,Qt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:f,sort_keys:a}),ye(this,Zt,{strict:h})}static fromConfig(e){return new ti(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=Y(this,Qt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Us),a&&l.push(js);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;l.length&&(f=(g,b)=>{let m=b;for(let E of l)m=E(g,m);return m});let _=JSON.stringify(h,f,n);return r&&(_=_.replace(/[\u007F-\uFFFF]/g,g=>{const b=`0000${g.charCodeAt(0).toString(16)}`;return`\\u${b.substring(b.length-4)}`})),new TextEncoder().encode(_)}decode(e){const{strict:n}=Y(this,Zt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=ln(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=mt(r,"C");return{data:i,shape:r,stride:s}}};Qt=new WeakMap,Zt=new WeakMap;let Pn=ti;function Oi(t){return t instanceof Ar||t instanceof Jn||t instanceof Kt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Bs(t,e){let n;return t.data instanceof Jn||t.data instanceof Kt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:mt(t.shape,e)}}function xs(t,e){let n=Bs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Oi(t.data),a=Oi(n.data);for(let l=0;l<r;l++){let h=0;for(let f=0;f<i;f++)h+=s[f]*n.stride[f];a[h]=o[l],s[0]+=1;for(let f=0;f<i;f++)if(s[f]===t.shape[f]){if(f+1===i)break;s[f]=0,s[f+1]+=1}}return n}function Vs(t){if(!t.stride)return"C";let e=mt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Yn{constructor(e){se(this,"configuration");se(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Yn(e)}encode(e){var n,i;return Vs(e)===((n=this.configuration)==null?void 0:n.order)?e:xs(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Xt,$t;const ni=class ni{constructor(e){se(this,"kind","array_to_bytes");Te(this,Xt);Te(this,$t);ye(this,Xt,e),ye(this,$t,mt(e,"C"))}static fromConfig(e,n){return new ni(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:Y(this,Xt),stride:Y(this,$t)}}};Xt=new WeakMap,$t=new WeakMap;let qn=ni;function Ws(){return new Map().set("blosc",()=>jt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>jt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>jt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>jt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>jt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Yn).set("bytes",()=>bn).set("crc32c",()=>Gn).set("vlen-utf8",()=>qn).set("json2",()=>Pn)}const Hs=Ws();function Un(t){let e;return{async encode(n){e||(e=await Li(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Li(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Li(t){let e=t.codecs.map(async s=>{var a;let o=await((a=Hs.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!Ks(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=bn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Ks(t){return t.data_type!=="v2:object"}const Fi=18446744073709551615n;function Js(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,h)=>l/i.chunk_shape[h]),o=Un({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let h=l.map((O,V)=>Math.floor(O/s[V])),f=t.resolve(n(h)).path,_;if(f in a)_=a[f];else{let O=4,V=16*s.reduce((H,ne)=>H*ne,1),ie=await r(f,{suffixLength:V+O});_=a[f]=ie?await o.decode(ie):null}if(_===null)return;let{data:g,shape:b,stride:m}=_,E=l.map((O,V)=>O%b[V]).reduce((O,V,ie)=>O+V*m[ie],0),F=g[E],M=g[E+1];if(!(F===Fi&&M===Fi))return r(f,{offset:Number(F),length:Number(M)})}}class Dt{constructor(e,n="/"){se(this,"store");se(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Dt(this.store,new URL(e,n).pathname)}}var en;class Qn extends Dt{constructor(n,i,r){super(n,i);se(this,"kind","group");Te(this,en);ye(this,en,r)}get attrs(){return Y(this,en).attributes}}en=new WeakMap;const xt=Symbol("zarrita.context");function Gs(t){return t[xt]}function Ys(t,e){let{configuration:n}=e.codecs.find(Ps)??{},i={encode_chunk_key:Os(e.chunk_key_encoding),TypedArray:Cr(e.data_type),fill_value:e.fill_value};if(n){let s=Nn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Un({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return mt(o,a??s)},get_chunk_bytes:Js(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Nn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Un({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return mt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var fr,hr,gt,dr;let yn=(dr=class extends(hr=Dt,fr=xt,hr){constructor(n,i,r){super(n,i);se(this,"kind","array");Te(this,gt);se(this,fr);ye(this,gt,{...r,fill_value:Ir(r)}),this[xt]=Ys(this,r)}get attrs(){return Y(this,gt).attributes}get shape(){return Y(this,gt).shape}get chunks(){return this[xt].chunk_shape}get dtype(){return Y(this,gt).data_type}async getChunk(n,i){let r=this[xt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,h)=>l*h,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Ns(this.dtype,n)}},gt=new WeakMap,dr),kn=Qs();function Qs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Zs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?ln(e):{}}async function Xs(t,e={}){let n="store"in t?t:new Dt(t),i={};return(e.attrs??!0)&&(i=await Zs(n)),e.kind==="array"?Mi(n,i):e.kind==="group"?Di(n,i):Mi(n,i).catch(r=>{if(r instanceof on)return Di(n,i);throw r})}async function Mi(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new on("v2 array",{cause:new Kn(n)});return kn.increment(t.store,"v2"),new yn(t.store,t.path,Ms(ln(i),e))}async function Di(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new on("v2 group",{cause:new Kn(n)});return kn.increment(t.store,"v2"),new Qn(t.store,t.path,Ds(ln(i),e))}async function $s(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new on("v3 array or group",{cause:new Kn(n)});let r=ln(i);return r.node_type==="array"&&(r.fill_value=Ir(r)),r.node_type==="array"?new yn(e,t.path,r):new Qn(e,t.path,r)}async function eo(t,e={}){let n="store"in t?t:new Dt(t),i=await $s(n);if(kn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof yn||e.kind==="group"&&i instanceof Qn)return i;let r=i instanceof yn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function _t(t,e={}){let n="store"in t?t.store:t,i=kn.version_max(n),r=i==="v2"?_t.v2:_t.v3,s=i==="v2"?_t.v3:_t.v2;return r(t,e).catch(o=>{if(o instanceof on)return s(t,e);throw o})}_t.v2=Xs;_t.v3=eo;function*to(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*no(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function io({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function jn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function ro(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Zn extends Error{constructor(e){super(e),this.name="IndexError"}}function so(t,e){throw new Zn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function oo(t){throw new Zn(`index out of bounds for dimension with length ${t}`)}function lo(){throw new Zn("only slices with step >= 1 are supported")}function ao(t,e){t.length>e.length&&so(t,e)}function uo(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&oo(e),t}class co{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){se(this,"dim_sel");se(this,"dim_len");se(this,"dim_chunk_len");se(this,"nitems");e=uo(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Ni{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){se(this,"start");se(this,"stop");se(this,"step");se(this,"dim_len");se(this,"dim_chunk_len");se(this,"nitems");se(this,"nchunks");const[r,s,o]=io(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&lo(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of to(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const b=(r-this.start)%this.step;b&&(l+=this.step-b),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const h=this.stop>s?o:this.stop-r,f=[l,h,this.step],_=Math.ceil((h-l)/this.step),g=[a,a+_,1];yield{dim_chunk_ix:i,dim_chunk_sel:f,dim_out_sel:g}}}}function fo(t,e){let n=[];return t===null?n=e.map(i=>jn(null)):Array.isArray(t)&&(n=t.map(i=>i??jn(null))),ao(n,e),n}class ho{constructor({selection:e,shape:n,chunk_shape:i}){se(this,"dim_indexers");se(this,"shape");this.dim_indexers=fo(e,n).map((r,s)=>new(typeof r=="number"?co:Ni)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Ni).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of no(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function _o(t,e){return"get"in t?t.get(e):t[e]}async function go(t,e,n,i){var l;let r=Gs(t),s=new ho({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??ro();for(const{chunk_coords:h,mapping:f}of s)a.add(async()=>{let{data:_,shape:g,stride:b}=await t.getChunk(h,n.opts),m=i.prepare(_,g,b);i.set_from_chunk(o,m,f)});return await a.onIdle(),s.shape.length===0?_o(o.data,0):o}function Xn(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return Xn(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function Rn(t){return globalThis.Array.isArray(t.data)?{data:Xn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function mo(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function po(t,e){if(globalThis.Array.isArray(t.data))return Xn([e]);let n=mo(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const vo={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=Rn(t);Bn(i,e,po(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=Rn(t);pn(i,Rn(e),i.bytes_per_element,n)}};async function bo(t,e=null,n={}){return go(t,e,n,vo)}function Tr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Bn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const g=t.data.subarray(o*r*i);Bn({data:g,stride:a},s,n,i);return}const[l,h,f]=r,_=Tr(l,h,f);if(s.length===0){for(let g=0;g<_;g++)t.data.set(n,o*(l+f*g)*i);return}for(let g=0;g<_;g++){const b=t.data.subarray(o*(l+f*g)*i);Bn({data:b,stride:a},s,n,i)}}function pn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}pn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let M=r.from*n;t.data.set(e.data.subarray(M,M+n),0);return}pn(t,{data:e.data.subarray(l*r.from*n),stride:h},n,s);return}const[f,_,g]=r.to,[b,m,E]=r.from,F=Tr(f,_,g);if(s.length===0){if(g===1&&E===1&&o===1&&l===1){let M=b*n,O=F*n;t.data.set(e.data.subarray(M,M+O),f*n);return}for(let M=0;M<F;M++){let O=l*(b+E*M)*n;t.data.set(e.data.subarray(O,O+n),o*(f+g*M)*n)}return}for(let M=0;M<F;M++)pn({data:t.data.subarray(o*(f+M*g)*n),stride:a},{data:e.data.subarray(l*(b+M*E)*n),stride:h},n,s)}function Rr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function yo(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Pi(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function qi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function wo(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Rr(t,o-e,o,n)}var tn,nn,rn,xn;class ko{constructor(e,n={}){Te(this,rn);se(this,"url");Te(this,tn);Te(this,nn);this.url=e,ye(this,tn,n.overrides??{}),ye(this,nn,n.useSuffixRequest??!1)}async get(e,n={}){let i=Pi(this.url,e).href,r=await fetch(i,In(this,rn,xn).call(this,n));return qi(r)}async getRange(e,n,i={}){let r=Pi(this.url,e),s=In(this,rn,xn).call(this,i),o;return"suffixLength"in n?o=await wo(r,n.suffixLength,s,Y(this,nn)):o=await Rr(r,n.offset,n.length,s),qi(o)}}tn=new WeakMap,nn=new WeakMap,rn=new WeakSet,xn=function(e){return yo(Y(this,tn),e)};function Eo(t){let e,n;return{c(){e=y("div"),n=y("canvas"),he(n,"width",t[3]+"px"),he(n,"height",t[4]+"px"),he(n,"background-color","lightgrey"),w(n,"height",t[2]),w(n,"width",t[1]),w(n,"class","svelte-lwhhyg"),w(e,"class","canvasWrapper svelte-lwhhyg"),he(e,"width",t[3]+"px"),he(e,"height",t[4]+"px"),It(e,"spinner",t[5])},m(i,r){te(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&he(n,"width",i[3]+"px"),r&16&&he(n,"height",i[4]+"px"),r&4&&w(n,"height",i[2]),r&2&&w(n,"width",i[1]),r&8&&he(e,"width",i[3]+"px"),r&16&&he(e,"height",i[4]+"px"),r&32&&It(e,"spinner",i[5])},i:Ie,o:Ie,d(i){i&&ee(e),t[12](null)}}}function So(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,h,f=a,_=a;o>1?_=f/o:o<1&&(f=_*o);let g=f,b=_,m=!0;const E=new AbortController;async function F(){var R;let O=r.multiscales[0].datasets.map(B=>B.path),V=r.multiscales[0].axes.map(B=>B.name),ie=O.at(-1);s!=null&&s<O.length&&(ie=O[s]);const H=new ko(i+"/"+ie),ne=await _t.v3(H,{kind:"array"});let z=V.indexOf("c"),u=ne.shape;if(u.at(-1)*u.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",u,i);return}let c=u.length,p=u[z]||1,C,T;(R=r==null?void 0:r.omero)!=null&&R.channels?(C=r.omero.channels.map(B=>B.active),T=r.omero.channels.map(B=>wr(B.color))):(C=us(p),T=cs(p,C)),T=T.filter((B,J)=>C[J]);let W=C.reduce((B,J,A)=>(J&&B.push(A),B),[]).map(B=>{let J=u.map((A,I)=>I==z?B:I>=c-2?jn(0,A):V[I]=="z"||V[I]=="t"?parseInt(A/2+""):0);return bo(ne,J,{opts:{signal:E.signal}})}),j=await Promise.all(W),D=j.map(B=>yr(B)),v=rs(j,D,T);n(1,f=u.at(-1)),n(2,_=u.at(-2));let N=f/a;_>f&&(N=_/a),n(3,g=f/N),n(4,b=_/N),setTimeout(()=>{const B=h.getContext("2d");n(5,m=!1),B.putImageData(new ImageData(v,f,_),0,0)},100)}sn(()=>{F()}),Hn(()=>{E.abort()});function M(O){Lt[O?"unshift":"push"](()=>{h=O,n(0,h)})}return t.$$set=O=>{"source"in O&&n(6,i=O.source),"attrs"in O&&n(7,r=O.attrs),"thumbDatasetIndex"in O&&n(8,s=O.thumbDatasetIndex),"thumbAspectRatio"in O&&n(9,o=O.thumbAspectRatio),"cssSize"in O&&n(10,a=O.cssSize),"max_size"in O&&n(11,l=O.max_size)},[h,f,_,g,b,m,i,r,s,o,a,l,M]}class zr extends $e{constructor(e){super(),Xe(this,e,So,Eo,He,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function Ui(t,e,n){const i=t.slice();return i[11]=e[n],i}function ji(t){let e,n;return e=new zr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Ze(e.$$.fragment)},m(i,r){Ge(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(ae(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Ye(e,i)}}}function Bi(t){let e,n,i,r,s=t[0].source+"",o,a,l=t[0].csv&&xi(t);return{c(){e=y("div"),n=U(`Data
        `),l&&l.c(),i=U(`
        provided by `),r=y("strong"),o=U(s),a=U("."),he(r,"color","grey")},m(h,f){te(h,e,f),d(e,n),l&&l.m(e,null),d(e,i),d(e,r),d(r,o),d(e,a)},p(h,f){h[0].csv?l?l.p(h,f):(l=xi(h),l.c(),l.m(e,i)):l&&(l.d(1),l=null),f&1&&s!==(s=h[0].source+"")&&ke(o,s)},d(h){h&&ee(e),l&&l.d()}}}function xi(t){var o;let e,n,i=((o=t[0].csv)==null?void 0:o.split("/").pop().replace(".csv",""))+"",r,s;return{c(){e=U(`from collection
          `),n=y("a"),r=U(i),w(n,"title","Show collection in a new tab"),w(n,"href",s=Ki(t[0])),w(n,"target","_blank")},m(a,l){te(a,e,l),te(a,n,l),d(n,r)},p(a,l){var h;l&1&&i!==(i=((h=a[0].csv)==null?void 0:h.split("/").pop().replace(".csv",""))+"")&&ke(r,i),l&1&&s!==(s=Ki(a[0]))&&w(n,"href",s)},d(a){a&&(ee(e),ee(n))}}}function Vi(t){let e,n,i,r,s,o;return{c(){e=U("Browse "),n=y("a"),i=U("Original data"),o=U("."),w(n,"title",r="Link to original data: "+t[0].origin),w(n,"href",s=t[0].origin),w(n,"target","_blank")},m(a,l){te(a,e,l),te(a,n,l),d(n,i),te(a,o,l)},p(a,l){l&1&&r!==(r="Link to original data: "+a[0].origin)&&w(n,"title",r),l&1&&s!==(s=a[0].origin)&&w(n,"href",s)},d(a){a&&(ee(e),ee(n),ee(o))}}}function Wi(t){let e=t[11].toUpperCase()+"",n,i,r=t[0][`size_${t[11]}`]+"",s,o;return{c(){n=U(e),i=U(":"),s=U(r),o=U("  ")},m(a,l){te(a,n,l),te(a,i,l),te(a,s,l),te(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[11]}`]+"")&&ke(s,r)},d(a){a&&(ee(n),ee(i),ee(s),ee(o))}}}function Hi(t){let e,n=t[0][`size_${t[11]}`]!==void 0&&Wi(t);return{c(){n&&n.c(),e=wn()},m(i,r){n&&n.m(i,r),te(i,e,r)},p(i,r){i[0][`size_${i[11]}`]!==void 0?n?n.p(i,r):(n=Wi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&ee(e),n&&n.d(i)}}}function Ao(t){let e,n,i=vn(t[0].written)+"",r;return{c(){e=y("div"),n=U("Data size: "),r=U(i)},m(s,o){te(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=vn(s[0].written)+"")&&ke(r,i)},d(s){s&&ee(e)}}}function Co(t){let e,n,i=t[0].shards+"",r;return{c(){e=y("div"),n=U("Shard shape: "),r=U(i)},m(s,o){te(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&ke(r,i)},d(s){s&&ee(e)}}}function Io(t){let e,n,i=t[0].chunks+"",r;return{c(){e=y("div"),n=U("Chunk shape: "),r=U(i)},m(s,o){te(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&ke(r,i)},d(s){s&&ee(e)}}}function To(t){let e,n,i,r,s,o,a=Ji(t[0].url)+"",l,h,f,_=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",g,b,m=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",E,F,M,O,V,ie,H,ne,z,u,c,p,C,T,P,W,j=t[3]&&ji(t),D=t[0].source&&Bi(t),v=t[0].origin&&Vi(t),N=Ne(["t","c","z","y","x"]),R=[];for(let I=0;I<5;I+=1)R[I]=Hi(Ui(t,N,I));function B(I,k){return I[2]=="chunk_pixels"?Io:I[2]=="shard_pixels"?Co:Ao}let J=B(t),A=J(t);return{c(){e=y("div"),n=y("div"),j&&j.c(),i=Z(),r=y("div"),s=y("div"),o=y("strong"),l=U(a),h=Z(),f=y("div"),g=Z(),b=y("div"),E=Z(),D&&D.c(),F=Z(),M=y("div"),O=U("Open in "),V=y("a"),ie=U("OME-Validator."),z=Z(),v&&v.c(),u=Z(),c=y("div"),p=U(`Image size:
      `);for(let I=0;I<5;I+=1)R[I].c();C=Z(),A.c(),w(n,"class","thumbWrapper svelte-1kl3tsw"),w(V,"title",H="Open in Validator: "+t[0].url),w(V,"href",ne="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),w(V,"target","_blank"),w(e,"class","zarr-list-item svelte-1kl3tsw")},m(I,k){te(I,e,k),d(e,n),j&&j.m(n,null),d(e,i),d(e,r),d(r,s),d(s,o),d(o,l),d(r,h),d(r,f),f.innerHTML=_,d(r,g),d(r,b),b.innerHTML=m,d(r,E),D&&D.m(r,null),d(r,F),d(r,M),d(M,O),d(M,V),d(V,ie),d(M,z),v&&v.m(M,null),d(r,u),d(r,c),d(c,p);for(let L=0;L<5;L+=1)R[L]&&R[L].m(c,null);d(r,C),A.m(r,null),T=!0,P||(W=pe(n,"click",t[8]),P=!0)},p(I,[k]){if(I[3]?j?(j.p(I,k),k&8&&ae(j,1)):(j=ji(I),j.c(),ae(j,1),j.m(n,null)):j&&(Ft(),ge(j,1,1,()=>{j=null}),Mt()),(!T||k&1)&&a!==(a=Ji(I[0].url)+"")&&ke(l,a),(!T||k&3)&&_!==(_=(I[0].name?I[0].name.replaceAll(I[1],`<mark>${I[1]}</mark>`):"")+"")&&(f.innerHTML=_),(!T||k&130)&&m!==(m=I[7].replaceAll(I[1],`<mark>${I[1]}</mark>`)+"")&&(b.innerHTML=m),I[0].source?D?D.p(I,k):(D=Bi(I),D.c(),D.m(r,F)):D&&(D.d(1),D=null),(!T||k&1&&H!==(H="Open in Validator: "+I[0].url))&&w(V,"title",H),(!T||k&1&&ne!==(ne="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+I[0].url))&&w(V,"href",ne),I[0].origin?v?v.p(I,k):(v=Vi(I),v.c(),v.m(M,null)):v&&(v.d(1),v=null),k&1){N=Ne(["t","c","z","y","x"]);let L;for(L=0;L<5;L+=1){const X=Ui(I,N,L);R[L]?R[L].p(X,k):(R[L]=Hi(X),R[L].c(),R[L].m(c,null))}for(;L<5;L+=1)R[L].d(1)}J===(J=B(I))&&A?A.p(I,k):(A.d(1),A=J(I),A&&(A.c(),A.m(r,null)))},i(I){T||(ae(j),T=!0)},o(I){ge(j),T=!1},d(I){I&&ee(e),j&&j.d(),D&&D.d(),v&&v.d(),Tt(R,I),A.d(),P=!1,W()}}}function Ki(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Ji(t){return t.split("/").pop()}function Ro(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,h,f=1;const _=new AbortController;if(r.size_x&&r.size_y){let b=Math.max(r.size_x,r.size_y);for(h=0;b>256;)h+=1,b=b/2;f=r.size_x/r.size_y}function g(){console.log("Clicked on thumbnail"),Ae.setSelectedRow(r)}return sn(async()=>{let b=r.url;r.series0!==void 0&&(b+="/"+r.series0);let m=await Ht(b,_.signal);n(3,a=m[0]),n(4,l=m[1]),m[2]}),Hn(()=>{_.abort()}),t.$$set=b=>{"rowData"in b&&n(0,r=b.rowData),"textFilter"in b&&n(1,s=b.textFilter),"sortedBy"in b&&n(2,o=b.sortedBy)},t.$$.update=()=>{var b;t.$$.dirty&3&&n(7,i=s!=""&&((b=r.description)!=null&&b.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,h,f,i,g]}class zo extends $e{constructor(e){super(),Xe(this,e,Ro,To,He,{rowData:0,textFilter:1,sortedBy:2})}}function Oo(t){let e,n,i,r;return n=new zo({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=y("div"),Ze(n.$$.fragment),w(e,"slot","item"),w(e,"style",i=t[12]),w(e,"class","row svelte-1xvcjxw")},m(s,o){te(s,e,o),Ge(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&w(e,"style",i)},i(s){r||(ae(n.$$.fragment,s),r=!0)},o(s){ge(n.$$.fragment,s),r=!1},d(s){s&&ee(e),Ye(n)}}}function Lo(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,h;return it(t[8]),it(t[9]),s=new Ss({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Oo,({style:f,index:_})=>({12:f,13:_}),({style:f,index:_})=>(f?4096:0)|(_?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=y("div"),Ze(s.$$.fragment),w(r,"class","imageListContainer svelte-1xvcjxw"),he(r,"height",o)},m(f,_){te(f,r,_),Ge(s,r,null),t[10](r),a=!0,l||(h=[pe(window,"resize",t[8]),pe(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(f,[_]){_&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,f[4]),i=setTimeout(n,100));const g={};_&32&&(g.height=f[5]),_&1&&(g.itemCount=f[0].length),_&28679&&(g.$$scope={dirty:_,ctx:f}),s.$set(g),_&32&&o!==(o=`${f[5]}px`)&&he(r,"height",o)},i(f){a||(ae(s.$$.fragment,f),a=!0)},o(f){ge(s.$$.fragment,f),a=!1},d(f){f&&ee(r),Ye(s),t[10](null),l=!1,rt(h)}}}function Fo(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(E){return r[E].url}let l,h=0,f=0;function _(E){let M=l.offsetTop-20;E.detail.offset-f<0&&h>M&&n(4,h-=1),f=E.detail.offset}function g(){n(5,i=window.innerHeight)}function b(){n(4,h=window.pageYOffset)}function m(E){Lt[E?"unshift":"push"](()=>{l=E,n(3,l)})}return t.$$set=E=>{"tableRows"in E&&n(0,r=E.tableRows),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},n(5,i=0),[r,s,o,l,h,i,a,_,g,b,m]}class Mo extends $e{constructor(e){super(),Xe(this,e,Fo,Lo,He,{tableRows:0,textFilter:1,sortedBy:2})}}function Gi(t){let e,n;return e=new zr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Ze(e.$$.fragment)},m(i,r){Ge(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(ae(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Ye(e,i)}}}function Do(t){let e,n,i=t[0]&&Gi(t);return{c(){i&&i.c(),e=wn()},m(r,s){i&&i.m(r,s),te(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&ae(i,1)):(i=Gi(r),i.c(),ae(i,1),i.m(e.parentNode,e)):i&&(Ft(),ge(i,1,1,()=>{i=null}),Mt())},i(r){n||(ae(i),n=!0)},o(r){ge(i),n=!1},d(r){r&&ee(e),i&&i.d(r)}}}function No(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return sn(async()=>{let l=await Ht(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class Po extends $e{constructor(e){super(),Xe(this,e,No,Do,He,{rowData:4})}}function Yi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Qi(t){let e,n;return e=new Po({props:{rowData:t[1]}}),{c(){Ze(e.$$.fragment)},m(i,r){Ge(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(ae(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Ye(e,i)}}}function Zi(t){let e,n,i=t[2]&&Qi(t);return{c(){i&&i.c(),e=wn()},m(r,s){i&&i.m(r,s),te(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&ae(i,1)):(i=Qi(r),i.c(),ae(i,1),i.m(e.parentNode,e)):i&&(Ft(),ge(i,1,1,()=>{i=null}),Mt())},i(r){n||(ae(i),n=!0)},o(r){ge(i),n=!1},d(r){r&&ee(e),i&&i.d(r)}}}function Xi(t){let e,n=Ne(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=$i(Yi(t,n,r));return{c(){e=y("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){te(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Ne(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=Yi(r,n,o);i[o]?i[o].p(a,s):(i[o]=$i(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&ee(e),Tt(i,r)}}}function $i(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=y("tr"),n=y("td"),r=U(i),s=y("td"),a=U(o)},m(l,h){te(l,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(l,h){h&2&&i!==(i=l[5]+"")&&ke(r,i),h&2&&o!==(o=l[6]+"")&&ke(a,o)},d(l){l&&ee(e)}}}function qo(t){let e,n,i,r,s=t[2],o,a,l,h,f=Zi(t),_=t[1]&&Xi(t);return{c(){e=y("div"),n=y("button"),n.textContent="×",i=Z(),r=y("div"),f.c(),o=Z(),_&&_.c(),w(n,"class","close svelte-1g3sjso"),w(n,"title","Close"),w(r,"class","scrollable svelte-1g3sjso"),w(e,"id","mypopover"),w(e,"popover",""),w(e,"class","svelte-1g3sjso")},m(g,b){te(g,e,b),d(e,n),d(e,i),d(e,r),f.m(r,null),d(r,o),_&&_.m(r,null),t[4](e),a=!0,l||(h=pe(n,"click",t[3]),l=!0)},p(g,[b]){b&4&&He(s,s=g[2])?(Ft(),ge(f,1,1,Ie),Mt(),f=Zi(g),f.c(),ae(f,1),f.m(r,o)):f.p(g,b),g[1]?_?_.p(g,b):(_=Xi(g),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(g){a||(ae(f),a=!0)},o(g){ge(f),a=!1},d(g){g&&ee(e),f.d(g),_&&_.d(),t[4](null),l=!1,h()}}}function Uo(t,e,n){let i,r,s;Ae.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}sn(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Ae.setSelectedRow(null))})});function a(l){Lt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class jo extends $e{constructor(e){super(),Xe(this,e,Uo,qo,He,{})}}const Bo="https://will-moore.github.io/ome2024-ngff-challenge/selectCaret.svg",xo="https://will-moore.github.io/ome2024-ngff-challenge/ome-main-nav.svg";function Vo(t){let e;return{c(){e=y("nav"),e.innerHTML=`<img style="height: 30px" alt="OME Logo" src="${xo}"/> <h2 class="svelte-jcf7ka">2024 NGFF Challenge</h2> <ul class="svelte-jcf7ka"><li class="svelte-jcf7ka"><a href="https://github.com/ome/ome2024-ngff-challenge/" target="_blank" class="svelte-jcf7ka">About</a></li></ul>`,w(e,"class","svelte-jcf7ka")},m(n,i){te(n,e,i)},p:Ie,i:Ie,o:Ie,d(n){n&&ee(e)}}}class Wo extends $e{constructor(e){super(),Xe(this,e,null,Vo,He,{})}}function Ho(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,f,_,g,b,m,E=t[0].total_count+"",F,M,O,V,ie,H,ne;return{c(){e=y("div"),n=y("label"),i=y("img"),o=Z(),a=y("div"),h=U(l),f=Z(),_=y("br"),g=Z(),b=y("span"),m=U("("),F=U(E),M=U(" images)"),V=y("input"),w(i,"title",r=t[0].url),w(i,"class","sourceLogo svelte-wjxbqp"),w(i,"alt","Source logo"),mi(i.src,s=vi(t[0].source))||w(i,"src",s),w(b,"title",O=t[0].child_csv.length+" collections"),w(V,"type","radio"),w(V,"name","source"),V.value=ie=t[0].source,w(V,"class","svelte-wjxbqp"),w(n,"class","svelte-wjxbqp"),w(e,"class","source svelte-wjxbqp")},m(z,u){te(z,e,u),d(e,n),d(n,i),d(n,o),d(n,a),d(a,h),d(a,f),d(a,_),d(a,g),d(a,b),d(b,m),d(b,F),d(b,M),d(a,V),H||(ne=pe(V,"change",function(){Vn(t[1])&&t[1].apply(this,arguments)}),H=!0)},p(z,[u]){t=z,u&1&&r!==(r=t[0].url)&&w(i,"title",r),u&1&&!mi(i.src,s=vi(t[0].source))&&w(i,"src",s),u&1&&l!==(l=t[0].source+"")&&ke(h,l),u&1&&E!==(E=t[0].total_count+"")&&ke(F,E),u&1&&O!==(O=t[0].child_csv.length+" collections")&&w(b,"title",O),u&1&&ie!==(ie=t[0].source)&&(V.value=ie)},i:Ie,o:Ie,d(z){z&&ee(e),H=!1,ne()}}}function Ko(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Jo extends $e{constructor(e){super(),Xe(this,e,Ko,Ho,He,{source:0,handleFilter:1})}}function Go(t,e,n){const i=t.slice();return i[31]=e[n],i}function er(t,e,n){const i=t.slice();return i[34]=e[n],i}function tr(t,e,n){const i=t.slice();return i[34]=e[n],i}function nr(t,e,n){const i=t.slice();return i[39]=e[n],i}function ir(t,e,n){const i=t.slice();return i[42]=e[n],i}function rr(t){let e,n;return e=new Jo({props:{source:t[42],handleFilter:t[16]}}),{c(){Ze(e.$$.fragment)},m(i,r){Ge(e,i,r),n=!0},p(i,r){const s={};r[0]&2&&(s.source=i[42]),e.$set(s)},i(i){n||(ae(e.$$.fragment,i),n=!0)},o(i){ge(e.$$.fragment,i),n=!1},d(i){Ye(e,i)}}}function sr(t){let e,n,i,r,s,o;return{c(){e=y("div"),n=y("label"),i=y("input"),r=U(`
              ❌ Clear`),w(i,"type","radio"),w(i,"name","source"),i.value="",w(i,"class","svelte-1qvsqma"),w(e,"class","clearTextFilter svelte-1qvsqma")},m(a,l){te(a,e,l),d(e,n),d(n,i),d(n,r),s||(o=pe(i,"change",t[16]),s=!0)},p:Ie,d(a){a&&ee(e),s=!1,o()}}}function or(t){let e,n,i,r,s,o,a,l,h,f=Ne(Ae.getCsvSourceList(t[13])),_=[];for(let g=0;g<f.length;g+=1)_[g]=lr(nr(t,f,g));return{c(){e=y("div"),n=y("select"),i=y("option"),i.textContent="Collection";for(let g=0;g<_.length;g+=1)_[g].c();r=Z(),s=y("div"),o=y("button"),a=U("×"),i.__value="",we(i,i.__value),w(n,"name","collection"),w(n,"class","svelte-1qvsqma"),t[11]===void 0&&it(()=>t[23].call(n)),w(o,"title","Clear Filter"),he(o,"visibility",t[11]!==""?"visible":"hidden"),w(o,"class","svelte-1qvsqma"),w(s,"class","svelte-1qvsqma"),w(e,"class","selectWrapper svelte-1qvsqma")},m(g,b){te(g,e,b),d(e,n),d(n,i);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(n,null);st(n,t[11],!0),d(e,r),d(e,s),d(s,o),d(o,a),l||(h=[pe(n,"change",t[23]),pe(n,"change",t[18]),pe(o,"click",t[18])],l=!0)},p(g,b){if(b[0]&8192){f=Ne(Ae.getCsvSourceList(g[13]));let m;for(m=0;m<f.length;m+=1){const E=nr(g,f,m);_[m]?_[m].p(E,b):(_[m]=lr(E),_[m].c(),_[m].m(n,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=f.length}b[0]&10240&&st(n,g[11]),b[0]&2048&&he(o,"visibility",g[11]!==""?"visible":"hidden")},d(g){g&&ee(e),Tt(_,g),l=!1,rt(h)}}}function lr(t){let e,n=(t[39].source==t[13]?cr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",o,a,l;return{c(){e=y("option"),i=U(n),r=U(" ("),o=U(s),a=U(`)
                  `),e.__value=l=t[39].url,we(e,e.__value)},m(h,f){te(h,e,f),d(e,i),d(e,r),d(e,o),d(e,a)},p(h,f){f[0]&8192&&n!==(n=(h[39].source==h[13]?cr(h[39].url):h[39].source)+"")&&ke(i,n),f[0]&8192&&s!==(s=h[39].image_count+"")&&ke(o,s),f[0]&8192&&l!==(l=h[39].url)&&(e.__value=l,we(e,e.__value))},d(h){h&&ee(e)}}}function ar(t){let e,n=t[34]+"",i,r;return{c(){e=y("option"),i=U(n),e.__value=r=t[4][t[34]],we(e,e.__value)},m(s,o){te(s,e,o),d(e,i)},p(s,o){o[0]&16&&n!==(n=s[34]+"")&&ke(i,n),o[0]&16&&r!==(r=s[4][s[34]])&&(e.__value=r,we(e,e.__value))},d(s){s&&ee(e)}}}function ur(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=y("option"),r=U(i),n.__value=s=e[5][e[34]],we(n,n.__value),this.first=n},m(o,a){te(o,n,a),d(n,r)},p(o,a){e=o,a[0]&32&&i!==(i=e[34]+"")&&ke(r,i),a[0]&32&&s!==(s=e[5][e[34]])&&(n.__value=s,we(n,n.__value))},d(o){o&&ee(n)}}}function Yo(t){let e;return{c(){e=y("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],we(e,e.__value)},m(n,i){te(n,e,i)},p:Ie,d(n){n&&ee(e)}}}function Qo(t){let e,n,i,r,s,o,a,l,h,f,_=vn(t[3])+"",g,b,m,E,F,M,O,V,ie,H,ne,z,u,c,p,C,T,P=t[13]!==""&&Ae.getCsvSourceList(t[13]).length>0,W,j,D,v,N=t[12]!==""?"All Dimensions":"Dimension Count",R,B,J,A,I,k,L,X,Q,re,q,x,G,de,oe=t[10]==""?"Organism":"All Organisms",Ee,me,ue,ze,be,je,Ve,Ce,$,fe,We=t[9]==""?"Imaging Modality":"All Modalities",le,et,Se=[],Qe=new Map,Ke,Be,Re,Fe,at,Oe,Nt,ut,ii,pt,Je,vt,ri,si,bt,yt,wt,oi,an,ct,li,kt,tt,ai,un=t[0].length+"",En,ui,Sn,ci,fi,ft,Pe,An,hi;n=new Wo({}),r=new jo({});let ht=Ne(t[1]),ve=[];for(let S=0;S<ht.length;S+=1)ve[S]=rr(ir(t,ht,S));const Or=S=>ge(ve[S],1,1,()=>{ve[S]=null});let qe=t[13]!==""&&sr(t),Ue=P&&or(t),Et=Ne(Object.keys(t[4]).sort()),Me=[];for(let S=0;S<Et.length;S+=1)Me[S]=ar(tr(t,Et,S));let cn=Ne(Object.keys(t[5]).sort());const di=S=>S[34];for(let S=0;S<cn.length;S+=1){let K=er(t,cn,S),_e=di(K);Qe.set(_e,Se[S]=ur(_e,K))}let Lr=Ne(["x","y","z","c","t"]),Pt=[];for(let S=0;S<5;S+=1)Pt[S]=Yo(Go(t,Lr,S));return ct=new gs({props:{toggleAscending:t[14],sortAscending:t[7]}}),ft=new Mo({props:{tableRows:t[0],textFilter:t[8],sortedBy:t[6]}}),{c(){e=y("div"),Ze(n.$$.fragment),i=Z(),Ze(r.$$.fragment),s=Z(),o=y("main"),a=y("div"),l=y("h3"),h=U(`In the summer of 2024, the OME-NGFF project generated
        `),f=y("strong"),g=U(_),b=U(" of data in Zarr v3 format"),m=Z(),E=y("div"),F=y("input"),M=Z(),O=y("button"),V=U("×"),ie=Z(),H=y("div");for(let S=0;S<ve.length;S+=1)ve[S].c();ne=Z(),qe&&qe.c(),z=Z(),u=y("div"),c=y("div"),p=y("div"),C=y("div"),C.textContent="Filter by:",T=Z(),Ue&&Ue.c(),W=Z(),j=y("div"),D=y("select"),v=y("option"),R=U(N),B=y("hr"),J=y("option"),J.textContent="2D",A=y("option"),A.textContent="3D",I=y("option"),I.textContent="4D",k=y("option"),k.textContent="5D",L=Z(),X=y("div"),Q=y("button"),re=U("×"),q=Z(),x=y("div"),G=y("select"),de=y("option"),Ee=U(oe),me=y("hr");for(let S=0;S<Me.length;S+=1)Me[S].c();ue=Z(),ze=y("div"),be=y("button"),je=U("×"),Ve=Z(),Ce=y("div"),$=y("select"),fe=y("option"),le=U(We),et=y("hr");for(let S=0;S<Se.length;S+=1)Se[S].c();Ke=Z(),Be=y("div"),Re=y("button"),Fe=U("×"),at=Z(),Oe=y("div"),Nt=Z(),ut=y("div"),ut.textContent="Sort by:",ii=Z(),pt=y("div"),Je=y("select"),vt=y("option"),vt.textContent="--",ri=y("hr");for(let S=0;S<5;S+=1)Pt[S].c();si=y("hr"),bt=y("option"),bt.textContent="Data Size (bytes)",yt=y("option"),yt.textContent="Chunk Size (pixels)",wt=y("option"),wt.textContent="Shard Size (pixels)",oi=Z(),an=y("div"),Ze(ct.$$.fragment),li=Z(),kt=y("div"),tt=y("h3"),ai=U("Showing "),En=U(un),ui=U(" out of "),Sn=U(t[2]),ci=U(" images"),fi=Z(),Ze(ft.$$.fragment),he(f,"font-weight","600"),he(l,"text-align","center"),w(F,"placeholder","Filter by Name or Description"),w(F,"name","textFilter"),w(F,"class","svelte-1qvsqma"),w(O,"title","Clear Filter"),he(O,"visibility",t[8]!==""?"visible":"hidden"),w(O,"class","svelte-1qvsqma"),w(E,"class","textInputWrapper svelte-1qvsqma"),w(H,"class","sources svelte-1qvsqma"),w(a,"class","summary svelte-1qvsqma"),he(C,"white-space","nowrap"),v.__value="",we(v,v.__value),J.__value="2",we(J,J.__value),A.__value="3",we(A,A.__value),I.__value="4",we(I,I.__value),k.__value="5",we(k,k.__value),w(D,"class","svelte-1qvsqma"),t[12]===void 0&&it(()=>t[24].call(D)),w(Q,"title","Clear Filter"),he(Q,"visibility",t[12]!==""?"visible":"hidden"),w(Q,"class","svelte-1qvsqma"),w(X,"class","svelte-1qvsqma"),w(j,"class","selectWrapper svelte-1qvsqma"),de.__value="",we(de,de.__value),w(G,"class","svelte-1qvsqma"),t[10]===void 0&&it(()=>t[25].call(G)),w(be,"title","Clear Filter"),he(be,"visibility",t[10]!==""?"visible":"hidden"),w(be,"class","svelte-1qvsqma"),w(ze,"class","svelte-1qvsqma"),w(x,"class","selectWrapper svelte-1qvsqma"),fe.__value="",we(fe,fe.__value),w($,"class","svelte-1qvsqma"),t[9]===void 0&&it(()=>t[26].call($)),w(Re,"title","Clear Filter"),he(Re,"visibility",t[9]!==""?"visible":"hidden"),w(Re,"class","svelte-1qvsqma"),w(Be,"class","svelte-1qvsqma"),w(Ce,"class","selectWrapper svelte-1qvsqma"),w(Oe,"class","clear"),vt.__value="",we(vt,vt.__value),bt.__value="written",we(bt,bt.__value),yt.__value="chunk_pixels",we(yt,yt.__value),wt.__value="shard_pixels",we(wt,wt.__value),w(Je,"class","svelte-1qvsqma"),w(an,"class","svelte-1qvsqma"),w(pt,"class","selectWrapper svelte-1qvsqma"),w(p,"class","filters svelte-1qvsqma"),w(c,"class","sidebar svelte-1qvsqma"),he(tt,"margin-left","15px"),w(tt,"class","svelte-1qvsqma"),w(kt,"class","results svelte-1qvsqma"),w(u,"class","sidebarContainer svelte-1qvsqma"),w(o,"class","svelte-1qvsqma"),w(e,"class","app svelte-1qvsqma"),he(e,"--form-select-bg-img","url('"+Bo+"')")},m(S,K){te(S,e,K),Ge(n,e,null),d(e,i),Ge(r,e,null),d(e,s),d(e,o),d(o,a),d(a,l),d(l,h),d(l,f),d(f,g),d(l,b),d(a,m),d(a,E),d(E,F),we(F,t[8]),d(E,M),d(E,O),d(O,V),d(a,ie),d(a,H);for(let _e=0;_e<ve.length;_e+=1)ve[_e]&&ve[_e].m(H,null);d(a,ne),qe&&qe.m(a,null),d(o,z),d(o,u),d(u,c),d(c,p),d(p,C),d(p,T),Ue&&Ue.m(p,null),d(p,W),d(p,j),d(j,D),d(D,v),d(v,R),d(D,B),d(D,J),d(D,A),d(D,I),d(D,k),st(D,t[12],!0),d(j,L),d(j,X),d(X,Q),d(Q,re),d(p,q),d(p,x),d(x,G),d(G,de),d(de,Ee),d(G,me);for(let _e=0;_e<Me.length;_e+=1)Me[_e]&&Me[_e].m(G,null);st(G,t[10],!0),d(x,ue),d(x,ze),d(ze,be),d(be,je),d(p,Ve),d(p,Ce),d(Ce,$),d($,fe),d(fe,le),d($,et);for(let _e=0;_e<Se.length;_e+=1)Se[_e]&&Se[_e].m($,null);st($,t[9],!0),d(Ce,Ke),d(Ce,Be),d(Be,Re),d(Re,Fe),d(p,at),d(p,Oe),d(p,Nt),d(p,ut),d(p,ii),d(p,pt),d(pt,Je),d(Je,vt),d(Je,ri);for(let _e=0;_e<5;_e+=1)Pt[_e]&&Pt[_e].m(Je,null);d(Je,si),d(Je,bt),d(Je,yt),d(Je,wt),d(pt,oi),d(pt,an),Ge(ct,an,null),d(u,li),d(u,kt),d(kt,tt),d(tt,ai),d(tt,En),d(tt,ui),d(tt,Sn),d(tt,ci),d(kt,fi),Ge(ft,kt,null),Pe=!0,An||(hi=[pe(F,"input",t[22]),pe(F,"input",t[21]),pe(O,"click",t[21]),pe(D,"change",t[24]),pe(D,"change",t[17]),pe(Q,"click",t[17]),pe(G,"change",t[25]),pe(G,"change",t[19]),pe(be,"click",t[19]),pe($,"change",t[26]),pe($,"change",t[20]),pe(Re,"click",t[20]),pe(Je,"change",t[15])],An=!0)},p(S,K){if((!Pe||K[0]&8)&&_!==(_=vn(S[3])+"")&&ke(g,_),K[0]&256&&F.value!==S[8]&&we(F,S[8]),(!Pe||K[0]&256)&&he(O,"visibility",S[8]!==""?"visible":"hidden"),K[0]&65538){ht=Ne(S[1]);let ce;for(ce=0;ce<ht.length;ce+=1){const qt=ir(S,ht,ce);ve[ce]?(ve[ce].p(qt,K),ae(ve[ce],1)):(ve[ce]=rr(qt),ve[ce].c(),ae(ve[ce],1),ve[ce].m(H,null))}for(Ft(),ce=ht.length;ce<ve.length;ce+=1)Or(ce);Mt()}if(S[13]!==""?qe?qe.p(S,K):(qe=sr(S),qe.c(),qe.m(a,null)):qe&&(qe.d(1),qe=null),K[0]&8192&&(P=S[13]!==""&&Ae.getCsvSourceList(S[13]).length>0),P?Ue?Ue.p(S,K):(Ue=or(S),Ue.c(),Ue.m(p,W)):Ue&&(Ue.d(1),Ue=null),(!Pe||K[0]&4096)&&N!==(N=S[12]!==""?"All Dimensions":"Dimension Count")&&ke(R,N),K[0]&4096&&st(D,S[12]),(!Pe||K[0]&4096)&&he(Q,"visibility",S[12]!==""?"visible":"hidden"),(!Pe||K[0]&1024)&&oe!==(oe=S[10]==""?"Organism":"All Organisms")&&ke(Ee,oe),K[0]&16){Et=Ne(Object.keys(S[4]).sort());let ce;for(ce=0;ce<Et.length;ce+=1){const qt=tr(S,Et,ce);Me[ce]?Me[ce].p(qt,K):(Me[ce]=ar(qt),Me[ce].c(),Me[ce].m(G,null))}for(;ce<Me.length;ce+=1)Me[ce].d(1);Me.length=Et.length}K[0]&1040&&st(G,S[10]),(!Pe||K[0]&1024)&&he(be,"visibility",S[10]!==""?"visible":"hidden"),(!Pe||K[0]&512)&&We!==(We=S[9]==""?"Imaging Modality":"All Modalities")&&ke(le,We),K[0]&32&&(cn=Ne(Object.keys(S[5]).sort()),Se=mr(Se,K,di,1,S,cn,Qe,$,Hr,ur,null,er)),K[0]&544&&st($,S[9]),(!Pe||K[0]&512)&&he(Re,"visibility",S[9]!==""?"visible":"hidden");const _e={};K[0]&128&&(_e.sortAscending=S[7]),ct.$set(_e),(!Pe||K[0]&1)&&un!==(un=S[0].length+"")&&ke(En,un),(!Pe||K[0]&4)&&ke(Sn,S[2]);const fn={};K[0]&1&&(fn.tableRows=S[0]),K[0]&256&&(fn.textFilter=S[8]),K[0]&64&&(fn.sortedBy=S[6]),ft.$set(fn)},i(S){if(!Pe){ae(n.$$.fragment,S),ae(r.$$.fragment,S);for(let K=0;K<ht.length;K+=1)ae(ve[K]);ae(ct.$$.fragment,S),ae(ft.$$.fragment,S),Pe=!0}},o(S){ge(n.$$.fragment,S),ge(r.$$.fragment,S),ve=ve.filter(Boolean);for(let K=0;K<ve.length;K+=1)ge(ve[K]);ge(ct.$$.fragment,S),ge(ft.$$.fragment,S),Pe=!1},d(S){S&&ee(e),Ye(n),Ye(r),Tt(ve,S),qe&&qe.d(),Ue&&Ue.d(),Tt(Me,S);for(let K=0;K<Se.length;K+=1)Se[K].d();Tt(Pt,S),Ye(ct),Ye(ft),An=!1,rt(hi)}}}function cr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Zo(t,e,n){let i,r,s,o,a,l,f=new URLSearchParams(window.location.search).get("csv");try{new URL(f)}catch{f=ts}let _=[],g=[],b=0,m=0,E={},F={};Ae.subscribe(v=>{n(0,_=H(v)),n(1,g=Ae.getCsvSourceList()),n(2,b=v.length),n(3,m=v.reduce((N,R)=>N+parseInt(R.written)||0,0))}),Er.subscribe(v=>{let N={};for(const[R,B]of Object.entries(v))N[B]=R;n(4,E=N)}),Sr.subscribe(v=>{let N={};for(const[R,B]of Object.entries(v))N[B]=R;n(5,F=N)}),f&&vr(f,Ae);let M="",O=!1;function V(){n(7,O=!O),Ae.sortTable(M,O)}function ie(v){n(6,M=v.target.value),M===""?Ae.sortTable("index",!0):Ae.sortTable(M,O)}function H(v){if(i!==""&&(v=v.filter(N=>N.dim_count==i)),s!=="")v=v.filter(N=>N.csv==s);else if(r!==""){let N=Ae.getCsvSourceList(r),R=[r,...N.map(B=>B.source)];v=v.filter(B=>R.includes(B.source))}if(o!==""&&(v=v.filter(N=>N.organismId==o)),a!=""&&(v=v.filter(N=>N.fbbiId==a)),l&&l!=""){let N=l.toLowerCase();v=v.filter(R=>{var B,J;return((B=R.description)==null?void 0:B.toLowerCase().includes(N))||((J=R.name)==null?void 0:J.toLowerCase().includes(N))})}return v}function ne(v){n(13,r=v.target.value||""),n(11,s=""),console.log("filterSource",r,s),n(0,_=H(Ae.getRows()))}function z(v){n(12,i=v.target.value||""),n(0,_=H(Ae.getRows()))}function u(v){n(11,s=v.target.value||""),n(0,_=H(Ae.getRows()))}function c(v){n(10,o=v.target.value||""),n(0,_=H(Ae.getRows()))}function p(v){n(9,a=v.target.value||""),n(0,_=H(Ae.getRows()))}function C(v){n(8,l=v.target.value),n(0,_=H(Ae.getRows()))}function T(){l=this.value,n(8,l)}function P(){s=dn(this),n(11,s),n(13,r)}function W(){i=dn(this),n(12,i)}function j(){o=dn(this),n(10,o),n(4,E)}function D(){a=dn(this),n(9,a),n(5,F)}return t.$$.update=()=>{t.$$.dirty[0]&1&&_.some(v=>v.source)},n(12,i=""),n(13,r=""),n(11,s=""),n(10,o=""),n(9,a=""),n(8,l=""),[_,g,b,m,E,F,M,O,l,a,o,s,i,r,V,ie,ne,z,u,c,p,C,T,P,W,j,D]}class Xo extends $e{constructor(e){super(),Xe(this,e,Zo,Qo,He,{},null,[-1,-1])}}new Xo({target:document.getElementById("app")});
