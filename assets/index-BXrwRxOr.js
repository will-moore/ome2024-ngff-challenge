const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Nr=Object.defineProperty;var gi=t=>{throw TypeError(t)};var Pr=(t,e,n)=>e in t?Nr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>Pr(t,typeof e!="symbol"?e+"":e,n),Tn=(t,e,n)=>e.has(t)||gi("Cannot "+n);var $=(t,e,n)=>(Tn(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?gi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,i)=>(Tn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),On=(t,e,n)=>(Tn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function we(){}function Ur(t,e){for(const n in e)t[n]=e[n];return t}function pr(t){return t()}function mi(){return Object.create(null)}function nt(t){t.forEach(pr)}function yn(t){return typeof t=="function"}function xe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _n;function Mn(t,e){return t===e?!0:(_n||(_n=document.createElement("a")),_n.href=e,t===_n.href)}function qr(t){return Object.keys(t).length===0}function Br(t,...e){if(t==null){for(const i of e)i(void 0);return we}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function xt(t){let e;return Br(t,n=>e=n)(),e}function Ln(t,e,n,i){if(t){const r=vr(t,e,n,i);return t[0](r)}}function vr(t,e,n,i){return t[1]&&i?Ur(n.ctx.slice(),t[1](i(e))):n.ctx}function Fn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],l=Math.max(e.dirty.length,r.length);for(let a=0;a<l;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Dn(t,e,n,i,r,s){if(r){const l=vr(e,n,i,s);t.p(l,r)}}function Nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function pi(t){return t??""}function d(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function Ot(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function j(){return U(" ")}function En(){return U("")}function ve(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function jr(t){return Array.from(t.childNodes)}function ge(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ee(t,e){t.value=e??""}function ae(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function gn(t){const e=t.querySelector(":checked");return e&&e.__value}function Tt(t,e,n){t.classList.toggle(e,!!n)}function xr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Kt;function Ht(t){Kt=t}function Kn(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function on(t){Kn().$$.on_mount.push(t)}function Gn(t){Kn().$$.on_destroy.push(t)}function Vr(){const t=Kn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=xr(e,n,{cancelable:i});return r.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}const It=[],Lt=[];let Rt=[];const vi=[],Wr=Promise.resolve();let Pn=!1;function Hr(){Pn||(Pn=!0,Wr.then(Ne))}function lt(t){Rt.push(t)}const Rn=new Set;let St=0;function Ne(){if(St!==0)return;const t=Kt;do{try{for(;St<It.length;){const e=It[St];St++,Ht(e),Kr(e.$$)}}catch(e){throw It.length=0,St=0,e}for(Ht(null),It.length=0,St=0;Lt.length;)Lt.pop()();for(let e=0;e<Rt.length;e+=1){const n=Rt[e];Rn.has(n)||(Rn.add(n),n())}Rt.length=0}while(It.length);for(;vi.length;)vi.pop()();Pn=!1,Rn.clear(),Ht(t)}function Kr(t){if(t.fragment!==null){t.update(),nt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}function Gr(t){const e=[],n=[];Rt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Rt=e}const pn=new Set;let gt;function Ft(){gt={r:0,c:[],p:gt}}function Dt(){gt.r||nt(gt.c),gt=gt.p}function se(t,e){t&&t.i&&(pn.delete(t),t.i(e))}function he(t,e,n,i){if(t&&t.o){if(pn.has(t))return;pn.add(t),gt.c.push(()=>{pn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Jr(t,e){t.d(1),e.delete(t.key)}function Zr(t,e){he(t,1,1,()=>{e.delete(t.key)})}function br(t,e,n,i,r,s,l,a,o,h,f,_){let p=t.length,m=s.length,g=p;const E={};for(;g--;)E[t[g].key]=g;const q=[],F=new Map,D=new Map,Y=[];for(g=m;g--;){const R=_(r,s,g),u=n(R);let c=l.get(u);c?Y.push(()=>c.p(R,e)):(c=h(u,R),c.c()),F.set(u,q[g]=c),u in E&&D.set(u,Math.abs(g-E[u]))}const Z=new Set,X=new Set;function J(R){se(R,1),R.m(a,f),l.set(R.key,R),f=R.first,m--}for(;p&&m;){const R=q[m-1],u=t[p-1],c=R.key,k=u.key;R===u?(f=R.first,p--,m--):F.has(k)?!l.has(c)||Z.has(c)?J(R):X.has(k)?p--:D.get(c)>D.get(k)?(X.add(c),J(R)):(Z.add(k),p--):(o(u,l),p--)}for(;p--;){const R=t[p];F.has(R.key)||o(R,l)}for(;m;)J(q[m-1]);return nt(Y),q}function Je(t){t&&t.c()}function We(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),lt(()=>{const s=t.$$.on_mount.map(pr).filter(yn);t.$$.on_destroy?t.$$.on_destroy.push(...s):nt(s),t.$$.on_mount=[]}),r.forEach(lt)}function He(t,e){const n=t.$$;n.fragment!==null&&(Gr(n.after_update),nt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Yr(t,e){t.$$.dirty[0]===-1&&(It.push(t),Hr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,i,r,s,l=null,a=[-1]){const o=Kt;Ht(t);const h=t.$$={fragment:null,ctx:[],props:s,update:we,not_equal:r,bound:mi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:mi(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};l&&l(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(_,p,...m)=>{const g=m.length?m[0]:p;return h.ctx&&r(h.ctx[_],h.ctx[_]=g)&&(!h.skip_bound&&h.bound[_]&&h.bound[_](g),f&&Yr(t,_)),p}):[],h.update(),f=!0,nt(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const _=jr(e.target);h.fragment&&h.fragment.l(_),_.forEach(x)}else h.fragment&&h.fragment.c();e.intro&&se(t.$$.fragment),We(t,e.target,e.anchor),Ne()}Ht(o)}class Ye{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){He(this,1),this.$destroy=we}$on(e,n){if(!yn(n))return we;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!qr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qr);const At=[];function Un(t,e=we){let n;const i=new Set;function r(a){if(xe(t,a)&&(t=a,n)){const o=!At.length;for(const h of i)h[1](),At.push(h,t);if(o){for(let h=0;h<At.length;h+=2)At[h][0](At[h+1]);At.length=0}}}function s(a){r(a(t))}function l(a,o=we){const h=[a,o];return i.add(h),i.size===1&&(n=e(r,s)||we),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Xr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,l={},a=0,o={parse:function(u,c){var k=(c=c||{}).dynamicTyping||!1;if(R(k)&&(c.dynamicTypingFunction=k,k={}),c.dynamicTyping=k,c.transform=!!R(c.transform)&&c.transform,c.worker&&o.WORKERS_SUPPORTED){var S=function(){if(!o.WORKERS_SUPPORTED)return!1;var z=(Q=i.URL||i.webkitURL||null,B=n.toString(),o.BLOB_URL||(o.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))),P=new i.Worker(z),Q,B;return P.onmessage=D,P.id=a++,l[P.id]=P}();return S.userStep=c.step,S.userChunk=c.chunk,S.userComplete=c.complete,S.userError=c.error,c.step=R(c.step),c.chunk=R(c.chunk),c.complete=R(c.complete),c.error=R(c.error),delete c.worker,void S.postMessage({input:u,config:c,workerId:S.id})}var I=null;return o.NODE_STREAM_INPUT,typeof u=="string"?(u=function(z){return z.charCodeAt(0)===65279?z.slice(1):z}(u),I=c.download?new _(c):new m(c)):u.readable===!0&&R(u.read)&&R(u.on)?I=new g(c):(i.File&&u instanceof File||u instanceof Object)&&(I=new p(c)),I.stream(u)},unparse:function(u,c){var k=!1,S=!0,I=",",z=`\r
`,P='"',Q=P+P,B=!1,y=null,A=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||o.BAD_DELIMITERS.filter(function(O){return c.delimiter.indexOf(O)!==-1}).length||(I=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(k=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(B=c.skipEmptyLines),typeof c.newline=="string"&&(z=c.newline),typeof c.quoteChar=="string"&&(P=c.quoteChar),typeof c.header=="boolean"&&(S=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");y=c.columns}c.escapeChar!==void 0&&(Q=c.escapeChar+P),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(A=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var T=new RegExp(q(P),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return M(null,u,B);if(typeof u[0]=="object")return M(y||Object.keys(u[0]),u,B)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||y),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),M(u.fields||[],u.data||[],B);throw new Error("Unable to serialize unrecognized input");function M(O,G,b){var L="";typeof O=="string"&&(O=JSON.parse(O)),typeof G=="string"&&(G=JSON.parse(G));var W=Array.isArray(O)&&0<O.length,ie=!Array.isArray(G[0]);if(W&&S){for(var ne=0;ne<O.length;ne++)0<ne&&(L+=I),L+=ee(O[ne],ne);0<G.length&&(L+=z)}for(var N=0;N<G.length;N++){var H=W?O.length:G[N].length,oe=!1,pe=W?Object.keys(G[N]).length===0:G[N].length===0;if(b&&!W&&(oe=b==="greedy"?G[N].join("").trim()==="":G[N].length===1&&G[N][0].length===0),b==="greedy"&&W){for(var ue=[],Se=0;Se<H;Se++){var de=ie?O[Se]:Se;ue.push(G[N][de])}oe=ue.join("").trim()===""}if(!oe){for(var re=0;re<H;re++){0<re&&!pe&&(L+=I);var Ue=W&&ie?O[re]:re;L+=ee(G[N][Ue],re)}N<G.length-1&&(!b||0<H&&!pe)&&(L+=z)}}return L}function ee(O,G){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var b=!1;A&&typeof O=="string"&&A.test(O)&&(O="'"+O,b=!0);var L=O.toString().replace(T,Q);return(b=b||k===!0||typeof k=="function"&&k(O,G)||Array.isArray(k)&&k[G]||function(W,ie){for(var ne=0;ne<ie.length;ne++)if(-1<W.indexOf(ie[ne]))return!0;return!1}(L,o.BAD_DELIMITERS)||-1<L.indexOf(I)||L.charAt(0)===" "||L.charAt(L.length-1)===" ")?P+L+P:L}}};if(o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!i.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=F,o.ParserHandle=E,o.NetworkStreamer=_,o.FileStreamer=p,o.StringStreamer=m,o.ReadableStreamStreamer=g,i.jQuery){var h=i.jQuery;h.fn.parse=function(u){var c=u.config||{},k=[];return this.each(function(z){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var P=0;P<this.files.length;P++)k.push({file:this.files[P],inputElem:this,instanceConfig:h.extend({},c)})}),S(),this;function S(){if(k.length!==0){var z,P,Q,B,y=k[0];if(R(u.before)){var A=u.before(y.file,y.inputElem);if(typeof A=="object"){if(A.action==="abort")return z="AbortError",P=y.file,Q=y.inputElem,B=A.reason,void(R(u.error)&&u.error({name:z},P,Q,B));if(A.action==="skip")return void I();typeof A.config=="object"&&(y.instanceConfig=h.extend(y.instanceConfig,A.config))}else if(A==="skip")return void I()}var T=y.instanceConfig.complete;y.instanceConfig.complete=function(M){R(T)&&T(M,y.file,y.inputElem),I()},o.parse(y.file,y.instanceConfig)}else R(u.complete)&&u.complete()}function I(){k.splice(0,1),S()}}}function f(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var k=X(c);k.chunkSize=parseInt(k.chunkSize),c.step||c.chunk||(k.chunkSize=null),this._handle=new E(k),(this._handle.streamer=this)._config=k}).call(this,u),this.parseChunk=function(c,k){if(this.isFirstChunk&&R(this._config.beforeFirstChunk)){var S=this._config.beforeFirstChunk(c);S!==void 0&&(c=S)}this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+c;this._partialLine="";var z=this._handle.parse(I,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var P=z.meta.cursor;this._finished||(this._partialLine=I.substring(P-this._baseIndex),this._baseIndex=P),z&&z.data&&(this._rowCount+=z.data.length);var Q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:z,workerId:o.WORKER_ID,finished:Q});else if(R(this._config.chunk)&&!k){if(this._config.chunk(z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);z=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(z.data),this._completeResults.errors=this._completeResults.errors.concat(z.errors),this._completeResults.meta=z.meta),this._completed||!Q||!R(this._config.complete)||z&&z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Q||z&&z.meta.paused||this._nextChunk(),z}this._halted=!0},this._sendError=function(c){R(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:o.WORKER_ID,error:c,finished:!1})}}function _(u){var c;(u=u||{}).chunkSize||(u.chunkSize=o.RemoteChunkSize),f.call(this,u),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=J(this._chunkLoaded,this),c.onerror=J(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var k=this._config.downloadRequestHeaders;for(var S in k)c.setRequestHeader(S,k[S])}if(this._config.chunkSize){var I=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+I)}try{c.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(k){var S=k.getResponseHeader("Content-Range");return S===null?-1:parseInt(S.substring(S.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(k){var S=c.statusText||k;this._sendError(new Error(S))}}function p(u){var c,k;(u=u||{}).chunkSize||(u.chunkSize=o.LocalChunkSize),f.call(this,u);var S=typeof FileReader<"u";this.stream=function(I){this._input=I,k=I.slice||I.webkitSlice||I.mozSlice,S?((c=new FileReader).onload=J(this._chunkLoaded,this),c.onerror=J(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var I=this._input;if(this._config.chunkSize){var z=Math.min(this._start+this._config.chunkSize,this._input.size);I=k.call(I,this._start,z)}var P=c.readAsText(I,this._config.encoding);S||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(I){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(I.target.result)},this._chunkError=function(){this._sendError(c.error)}}function m(u){var c;f.call(this,u=u||{}),this.stream=function(k){return c=k,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var k,S=this._config.chunkSize;return S?(k=c.substring(0,S),c=c.substring(S)):(k=c,c=""),this._finished=!c,this.parseChunk(k)}}}function g(u){f.call(this,u=u||{});var c=[],k=!0,S=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(I){this._input=I,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):k=!0},this._streamData=J(function(I){try{c.push(typeof I=="string"?I:I.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(z){this._streamError(z)}},this),this._streamError=J(function(I){this._streamCleanUp(),this._sendError(I)},this),this._streamEnd=J(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(u){var c,k,S,I=Math.pow(2,53),z=-I,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,y=0,A=0,T=!1,M=!1,ee=[],O={data:[],errors:[],meta:{}};if(R(u.step)){var G=u.step;u.step=function(N){if(O=N,W())L();else{if(L(),O.data.length===0)return;y+=N.data.length,u.preview&&y>u.preview?k.abort():(O.data=O.data[0],G(O,B))}}}function b(N){return u.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function L(){return O&&S&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),S=!1),u.skipEmptyLines&&(O.data=O.data.filter(function(N){return!b(N)})),W()&&function(){if(!O)return;function N(oe,pe){R(u.transformHeader)&&(oe=u.transformHeader(oe,pe)),ee.push(oe)}if(Array.isArray(O.data[0])){for(var H=0;W()&&H<O.data.length;H++)O.data[H].forEach(N);O.data.splice(0,1)}else O.data.forEach(N)}(),function(){if(!O||!u.header&&!u.dynamicTyping&&!u.transform)return O;function N(oe,pe){var ue,Se=u.header?{}:[];for(ue=0;ue<oe.length;ue++){var de=ue,re=oe[ue];u.header&&(de=ue>=ee.length?"__parsed_extra":ee[ue]),u.transform&&(re=u.transform(re,de)),re=ie(de,re),de==="__parsed_extra"?(Se[de]=Se[de]||[],Se[de].push(re)):Se[de]=re}return u.header&&(ue>ee.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+ue,A+pe):ue<ee.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+ue,A+pe)),Se}var H=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(N),H=O.data.length):O.data=N(O.data,0),u.header&&O.meta&&(O.meta.fields=ee),A+=H,O}()}function W(){return u.header&&ee.length===0}function ie(N,H){return oe=N,u.dynamicTypingFunction&&u.dynamicTyping[oe]===void 0&&(u.dynamicTyping[oe]=u.dynamicTypingFunction(oe)),(u.dynamicTyping[oe]||u.dynamicTyping)===!0?H==="true"||H==="TRUE"||H!=="false"&&H!=="FALSE"&&(function(pe){if(P.test(pe)){var ue=parseFloat(pe);if(z<ue&&ue<I)return!0}return!1}(H)?parseFloat(H):Q.test(H)?new Date(H):H===""?null:H):H;var oe}function ne(N,H,oe,pe){var ue={type:N,code:H,message:oe};pe!==void 0&&(ue.row=pe),O.errors.push(ue)}this.parse=function(N,H,oe){var pe=u.quoteChar||'"';if(u.newline||(u.newline=function(de,re){de=de.substring(0,1048576);var Ue=new RegExp(q(re)+"([^]*?)"+q(re),"gm"),Le=(de=de.replace(Ue,"")).split("\r"),Te=de.split(`
`),be=1<Te.length&&Te[0].length<Le[0].length;if(Le.length===1||be)return`
`;for(var Ae=0,fe=0;fe<Le.length;fe++)Le[fe][0]===`
`&&Ae++;return Ae>=Le.length/2?`\r
`:"\r"}(N,pe)),S=!1,u.delimiter)R(u.delimiter)&&(u.delimiter=u.delimiter(N),O.meta.delimiter=u.delimiter);else{var ue=function(de,re,Ue,Le,Te){var be,Ae,fe,me;Te=Te||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var et=0;et<Te.length;et++){var te=Te[et],it=0,Ke=0,Ge=0;fe=void 0;for(var Oe=new F({comments:Le,delimiter:te,newline:re,preview:10}).parse(de),Qe=0;Qe<Oe.data.length;Qe++)if(Ue&&b(Oe.data[Qe]))Ge++;else{var Xe=Oe.data[Qe].length;Ke+=Xe,fe!==void 0?0<Xe&&(it+=Math.abs(Xe-fe),fe=Xe):fe=Xe}0<Oe.data.length&&(Ke/=Oe.data.length-Ge),(Ae===void 0||it<=Ae)&&(me===void 0||me<Ke)&&1.99<Ke&&(Ae=it,be=te,me=Ke)}return{successful:!!(u.delimiter=be),bestDelimiter:be}}(N,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);ue.successful?u.delimiter=ue.bestDelimiter:(S=!0,u.delimiter=o.DefaultDelimiter),O.meta.delimiter=u.delimiter}var Se=X(u);return u.preview&&u.header&&Se.preview++,c=N,k=new F(Se),O=k.parse(c,H,oe),L(),T?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,k.abort(),c=R(u.chunk)?"":c.substring(k.getCharIndex())},this.resume=function(){B.streamer._halted?(T=!1,B.streamer.parseChunk(c,!0)):setTimeout(B.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,k.abort(),O.meta.aborted=!0,R(u.complete)&&u.complete(O),c=""}}function q(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(u){var c,k=(u=u||{}).delimiter,S=u.newline,I=u.comments,z=u.step,P=u.preview,Q=u.fastMode,B=c=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(B=u.escapeChar),(typeof k!="string"||-1<o.BAD_DELIMITERS.indexOf(k))&&(k=","),I===k)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<o.BAD_DELIMITERS.indexOf(I))&&(I=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var y=0,A=!1;this.parse=function(T,M,ee){if(typeof T!="string")throw new Error("Input must be a string");var O=T.length,G=k.length,b=S.length,L=I.length,W=R(z),ie=[],ne=[],N=[],H=y=0;if(!T)return Re();if(u.header&&!M){var oe=T.split(S)[0].split(k),pe=[],ue={},Se=!1;for(var de in oe){var re=oe[de];R(u.transformHeader)&&(re=u.transformHeader(re,de));var Ue=re,Le=ue[re]||0;for(0<Le&&(Se=!0,Ue=re+"_"+Le),ue[re]=Le+1;pe.includes(Ue);)Ue=Ue+"_"+Le;pe.push(Ue)}if(Se){var Te=T.split(S);Te[0]=pe.join(k),T=Te.join(S)}}if(Q||Q!==!1&&T.indexOf(c)===-1){for(var be=T.split(S),Ae=0;Ae<be.length;Ae++){if(N=be[Ae],y+=N.length,Ae!==be.length-1)y+=S.length;else if(ee)return Re();if(!I||N.substring(0,L)!==I){if(W){if(ie=[],Ge(N.split(k)),ct(),A)return Re()}else Ge(N.split(k));if(P&&P<=Ae)return ie=ie.slice(0,P),Re(!0)}}return Re()}for(var fe=T.indexOf(k,y),me=T.indexOf(S,y),et=new RegExp(q(B)+q(c),"g"),te=T.indexOf(c,y);;)if(T[y]!==c)if(I&&N.length===0&&T.substring(y,y+L)===I){if(me===-1)return Re();y=me+b,me=T.indexOf(S,y),fe=T.indexOf(k,y)}else if(fe!==-1&&(fe<me||me===-1))N.push(T.substring(y,fe)),y=fe+G,fe=T.indexOf(k,y);else{if(me===-1)break;if(N.push(T.substring(y,me)),Xe(me+b),W&&(ct(),A))return Re();if(P&&ie.length>=P)return Re(!0)}else for(te=y,y++;;){if((te=T.indexOf(c,te+1))===-1)return ee||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:y}),Qe();if(te===O-1)return Qe(T.substring(y,te).replace(et,c));if(c!==B||T[te+1]!==B){if(c===B||te===0||T[te-1]!==B){fe!==-1&&fe<te+1&&(fe=T.indexOf(k,te+1)),me!==-1&&me<te+1&&(me=T.indexOf(S,te+1));var it=Oe(me===-1?fe:Math.min(fe,me));if(T.substr(te+1+it,G)===k){N.push(T.substring(y,te).replace(et,c)),T[y=te+1+it+G]!==c&&(te=T.indexOf(c,y)),fe=T.indexOf(k,y),me=T.indexOf(S,y);break}var Ke=Oe(me);if(T.substring(te+1+Ke,te+1+Ke+b)===S){if(N.push(T.substring(y,te).replace(et,c)),Xe(te+1+Ke+b),fe=T.indexOf(k,y),te=T.indexOf(c,y),W&&(ct(),A))return Re();if(P&&ie.length>=P)return Re(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:y}),te++}}else te++}return Qe();function Ge(ze){ie.push(ze),H=y}function Oe(ze){var Pt=0;if(ze!==-1){var tt=T.substring(te+1,ze);tt&&tt.trim()===""&&(Pt=tt.length)}return Pt}function Qe(ze){return ee||(ze===void 0&&(ze=T.substring(y)),N.push(ze),y=O,Ge(N),W&&ct()),Re()}function Xe(ze){y=ze,Ge(N),N=[],me=T.indexOf(S,y)}function Re(ze){return{data:ie,errors:ne,meta:{delimiter:k,linebreak:S,aborted:A,truncated:!!ze,cursor:H+(M||0)}}}function ct(){z(Re()),ie=[],ne=[]}},this.abort=function(){A=!0},this.getCharIndex=function(){return y}}function D(u){var c=u.data,k=l[c.workerId],S=!1;if(c.error)k.userError(c.error,c.file);else if(c.results&&c.results.data){var I={abort:function(){S=!0,Y(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Z,resume:Z};if(R(k.userStep)){for(var z=0;z<c.results.data.length&&(k.userStep({data:c.results.data[z],errors:c.results.errors,meta:c.results.meta},I),!S);z++);delete c.results}else R(k.userChunk)&&(k.userChunk(c.results,I,c.file),delete c.results)}c.finished&&!S&&Y(c.workerId,c.results)}function Y(u,c){var k=l[u];R(k.userComplete)&&k.userComplete(c),k.terminate(),delete l[u]}function Z(){throw new Error("Not implemented.")}function X(u){if(typeof u!="object"||u===null)return u;var c=Array.isArray(u)?[]:{};for(var k in u)c[k]=X(u[k]);return c}function J(u,c){return function(){u.apply(c,arguments)}}function R(u){return typeof u=="function"}return s&&(i.onmessage=function(u){var c=u.data;if(o.WORKER_ID===void 0&&c&&(o.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:o.WORKER_ID,results:o.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var k=o.parse(c.input,c.config);k&&i.postMessage({workerId:o.WORKER_ID,results:k,finished:!0})}}),(_.prototype=Object.create(f.prototype)).constructor=_,(p.prototype=Object.create(f.prototype)).constructor=p,(m.prototype=Object.create(m.prototype)).constructor=m,(g.prototype=Object.create(f.prototype)).constructor=g,o})})(yr);var es=yr.exports;const ts=$r(es),ns="https://will-moore.github.io/ome2024-ngff-challenge/idr-mark.svg",is="https://will-moore.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Vt="https://raw.githubusercontent.com/will-moore/ome2024-ngff-challenge/hierarchy_browser/samples/ngff_samples.csv";let rs={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function bi(t){if(t==="IDR")return ns;let e=rs[t];return e?e==="https://nfdi4bioimage.de/"?is:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function wr(t,e,n={}){ts.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let l=i.data.map(m=>{let g={...n};for(let E=0;E<r.length;E++)g[r[E]]=m[E];return g}),a=l.filter(m=>{var g;return!((g=m.url)!=null&&g.endsWith(".csv"))}),o={};a.forEach(m=>{if(o[m.url]){console.warn("Removing duplicate URL:",m.url);return}o[m.url]=m}),a=Object.values(o);let h=l.filter(m=>{var g;return(g=m.url)==null?void 0:g.includes(".csv")}),f=a.reduce((m,g)=>g.wells?m+1:m,0),_=a.reduce((m,g)=>m+parseInt(g.written||0),0),p=a.length;f>0&&(p=a.reduce((m,g)=>m+parseInt(g.images||1),0)),e.addCsv(t,h,p,f,_),e.addRows(a),h.forEach(m=>{let g=m.url;m.csv=g,wr(g,e,m)})}})}async function kr(t){return await fetch(t).then(e=>e.json())}function ft(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function ss(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function ls(t,e,n){const i=t[0].shape,r=i[0],s=i[1],l=r*s;e||(e=t.map(Er));let a=performance.now(),o=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let f=0;f<l;f++){for(let _=0;_<t.length;_++){let p=n[_],m=t[_].data,g=e[_],q=(m[f]-g[0])/(g[1]-g[0]);for(let F=0;F<3;F++){let D=q*p[F]<<0;o[h*4+F]=Math.max(o[h*4+F],D)}}o[h*4+3]=255,h+=1}return performance.now()-a<100&&as(o,5)[4]<1&&(o=os(o,2)),o}function os(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function as(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let l=t[s*4];l=Math.max(t[s*4+1],l),l=Math.max(t[s*4+2],l);let a=Math.floor(l/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function Er(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let l=e[s];n=Math.max(n,l),i=Math.min(i,l)}return[i,n]}const vn=4,ut={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},us=[ut.magenta,ut.green],fs=[ut.red,ut.green,ut.blue],yi=Object.values(ut).slice(0,-2);function cs(t){let e;return t<=vn?e=Array(t).fill(!0):e=[...Array(vn).fill(!0),...Array(t-vn).fill(!1)],e}function hs(t,e){let n=[];if(t==1)n=[ut.white];else if(t==2)n=us;else if(t===3)n=fs;else if(t<=vn)n=yi.slice(0,t);else{n=Array(t).fill(ut.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=yi[r]}return n.map(Cr)}function Cr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class Sr{constructor(){this.store=Un({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await kr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=xt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class ds extends Sr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await kr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Ar=new Sr,Ir=new ds,wi=5;async function Gt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],l=`${t}/${s.path}/0`,[a,o]=await Gt(l);return[a,o,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await Gt(s)}}class _s{constructor(e="index",n=!0){this.store=Un([]),this.selectedRow=Un(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let l of s.child_csv)if(l.source===e){n=l;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,l=r.plate_count||0,a=r.bytes||0;for(let o of r.child_csv)s+=o.image_count||0,l+=o.plate_count||0,a+=o.bytes||0;return{...r,image_count:s,plate_count:l,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let l;for(let a of this.csvFiles){if(a.url===e){l=a;break}for(let o of a.child_csv){if(o.url===e){l=o;break}for(let h of o.child_csv)if(h.url===e){l=h;break}}}l?(l.image_count=i,l.plate_count=r,l.bytes=s,l.child_csv=n):(l={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(l))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let l=r.shape.split(",").map(o=>parseInt(o)),a;r.dimension_names?a=r.dimension_names.split(","):l.length==5&&(a=["t","c","z","y","x"]),a&&a.length==l.length&&a.forEach((o,h)=>r["size_"+o]=l[h]),r.dim_count=l.reduce((o,h)=>o+(h>1?1:0),0)}if(r.chunks){let l=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=l.reduce((a,o)=>a*o,1)}if(r.shards){let l=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=l.reduce((a,o)=>a*o,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,l)=>this.compareRows(s,l,!0)),r));let n=e.map(r=>r.organismId);Ar.addTerms(n);let i=e.map(r=>r.fbbiId);Ir.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var p;const[n,i,r]=await Gt(e);let s=[],l=0,a=0,o=!1,h=!0,f={multiscales:n},_=i;if(r&&(l=r.wells.length,a=r.field_count||1),n){const m=(p=n[0])==null?void 0:p.datasets[0],g=m==null?void 0:m.path;if(g){const E=await fetch(`${i}/${g}/zarr.json`).then(q=>q.json()).catch(q=>{console.log(`----> Failed to parse ${i}/${g}/zarr.json`,q)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),o=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:_,shape:s,well_count:l,field_count:a,load_failed:o,loaded:h})}async loadRocrateJsonAllRows(){let e=xt(this.store);for(let n=0;n<e.length;n=n+wi){let i=ss(n,Math.min(n+wi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let l=0;return i?l=r-s:l=r.localeCompare(s),this.sortAscending?l:-l}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,l)=>this.compareRows(s,l,i)),r))}isColumnNumeric(e){let n=xt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return xt(this.store)}getRow(e){return xt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ce=new _s;function gs(t){let e,n,i,r,s,l;return{c(){e=w("button"),n=w("span"),n.textContent="^",i=j(),r=w("span"),r.textContent="^",v(n,"class","acc svelte-17vd65t"),Tt(n,"strong",t[1]),v(r,"class","dec svelte-17vd65t"),Tt(r,"strong",!t[1]),v(e,"class","svelte-17vd65t")},m(a,o){V(a,e,o),d(e,n),d(e,i),d(e,r),s||(l=ve(e,"click",t[2]),s=!0)},p(a,[o]){o&2&&Tt(n,"strong",a[1]),o&2&&Tt(r,"strong",!a[1])},i:we,o:we,d(a){a&&x(e),s=!1,l()}}}function ms(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=l=>{"toggleAscending"in l&&n(0,i=l.toggleAscending),"sortAscending"in l&&n(1,r=l.sortAscending)},[i,r,s]}class ps extends Ye{constructor(e){super(),Ze(this,e,ms,gs,xe,{toggleAscending:0,sortAscending:1})}}const mn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},st={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Bt={OBSERVED:0,REQUESTED:1},vs={[st.VERTICAL]:"top",[st.HORIZONTAL]:"left"},ki={[st.VERTICAL]:"scrollTop",[st.HORIZONTAL]:"scrollLeft"};class bs{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=mn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),l=s.offset,a=l-n+s.size;let o;switch(e){case mn.END:o=a;break;case mn.CENTER:o=l-(n-s.size)/2;break;case mn.START:o=l;break;default:o=Math.max(a,Math.min(l,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,o))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let l=this.findNearestItem(n);if(l===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(l);n=a.offset+a.size;let o=l;for(;n<s&&o<this.itemCount-1;)o++,n+=this.getSizeAndPositionForIndex(o).size;return i&&(l=Math.max(0,l-i),o=Math.min(o+i,this.itemCount-1)),{start:l,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const ys=t=>({}),Ei=t=>({});function Ci(t,e,n){const i=t.slice();return i[37]=e[n],i}const ws=t=>({style:t[0]&4,index:t[0]&4}),Si=t=>({style:t[37].style,index:t[37].index}),ks=t=>({}),Ai=t=>({});function Ii(t,e){let n,i;const r=e[21].item,s=Ln(r,e,e[20],Si);return{key:t,first:null,c(){n=En(),s&&s.c(),this.first=n},m(l,a){V(l,n,a),s&&s.m(l,a),i=!0},p(l,a){e=l,s&&s.p&&(!i||a[0]&1048580)&&Dn(s,r,e,e[20],i?Fn(r,e[20],a,ws):Nn(e[20]),Si)},i(l){i||(se(s,l),i=!0)},o(l){he(s,l),i=!1},d(l){l&&x(n),s&&s.d(l)}}}function Es(t){let e,n,i,r=[],s=new Map,l,a;const o=t[21].header,h=Ln(o,t,t[20],Ai);let f=Pe(t[2]);const _=g=>g[0]?g[0](g[37].index):g[37].index;for(let g=0;g<f.length;g+=1){let E=Ci(t,f,g),q=_(E);s.set(q,r[g]=Ii(q,E))}const p=t[21].footer,m=Ln(p,t,t[20],Ei);return{c(){e=w("div"),h&&h.c(),n=j(),i=w("div");for(let g=0;g<r.length;g+=1)r[g].c();l=j(),m&&m.c(),v(i,"class","virtual-list-inner svelte-dwpad5"),v(i,"style",t[4]),v(e,"class","virtual-list-wrapper svelte-dwpad5"),v(e,"style",t[3])},m(g,E){V(g,e,E),h&&h.m(e,null),d(e,n),d(e,i);for(let q=0;q<r.length;q+=1)r[q]&&r[q].m(i,null);d(e,l),m&&m.m(e,null),t[22](e),a=!0},p(g,E){h&&h.p&&(!a||E[0]&1048576)&&Dn(h,o,g,g[20],a?Fn(o,g[20],E,ks):Nn(g[20]),Ai),E[0]&1048581&&(f=Pe(g[2]),Ft(),r=br(r,E,_,1,g,f,s,i,Zr,Ii,null,Ci),Dt()),(!a||E[0]&16)&&v(i,"style",g[4]),m&&m.p&&(!a||E[0]&1048576)&&Dn(m,p,g,g[20],a?Fn(p,g[20],E,ys):Nn(g[20]),Ei),(!a||E[0]&8)&&v(e,"style",g[3])},i(g){if(!a){se(h,g);for(let E=0;E<f.length;E+=1)se(r[E]);se(m,g),a=!0}},o(g){he(h,g);for(let E=0;E<r.length;E+=1)he(r[E]);he(m,g),a=!1},d(g){g&&x(e),h&&h.d(g);for(let E=0;E<r.length;E+=1)r[E].d();m&&m.d(g),t[22](null)}}}const Cs=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Ss(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:l="100%"}=e,{itemCount:a}=e,{itemSize:o}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:_=null}=e,{scrollDirection:p=st.VERTICAL}=e,{scrollOffset:m=null}=e,{scrollToIndex:g=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:q="instant"}=e,{overscanCount:F=3}=e;const D=Vr(),Y=new bs({itemCount:a,itemSize:o,estimatedItemSize:ee()});let Z=!1,X,J=[],R={offset:m||g!=null&&J.length&&A(g)||0,scrollChangeReason:Bt.REQUESTED},u=R,c={scrollToIndex:g,scrollToAlignment:E,scrollOffset:m,itemCount:a,itemSize:o,estimatedItemSize:h},k={},S="",I="";Q(),on(()=>{n(18,Z=!0),X.addEventListener("scroll",T,Cs),m!=null?B(m):g!=null&&B(A(g))}),Gn(()=>{Z&&X.removeEventListener("scroll",T)});function z(){if(!Z)return;const b=c.scrollToIndex!==g||c.scrollToAlignment!==E,L=c.itemCount!==a||c.itemSize!==o||c.estimatedItemSize!==h;L&&(Y.updateConfig({itemSize:o,itemCount:a,estimatedItemSize:ee()}),y()),c.scrollOffset!==m?n(19,R={offset:m||0,scrollChangeReason:Bt.REQUESTED}):typeof g=="number"&&(b||L)&&n(19,R={offset:A(g,E,a),scrollChangeReason:Bt.REQUESTED}),c={scrollToIndex:g,scrollToAlignment:E,scrollOffset:m,itemCount:a,itemSize:o,estimatedItemSize:h}}function P(){if(!Z)return;const{offset:b,scrollChangeReason:L}=R;(u.offset!==b||u.scrollChangeReason!==L)&&Q(),u.offset!==b&&L===Bt.REQUESTED&&B(b),u=R}function Q(){const{offset:b}=R,{start:L,stop:W}=Y.getVisibleRange({containerSize:p===st.VERTICAL?s:l,offset:b,overscanCount:F});let ie=[];const ne=Y.getTotalSize();p===st.VERTICAL?(n(3,S=`height:${s}${typeof s=="number"?"px":""};width:${l};`),n(4,I=`flex-direction:column;height:${ne}px;`)):(n(3,S=`height:${s};width:${l}${typeof l=="number"?"px":""}`),n(4,I=`min-height:100%;width:${ne}px;`));const N=f!=null&&f.length!==0;if(N)for(let H=0;H<f.length;H++){const oe=f[H];ie.push({index:oe,style:O(oe,!0)})}if(L!==void 0&&W!==void 0){for(let H=L;H<=W;H++)N&&f.includes(H)||ie.push({index:H,style:O(H,!1)});D("itemsUpdated",{start:L,end:W})}n(2,J=ie)}function B(b){"scroll"in X?X.scroll({[vs[p]]:b,behavior:q}):n(1,X[ki[p]]=b,X)}function y(b=0){k={},Y.resetItem(b),Q()}function A(b,L=E,W=a){return(b<0||b>=W)&&(b=0),Y.getUpdatedOffsetForIndex({align:L,containerSize:p===st.VERTICAL?s:l,currentOffset:R.offset||0,targetIndex:b})}function T(b){const L=M();L<0||R.offset===L||b.target!==X||(n(19,R={offset:L,scrollChangeReason:Bt.OBSERVED}),D("afterScroll",{offset:L,event:b}))}function M(){return X[ki[p]]}function ee(){return h||typeof o=="number"&&o||50}function O(b,L){if(k[b])return k[b];const{size:W,offset:ie}=Y.getSizeAndPositionForIndex(b);let ne;return p===st.VERTICAL?(ne=`left:0;width:100%;height:${W}px;`,L?ne+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ie}px;margin-bottom:${-(ie+W)}px;`:ne+=`position:absolute;top:${ie}px;`):(ne=`top:0;width:${W}px;`,L?ne+=`position:sticky;z-index:1;left:0;margin-left:${ie}px;margin-right:${-(ie+W)}px;`:ne+=`position:absolute;height:100%;left:${ie}px;`),k[b]=ne}function G(b){Lt[b?"unshift":"push"](()=>{X=b,n(1,X)})}return t.$$set=b=>{"height"in b&&n(5,s=b.height),"width"in b&&n(6,l=b.width),"itemCount"in b&&n(7,a=b.itemCount),"itemSize"in b&&n(8,o=b.itemSize),"estimatedItemSize"in b&&n(9,h=b.estimatedItemSize),"stickyIndices"in b&&n(10,f=b.stickyIndices),"getKey"in b&&n(0,_=b.getKey),"scrollDirection"in b&&n(11,p=b.scrollDirection),"scrollOffset"in b&&n(12,m=b.scrollOffset),"scrollToIndex"in b&&n(13,g=b.scrollToIndex),"scrollToAlignment"in b&&n(14,E=b.scrollToAlignment),"scrollToBehaviour"in b&&n(15,q=b.scrollToBehaviour),"overscanCount"in b&&n(16,F=b.overscanCount),"$$scope"in b&&n(20,r=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&z(),t.$$.dirty[0]&524288&&P(),t.$$.dirty[0]&263264&&Z&&y(0)},[_,X,J,S,I,s,l,a,o,h,f,p,m,g,E,q,F,y,Z,R,r,i,G]}class As extends Ye{constructor(e){super(),Ze(this,e,Ss,Es,xe,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Ne()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Ne()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Ne()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Ne()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Ne()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Ne()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Ne()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Ne()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Ne()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Ne()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Ne()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Ne()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Ne()}get recomputeSizes(){return this.$$.ctx[17]}}class an extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Jn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const Is="modulepreload",Ts=function(t){return"https://will-moore.github.io/ome2024-ngff-challenge/"+t},Ti={},jt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Ts(a),a in Ti)return;Ti[a]=!0;const o=a.endsWith(".css"),h=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const f=document.createElement("link");if(f.rel=o?"stylesheet":Is,o||(f.as="script"),f.crossOrigin="",f.href=a,l&&f.setAttribute("nonce",l),document.head.appendChild(f),o)return new Promise((_,p)=>{f.addEventListener("load",_),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})};var Ve;class Tr{constructor(e,n,i){Ie(this,Ve);typeof e=="number"?ke(this,Ve,new Uint8Array(e)):e instanceof ArrayBuffer?ke(this,Ve,new Uint8Array(e,n,i)):ke(this,Ve,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return $(this,Ve).byteOffset}get byteLength(){return $(this,Ve).byteLength}get buffer(){return $(this,Ve).buffer}get length(){return $(this,Ve).length}get(e){let n=$(this,Ve)[e];return typeof n=="number"?n!==0:n}set(e,n){$(this,Ve)[e]=n?1:0}fill(e){$(this,Ve).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ve=new WeakMap;var zt;class Zn{constructor(e,n,i,r){le(this,"_data");le(this,"chars");Ie(this,zt);if(this.chars=e,ke(this,zt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let l=0;l<s.length;l++)this.set(l,s[l])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set($(this,zt).encode(n))}fill(e){const n=$(this,zt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}zt=new WeakMap;var Me;const ti=class ti{constructor(e,n,i,r){Ie(this,Me);le(this,"chars");if(this.chars=e,typeof n=="number")ke(this,Me,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),ke(this,Me,new Int32Array(n,i,r));else{const s=n,l=new ti(e,1);ke(this,Me,new Int32Array(function*(){for(let a of s)l.set(0,a),yield*$(l,Me)}()))}}get BYTES_PER_ELEMENT(){return $(this,Me).BYTES_PER_ELEMENT*this.chars}get byteLength(){return $(this,Me).byteLength}get byteOffset(){return $(this,Me).byteOffset}get buffer(){return $(this,Me).buffer}get length(){return $(this,Me).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint($(this,Me)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=$(this,Me).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=$(this,Me).subarray(0,this.chars);for(let i=1;i<this.length;i++)$(this,Me).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Me=new WeakMap;let Jt=ti;function un(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Oi(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let l=0;l<n;l+=1)r=t[s+l],t[s+l]=t[s+i-l],t[s+i-l]=r}const Os={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Tr},Rs=/v2:([US])(\d+)/;function Or(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Rs);if(e){let[,i,r]=e;return(i==="U"?Jt:Zn).bind(null,Number(r))}let n=Os[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function vt(t,e){return(e==="C"?zs:Ms)(t)}function zs(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Ms(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Ls({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function qn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Fs=/^([<|>])(.*)$/;function Ds(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Fs);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Ns(t,e={}){let n=[],i=Ds(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Ps(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Us(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function qs(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Rr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ri=Bs();function Bs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function zi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Zt,at,Yt,Qt,Mt;const ni=class ni{constructor(e,n){le(this,"kind","array_to_bytes");Ie(this,Zt);Ie(this,at);Ie(this,Yt);Ie(this,Qt);Ie(this,Mt);ke(this,Mt,e==null?void 0:e.endian),ke(this,at,Or(n.data_type)),ke(this,Qt,n.shape),ke(this,Zt,vt(n.shape,qn(n.codecs)));const i=new($(this,at))(0);ke(this,Yt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new ni(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ri&&$(this,Mt)==="big"&&Oi(n,zi($(this,at))),n}decode(e){return Ri&&$(this,Mt)==="big"&&Oi(e,zi($(this,at))),{data:new($(this,at))(e.buffer,e.byteOffset,e.byteLength/$(this,Yt)),shape:$(this,Qt),stride:$(this,Zt)}}};Zt=new WeakMap,at=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Mt=new WeakMap;let wn=ni;class Yn{constructor(){le(this,"kind","bytes_to_bytes")}static fromConfig(){return new Yn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function js(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function xs(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Xt,$t;const ii=class ii{constructor(e={}){le(this,"configuration");le(this,"kind","array_to_bytes");Ie(this,Xt);Ie(this,$t);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:l=!0,sort_keys:a=!0,indent:o,strict:h=!0}=e;let f=e.separators;f||(o?f=[", ",": "]:f=[",",":"]),ke(this,Xt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:l,indent:o,separators:f,sort_keys:a}),ke(this,$t,{strict:h})}static fromConfig(e){return new ii(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:l,sort_keys:a}=$(this,Xt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const o=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");l||o.push(js),a&&o.push(xs);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;o.length&&(f=(p,m)=>{let g=m;for(let E of o)g=E(p,g);return g});let _=JSON.stringify(h,f,n);return r&&(_=_.replace(/[\u007F-\uFFFF]/g,p=>{const m=`0000${p.charCodeAt(0).toString(16)}`;return`\\u${m.substring(m.length-4)}`})),new TextEncoder().encode(_)}decode(e){const{strict:n}=$(this,$t);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=un(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=vt(r,"C");return{data:i,shape:r,stride:s}}};Xt=new WeakMap,$t=new WeakMap;let Bn=ii;function Mi(t){return t instanceof Tr||t instanceof Zn||t instanceof Jt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Vs(t,e){let n;return t.data instanceof Zn||t.data instanceof Jt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:vt(t.shape,e)}}function Ws(t,e){let n=Vs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),l=Mi(t.data),a=Mi(n.data);for(let o=0;o<r;o++){let h=0;for(let f=0;f<i;f++)h+=s[f]*n.stride[f];a[h]=l[o],s[0]+=1;for(let f=0;f<i;f++)if(s[f]===t.shape[f]){if(f+1===i)break;s[f]=0,s[f+1]+=1}}return n}function Hs(t){if(!t.stride)return"C";let e=vt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Qn{constructor(e){le(this,"configuration");le(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Qn(e)}encode(e){var n,i;return Hs(e)===((n=this.configuration)==null?void 0:n.order)?e:Ws(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var en,tn;const ri=class ri{constructor(e){le(this,"kind","array_to_bytes");Ie(this,en);Ie(this,tn);ke(this,en,e),ke(this,tn,vt(e,"C"))}static fromConfig(e,n){return new ri(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let l=0;l<r.length;l++){let a=i.getUint32(s,!0);s+=4,r[l]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:$(this,en),stride:$(this,tn)}}};en=new WeakMap,tn=new WeakMap;let jn=ri;function Ks(){return new Map().set("blosc",()=>jt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>jt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>jt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>jt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>jt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Qn).set("bytes",()=>wn).set("crc32c",()=>Yn).set("vlen-utf8",()=>jn).set("json2",()=>Bn)}const Gs=Ks();function xn(t){let e;return{async encode(n){e||(e=await Li(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Li(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Li(t){let e=t.codecs.map(async s=>{var a;let l=await((a=Gs.get(s.name))==null?void 0:a());if(!l)throw new Error(`Unknown codec: ${s.name}`);return{Codec:l,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:l}of e){let a=s.fromConfig(l.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!Js(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=wn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Js(t){return t.data_type!=="v2:object"}const Fi=18446744073709551615n;function Zs(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((o,h)=>o/i.chunk_shape[h]),l=xn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async o=>{let h=o.map((D,Y)=>Math.floor(D/s[Y])),f=t.resolve(n(h)).path,_;if(f in a)_=a[f];else{let D=4,Y=16*s.reduce((X,J)=>X*J,1),Z=await r(f,{suffixLength:Y+D});_=a[f]=Z?await l.decode(Z):null}if(_===null)return;let{data:p,shape:m,stride:g}=_,E=o.map((D,Y)=>D%m[Y]).reduce((D,Y,Z)=>D+Y*g[Z],0),q=p[E],F=p[E+1];if(!(q===Fi&&F===Fi))return r(f,{offset:Number(q),length:Number(F)})}}class Nt{constructor(e,n="/"){le(this,"store");le(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Nt(this.store,new URL(e,n).pathname)}}var nn;class Xn extends Nt{constructor(n,i,r){super(n,i);le(this,"kind","group");Ie(this,nn);ke(this,nn,r)}get attrs(){return $(this,nn).attributes}}nn=new WeakMap;const Wt=Symbol("zarrita.context");function Ys(t){return t[Wt]}function Qs(t,e){let{configuration:n}=e.codecs.find(qs)??{},i={encode_chunk_key:Ls(e.chunk_key_encoding),TypedArray:Or(e.data_type),fill_value:e.fill_value};if(n){let s=qn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:xn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(l,a){return vt(l,a??s)},get_chunk_bytes:Zs(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=qn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:xn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,l){return vt(s,l??r)},async get_chunk_bytes(s,l){let a=i.encode_chunk_key(s),o=t.resolve(a).path;return t.store.get(o,l)}}}var _r,gr,pt,mr;let kn=(mr=class extends(gr=Nt,_r=Wt,gr){constructor(n,i,r){super(n,i);le(this,"kind","array");Ie(this,pt);le(this,_r);ke(this,pt,{...r,fill_value:Rr(r)}),this[Wt]=Qs(this,r)}get attrs(){return $(this,pt).attributes}get shape(){return $(this,pt).shape}get chunks(){return this[Wt].chunk_shape}get dtype(){return $(this,pt).data_type}async getChunk(n,i){let r=this[Wt],s=await r.get_chunk_bytes(n,i);if(!s){let l=r.chunk_shape.reduce((o,h)=>o*h,1),a=new r.TypedArray(l);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Us(this.dtype,n)}},pt=new WeakMap,mr),Cn=Xs();function Xs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function $s(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?un(e):{}}async function el(t,e={}){let n="store"in t?t:new Nt(t),i={};return(e.attrs??!0)&&(i=await $s(n)),e.kind==="array"?Di(n,i):e.kind==="group"?Ni(n,i):Di(n,i).catch(r=>{if(r instanceof an)return Ni(n,i);throw r})}async function Di(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new an("v2 array",{cause:new Jn(n)});return Cn.increment(t.store,"v2"),new kn(t.store,t.path,Ns(un(i),e))}async function Ni(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new an("v2 group",{cause:new Jn(n)});return Cn.increment(t.store,"v2"),new Xn(t.store,t.path,Ps(un(i),e))}async function tl(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new an("v3 array or group",{cause:new Jn(n)});let r=un(i);return r.node_type==="array"&&(r.fill_value=Rr(r)),r.node_type==="array"?new kn(e,t.path,r):new Xn(e,t.path,r)}async function nl(t,e={}){let n="store"in t?t:new Nt(t),i=await tl(n);if(Cn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof kn||e.kind==="group"&&i instanceof Xn)return i;let r=i instanceof kn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function mt(t,e={}){let n="store"in t?t.store:t,i=Cn.version_max(n),r=i==="v2"?mt.v2:mt.v3,s=i==="v2"?mt.v3:mt.v2;return r(t,e).catch(l=>{if(l instanceof an)return s(t,e);throw l})}mt.v2=el;mt.v3=nl;function*il(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*rl(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function sl({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,l]=r?[-1,i-1]:[0,i];return t===null?t=r?l:s:t<0?(t+=i,t<s&&(t=s)):t>l&&(t=l),e===null?e=r?s:l:e<0?(e+=i,e<s&&(e=s)):e>l&&(e=l),[t,e,n]}function Vn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function ll(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class $n extends Error{constructor(e){super(e),this.name="IndexError"}}function ol(t,e){throw new $n(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function al(t){throw new $n(`index out of bounds for dimension with length ${t}`)}function ul(){throw new $n("only slices with step >= 1 are supported")}function fl(t,e){t.length>e.length&&ol(t,e)}function cl(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&al(e),t}class hl{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){le(this,"dim_sel");le(this,"dim_len");le(this,"dim_chunk_len");le(this,"nitems");e=cl(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Pi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){le(this,"start");le(this,"stop");le(this,"step");le(this,"dim_len");le(this,"dim_chunk_len");le(this,"nitems");le(this,"nchunks");const[r,s,l]=sl(e,n);this.start=r,this.stop=s,this.step=l,this.step<1&&ul(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of il(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),l=s-r;let a=0,o=0;if(this.start<r){const m=(r-this.start)%this.step;m&&(o+=this.step-m),a=Math.ceil((r-this.start)/this.step)}else o=this.start-r;const h=this.stop>s?l:this.stop-r,f=[o,h,this.step],_=Math.ceil((h-o)/this.step),p=[a,a+_,1];yield{dim_chunk_ix:i,dim_chunk_sel:f,dim_out_sel:p}}}}function dl(t,e){let n=[];return t===null?n=e.map(i=>Vn(null)):Array.isArray(t)&&(n=t.map(i=>i??Vn(null))),fl(n,e),n}class _l{constructor({selection:e,shape:n,chunk_shape:i}){le(this,"dim_indexers");le(this,"shape");this.dim_indexers=dl(e,n).map((r,s)=>new(typeof r=="number"?hl:Pi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Pi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of rl(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function gl(t,e){return"get"in t?t.get(e):t[e]}async function ml(t,e,n,i){var o;let r=Ys(t),s=new _l({selection:e,shape:t.shape,chunk_shape:t.chunks}),l=i.prepare(new r.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,r.get_strides(s.shape,n.order)),a=((o=n.create_queue)==null?void 0:o.call(n))??ll();for(const{chunk_coords:h,mapping:f}of s)a.add(async()=>{let{data:_,shape:p,stride:m}=await t.getChunk(h,n.opts),g=i.prepare(_,p,m);i.set_from_chunk(l,g,f)});return await a.onIdle(),s.shape.length===0?gl(l.data,0):l}function ei(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return ei(t,e+r,s-r)},set(r,s=0){for(let l=0;l<r.length;l++)t[e+s+l]=r.get(l)},get(r){return t[e+r]}}}function zn(t){return globalThis.Array.isArray(t.data)?{data:ei(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function pl(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function vl(t,e){if(globalThis.Array.isArray(t.data))return ei([e]);let n=pl(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const bl={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=zn(t);Wn(i,e,vl(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=zn(t);bn(i,zn(e),i.bytes_per_element,n)}};async function yl(t,e=null,n={}){return ml(t,e,n,bl)}function zr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Wn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[l,...a]=t.stride;if(typeof r=="number"){const p=t.data.subarray(l*r*i);Wn({data:p,stride:a},s,n,i);return}const[o,h,f]=r,_=zr(o,h,f);if(s.length===0){for(let p=0;p<_;p++)t.data.set(n,l*(o+f*p)*i);return}for(let p=0;p<_;p++){const m=t.data.subarray(l*(o+f*p)*i);Wn({data:m,stride:a},s,n,i)}}function bn(t,e,n,i){const[r,...s]=i,[l,...a]=t.stride,[o,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}bn({data:t.data.subarray(l*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let F=r.from*n;t.data.set(e.data.subarray(F,F+n),0);return}bn(t,{data:e.data.subarray(o*r.from*n),stride:h},n,s);return}const[f,_,p]=r.to,[m,g,E]=r.from,q=zr(f,_,p);if(s.length===0){if(p===1&&E===1&&l===1&&o===1){let F=m*n,D=q*n;t.data.set(e.data.subarray(F,F+D),f*n);return}for(let F=0;F<q;F++){let D=o*(m+E*F)*n;t.data.set(e.data.subarray(D,D+n),l*(f+p*F)*n)}return}for(let F=0;F<q;F++)bn({data:t.data.subarray(l*(f+F*p)*n),stride:a},{data:e.data.subarray(o*(m+F*E)*n),stride:h},n,s)}function Mr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function wl(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Ui(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function qi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function kl(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),l=Number(s);return Mr(t,l-e,l,n)}var rn,sn,ln,Hn;class El{constructor(e,n={}){Ie(this,ln);le(this,"url");Ie(this,rn);Ie(this,sn);this.url=e,ke(this,rn,n.overrides??{}),ke(this,sn,n.useSuffixRequest??!1)}async get(e,n={}){let i=Ui(this.url,e).href,r=await fetch(i,On(this,ln,Hn).call(this,n));return qi(r)}async getRange(e,n,i={}){let r=Ui(this.url,e),s=On(this,ln,Hn).call(this,i),l;return"suffixLength"in n?l=await kl(r,n.suffixLength,s,$(this,sn)):l=await Mr(r,n.offset,n.length,s),qi(l)}}rn=new WeakMap,sn=new WeakMap,ln=new WeakSet,Hn=function(e){return wl($(this,rn),e)};function Cl(t){let e,n;return{c(){e=w("div"),n=w("canvas"),ae(n,"width",t[3]+"px"),ae(n,"height",t[4]+"px"),ae(n,"background-color","lightgrey"),v(n,"height",t[2]),v(n,"width",t[1]),v(n,"class","svelte-lwhhyg"),v(e,"class","canvasWrapper svelte-lwhhyg"),ae(e,"width",t[3]+"px"),ae(e,"height",t[4]+"px"),Tt(e,"spinner",t[5])},m(i,r){V(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&ae(n,"width",i[3]+"px"),r&16&&ae(n,"height",i[4]+"px"),r&4&&v(n,"height",i[2]),r&2&&v(n,"width",i[1]),r&8&&ae(e,"width",i[3]+"px"),r&16&&ae(e,"height",i[4]+"px"),r&32&&Tt(e,"spinner",i[5])},i:we,o:we,d(i){i&&x(e),t[12](null)}}}function Sl(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:l=1}=e,{cssSize:a=120}=e,{max_size:o=512}=e,h,f=a,_=a;l>1?_=f/l:l<1&&(f=_*l);let p=f,m=_,g=!0;const E=new AbortController;async function q(){var T;let D=r.multiscales[0].datasets.map(M=>M.path),Y=r.multiscales[0].axes.map(M=>M.name),Z=D.at(-1);s!=null&&s<D.length&&(Z=D[s]);const X=new El(i+"/"+Z),J=await mt.v3(X,{kind:"array"});let R=Y.indexOf("c"),u=J.shape;if(u.at(-1)*u.at(-2)>o*o){console.log("Lowest resolution too large for Thumbnail: ",u,i);return}let c=u.length,k=u[R]||1,S,I;(T=r==null?void 0:r.omero)!=null&&T.channels?(S=r.omero.channels.map(M=>M.active),I=r.omero.channels.map(M=>Cr(M.color))):(S=cs(k),I=hs(k,S)),I=I.filter((M,ee)=>S[ee]);let P=S.reduce((M,ee,O)=>(ee&&M.push(O),M),[]).map(M=>{let ee=u.map((O,G)=>G==R?M:G>=c-2?Vn(0,O):Y[G]=="z"||Y[G]=="t"?parseInt(O/2+""):0);return yl(J,ee,{opts:{signal:E.signal}})}),Q=await Promise.all(P),B=Q.map(M=>Er(M)),y=ls(Q,B,I);n(1,f=u.at(-1)),n(2,_=u.at(-2));let A=f/a;_>f&&(A=_/a),n(3,p=f/A),n(4,m=_/A),setTimeout(()=>{const M=h.getContext("2d");n(5,g=!1),M.putImageData(new ImageData(y,f,_),0,0)},100)}on(()=>{q()}),Gn(()=>{E.abort()});function F(D){Lt[D?"unshift":"push"](()=>{h=D,n(0,h)})}return t.$$set=D=>{"source"in D&&n(6,i=D.source),"attrs"in D&&n(7,r=D.attrs),"thumbDatasetIndex"in D&&n(8,s=D.thumbDatasetIndex),"thumbAspectRatio"in D&&n(9,l=D.thumbAspectRatio),"cssSize"in D&&n(10,a=D.cssSize),"max_size"in D&&n(11,o=D.max_size)},[h,f,_,p,m,g,i,r,s,l,a,o,F]}class Lr extends Ye{constructor(e){super(),Ze(this,e,Sl,Cl,xe,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function Bi(t,e,n){const i=t.slice();return i[11]=e[n],i}function ji(t){let e,n;return e=new Lr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function xi(t){let e,n,i,r,s,l,a,o=t[0].source+"",h,f,_=t[0].csv&&Vi(t);return{c(){e=w("div"),n=w("span"),n.textContent="Data",i=j(),_&&_.c(),r=j(),s=w("span"),s.textContent="provided by",l=j(),a=w("strong"),h=U(o),f=U("."),v(n,"class","hideOnSmall svelte-afrxqy"),v(s,"class","hideOnSmall svelte-afrxqy"),ae(a,"color","grey")},m(p,m){V(p,e,m),d(e,n),d(e,i),_&&_.m(e,null),d(e,r),d(e,s),d(e,l),d(e,a),d(a,h),d(e,f)},p(p,m){p[0].csv?_?_.p(p,m):(_=Vi(p),_.c(),_.m(e,r)):_&&(_.d(1),_=null),m&1&&o!==(o=p[0].source+"")&&ge(h,o)},d(p){p&&x(e),_&&_.d()}}}function Vi(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,l;return{c(){e=w("span"),e.textContent="from collection",n=j(),i=w("a"),s=U(r),v(e,"class","hideOnSmall svelte-afrxqy"),v(i,"title","Show collection in a new tab"),v(i,"href",l=Gi(t[0])),v(i,"target","_blank")},m(o,h){V(o,e,h),V(o,n,h),V(o,i,h),d(i,s)},p(o,h){var f;h&1&&r!==(r=((f=o[0].csv)==null?void 0:f.split("/").pop().replace(".csv",""))+"")&&ge(s,r),h&1&&l!==(l=Gi(o[0]))&&v(i,"href",l)},d(o){o&&(x(e),x(n),x(i))}}}function Wi(t){let e,n,i,r,s,l;return{c(){e=U("Browse "),n=w("a"),i=U("Original data"),l=U("."),v(n,"title",r="Link to original data: "+t[0].origin),v(n,"href",s=t[0].origin),v(n,"target","_blank")},m(a,o){V(a,e,o),V(a,n,o),d(n,i),V(a,l,o)},p(a,o){o&1&&r!==(r="Link to original data: "+a[0].origin)&&v(n,"title",r),o&1&&s!==(s=a[0].origin)&&v(n,"href",s)},d(a){a&&(x(e),x(n),x(l))}}}function Hi(t){let e=t[11].toUpperCase()+"",n,i,r=t[0][`size_${t[11]}`]+"",s,l;return{c(){n=U(e),i=U(":"),s=U(r),l=U("  ")},m(a,o){V(a,n,o),V(a,i,o),V(a,s,o),V(a,l,o)},p(a,o){o&1&&r!==(r=a[0][`size_${a[11]}`]+"")&&ge(s,r)},d(a){a&&(x(n),x(i),x(s),x(l))}}}function Ki(t){let e,n=t[0][`size_${t[11]}`]!==void 0&&Hi(t);return{c(){n&&n.c(),e=En()},m(i,r){n&&n.m(i,r),V(i,e,r)},p(i,r){i[0][`size_${i[11]}`]!==void 0?n?n.p(i,r):(n=Hi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&x(e),n&&n.d(i)}}}function Al(t){let e,n,i=ft(t[0].written)+"",r;return{c(){e=w("div"),n=U("Data size: "),r=U(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=ft(s[0].written)+"")&&ge(r,i)},d(s){s&&x(e)}}}function Il(t){let e,n,i=t[0].shards+"",r;return{c(){e=w("div"),n=U("Shard shape: "),r=U(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=s[0].shards+"")&&ge(r,i)},d(s){s&&x(e)}}}function Tl(t){let e,n,i=t[0].chunks+"",r;return{c(){e=w("div"),n=U("Chunk shape: "),r=U(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=s[0].chunks+"")&&ge(r,i)},d(s){s&&x(e)}}}function Ol(t){let e,n,i,r,s,l,a=Ji(t[0].url)+"",o,h,f,_=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",p,m,g,E=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",q,F,D,Y,Z,X,J,R,u,c,k,S,I,z,P,Q,B=t[3]&&ji(t),y=t[0].source&&xi(t),A=t[0].origin&&Wi(t),T=Pe(["t","c","z","y","x"]),M=[];for(let b=0;b<5;b+=1)M[b]=Ki(Bi(t,T,b));function ee(b,L){return b[2]=="chunk_pixels"?Tl:b[2]=="shard_pixels"?Il:Al}let O=ee(t),G=O(t);return{c(){e=w("div"),n=w("div"),B&&B.c(),i=j(),r=w("div"),s=w("div"),l=w("strong"),o=U(a),h=j(),f=w("div"),m=j(),g=w("div"),q=j(),y&&y.c(),F=j(),D=w("div"),Y=U("Open in "),Z=w("a"),X=U("OME-Validator."),u=j(),A&&A.c(),c=j(),k=w("div"),S=U(`Image size:
      `);for(let b=0;b<5;b+=1)M[b].c();I=j(),G.c(),v(n,"class","thumbWrapper svelte-afrxqy"),v(f,"class",p=pi(t[1]==""?"hideOnSmall":"")+" svelte-afrxqy"),v(Z,"title",J="Open in Validator: "+t[0].url),v(Z,"href",R="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+t[0].url),v(Z,"target","_blank"),v(e,"class","zarr-list-item svelte-afrxqy")},m(b,L){V(b,e,L),d(e,n),B&&B.m(n,null),d(e,i),d(e,r),d(r,s),d(s,l),d(l,o),d(r,h),d(r,f),f.innerHTML=_,d(r,m),d(r,g),g.innerHTML=E,d(r,q),y&&y.m(r,null),d(r,F),d(r,D),d(D,Y),d(D,Z),d(Z,X),d(D,u),A&&A.m(D,null),d(r,c),d(r,k),d(k,S);for(let W=0;W<5;W+=1)M[W]&&M[W].m(k,null);d(r,I),G.m(r,null),z=!0,P||(Q=ve(n,"click",t[8]),P=!0)},p(b,[L]){if(b[3]?B?(B.p(b,L),L&8&&se(B,1)):(B=ji(b),B.c(),se(B,1),B.m(n,null)):B&&(Ft(),he(B,1,1,()=>{B=null}),Dt()),(!z||L&1)&&a!==(a=Ji(b[0].url)+"")&&ge(o,a),(!z||L&3)&&_!==(_=(b[0].name?b[0].name.replaceAll(b[1],`<mark>${b[1]}</mark>`):"")+"")&&(f.innerHTML=_),(!z||L&2&&p!==(p=pi(b[1]==""?"hideOnSmall":"")+" svelte-afrxqy"))&&v(f,"class",p),(!z||L&130)&&E!==(E=b[7].replaceAll(b[1],`<mark>${b[1]}</mark>`)+"")&&(g.innerHTML=E),b[0].source?y?y.p(b,L):(y=xi(b),y.c(),y.m(r,F)):y&&(y.d(1),y=null),(!z||L&1&&J!==(J="Open in Validator: "+b[0].url))&&v(Z,"title",J),(!z||L&1&&R!==(R="https://deploy-preview-36--ome-ngff-validator.netlify.app/?source="+b[0].url))&&v(Z,"href",R),b[0].origin?A?A.p(b,L):(A=Wi(b),A.c(),A.m(D,null)):A&&(A.d(1),A=null),L&1){T=Pe(["t","c","z","y","x"]);let W;for(W=0;W<5;W+=1){const ie=Bi(b,T,W);M[W]?M[W].p(ie,L):(M[W]=Ki(ie),M[W].c(),M[W].m(k,null))}for(;W<5;W+=1)M[W].d(1)}O===(O=ee(b))&&G?G.p(b,L):(G.d(1),G=O(b),G&&(G.c(),G.m(r,null)))},i(b){z||(se(B),z=!0)},o(b){he(B),z=!1},d(b){b&&x(e),B&&B.d(),y&&y.d(),A&&A.d(),Ot(M,b),G.d(),P=!1,Q()}}}function Gi(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Ji(t){return t.split("/").pop()}function Rl(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:l=void 0}=e,a,o,h,f=1;const _=new AbortController;if(r.size_x&&r.size_y){let m=Math.max(r.size_x,r.size_y);for(h=0;m>256;)h+=1,m=m/2;f=r.size_x/r.size_y}function p(){console.log("Clicked on thumbnail"),Ce.setSelectedRow(r)}return on(async()=>{let m=r.url;r.series0!==void 0&&(m+="/"+r.series0);let g=await Gt(m,_.signal);n(3,a=g[0]),n(4,o=g[1]),g[2]}),Gn(()=>{_.abort()}),t.$$set=m=>{"rowData"in m&&n(0,r=m.rowData),"textFilter"in m&&n(1,s=m.textFilter),"sortedBy"in m&&n(2,l=m.sortedBy)},t.$$.update=()=>{var m;t.$$.dirty&3&&n(7,i=s!=""&&((m=r.description)!=null&&m.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,l,a,o,h,f,i,p]}class zl extends Ye{constructor(e){super(),Ze(this,e,Rl,Ol,xe,{rowData:0,textFilter:1,sortedBy:2})}}function Ml(t){let e,n,i,r;return n=new zl({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=w("div"),Je(n.$$.fragment),v(e,"slot","item"),v(e,"style",i=t[12]),v(e,"class","row svelte-1xvcjxw")},m(s,l){V(s,e,l),We(n,e,null),r=!0},p(s,l){const a={};l&8193&&(a.rowData=s[0][s[13]]),l&2&&(a.textFilter=s[1]),l&4&&(a.sortedBy=s[2]),n.$set(a),(!r||l&4096&&i!==(i=s[12]))&&v(e,"style",i)},i(s){r||(se(n.$$.fragment,s),r=!0)},o(s){he(n.$$.fragment,s),r=!1},d(s){s&&x(e),He(n)}}}function Ll(t){let e=!1,n=()=>{e=!1},i,r,s,l=`${t[5]}px`,a,o,h;return lt(t[8]),lt(t[9]),s=new As({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Ml,({style:f,index:_})=>({12:f,13:_}),({style:f,index:_})=>(f?4096:0)|(_?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=w("div"),Je(s.$$.fragment),v(r,"class","imageListContainer svelte-1xvcjxw"),ae(r,"height",l)},m(f,_){V(f,r,_),We(s,r,null),t[10](r),a=!0,o||(h=[ve(window,"resize",t[8]),ve(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],o=!0)},p(f,[_]){_&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,f[4]),i=setTimeout(n,100));const p={};_&32&&(p.height=f[5]),_&1&&(p.itemCount=f[0].length),_&28679&&(p.$$scope={dirty:_,ctx:f}),s.$set(p),_&32&&l!==(l=`${f[5]}px`)&&ae(r,"height",l)},i(f){a||(se(s.$$.fragment,f),a=!0)},o(f){he(s.$$.fragment,f),a=!1},d(f){f&&x(r),He(s),t[10](null),o=!1,nt(h)}}}function Fl(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:l=void 0}=e;function a(E){return r[E].url}let o,h=0,f=0;function _(E){let F=o.offsetTop-20;E.detail.offset-f<0&&h>F&&n(4,h-=1),f=E.detail.offset}function p(){n(5,i=window.innerHeight)}function m(){n(4,h=window.pageYOffset)}function g(E){Lt[E?"unshift":"push"](()=>{o=E,n(3,o)})}return t.$$set=E=>{"tableRows"in E&&n(0,r=E.tableRows),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,l=E.sortedBy)},n(5,i=0),[r,s,l,o,h,i,a,_,p,m,g]}class Dl extends Ye{constructor(e){super(),Ze(this,e,Fl,Ll,xe,{tableRows:0,textFilter:1,sortedBy:2})}}function Zi(t){let e,n;return e=new Lr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function Nl(t){let e,n,i=t[0]&&Zi(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&se(i,1)):(i=Zi(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),he(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function Pl(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,l,a=1;if(i.size_x&&i.size_y){let o=Math.max(i.size_x,i.size_y);for(l=0;o>1024;)l+=1,o=o/2;a=i.size_x/i.size_y}else l=void 0,a=1;return on(async()=>{let o=await Gt(i.url);n(0,r=o[0]),n(1,s=o[1]),o[2]}),t.$$set=o=>{"rowData"in o&&n(4,i=o.rowData)},[r,s,l,a,i]}class Ul extends Ye{constructor(e){super(),Ze(this,e,Pl,Nl,xe,{rowData:4})}}function Yi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Qi(t){let e,n;return e=new Ul({props:{rowData:t[1]}}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function Xi(t){let e,n,i=t[2]&&Qi(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&se(i,1)):(i=Qi(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),he(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function $i(t){let e,n=Pe(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=er(Yi(t,n,r));return{c(){e=w("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){V(r,e,s);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(r,s){if(s&2){n=Pe(Object.entries(r[1]));let l;for(l=0;l<n.length;l+=1){const a=Yi(r,n,l);i[l]?i[l].p(a,s):(i[l]=er(a),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){r&&x(e),Ot(i,r)}}}function er(t){let e,n,i=t[5]+"",r,s,l=t[6]+"",a;return{c(){e=w("tr"),n=w("td"),r=U(i),s=w("td"),a=U(l)},m(o,h){V(o,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(o,h){h&2&&i!==(i=o[5]+"")&&ge(r,i),h&2&&l!==(l=o[6]+"")&&ge(a,l)},d(o){o&&x(e)}}}function ql(t){let e,n,i,r,s=t[2],l,a,o,h,f=Xi(t),_=t[1]&&$i(t);return{c(){e=w("div"),n=w("button"),n.textContent="×",i=j(),r=w("div"),f.c(),l=j(),_&&_.c(),v(n,"class","close svelte-1g3sjso"),v(n,"title","Close"),v(r,"class","scrollable svelte-1g3sjso"),v(e,"id","mypopover"),v(e,"popover",""),v(e,"class","svelte-1g3sjso")},m(p,m){V(p,e,m),d(e,n),d(e,i),d(e,r),f.m(r,null),d(r,l),_&&_.m(r,null),t[4](e),a=!0,o||(h=ve(n,"click",t[3]),o=!0)},p(p,[m]){m&4&&xe(s,s=p[2])?(Ft(),he(f,1,1,we),Dt(),f=Xi(p),f.c(),se(f,1),f.m(r,l)):f.p(p,m),p[1]?_?_.p(p,m):(_=$i(p),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(p){a||(se(f),a=!0)},o(p){he(f),a=!1},d(p){p&&x(e),f.d(p),_&&_.d(),t[4](null),o=!1,h()}}}function Bl(t,e,n){let i,r,s;Ce.subscribeSelectedRow(o=>{console.log("Showing preview for",o),o&&(n(1,r=o),console.log("Showing Thumb preview for",o,r),n(2,s=r.url),i.showPopover())});function l(){i.hidePopover()}on(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",o=>{o.newState==="open"||(console.log("Popover has been hidden"),Ce.setSelectedRow(null))})});function a(o){Lt[o?"unshift":"push"](()=>{i=o,n(0,i)})}return[i,r,s,l,a]}class jl extends Ye{constructor(e){super(),Ze(this,e,Bl,ql,xe,{})}}const xl="https://will-moore.github.io/ome2024-ngff-challenge/selectCaret.svg",Vl="https://will-moore.github.io/ome2024-ngff-challenge/ome-main-nav.svg",Wl="https://will-moore.github.io/ome2024-ngff-challenge/github-mark-white.svg";function Hl(t){let e,n,i,r,s,l,a,o,h,f,_,p,m,g,E;return{c(){e=w("base"),n=j(),i=w("nav"),r=w("a"),s=w("img"),a=j(),o=w("a"),h=w("h2"),h.textContent="2024 NGFF Challenge",f=j(),_=w("div"),p=j(),m=w("a"),m.textContent="About",g=j(),E=w("a"),E.innerHTML=`<img alt="GitHub Logo" src="${Wl}" class="svelte-1q2q39w"/>`,v(e,"href",t[0]),v(s,"alt","OME Logo"),Mn(s.src,l=Vl)||v(s,"src",l),v(s,"class","svelte-1q2q39w"),v(r,"class","logolink svelte-1q2q39w"),v(r,"href",t[0]),v(h,"class","svelte-1q2q39w"),v(o,"href",t[0]),v(o,"class","svelte-1q2q39w"),ae(_,"flex","1"),v(m,"href","about/"),v(m,"class","svelte-1q2q39w"),v(E,"class","github svelte-1q2q39w"),v(E,"title","Open in GitHub"),v(E,"target","_blank"),v(E,"href","https://github.com/ome/ome2024-ngff-challenge/"),v(i,"class","svelte-1q2q39w")},m(q,F){V(q,e,F),V(q,n,F),V(q,i,F),d(i,r),d(r,s),d(i,a),d(i,o),d(o,h),d(i,f),d(i,_),d(i,p),d(i,m),d(i,g),d(i,E)},p:we,i:we,o:we,d(q){q&&(x(e),x(n),x(i))}}}function Kl(t){let e="https://will-moore.github.io/ome2024-ngff-challenge/";return console.log("Nav base",e),[e]}class Gl extends Ye{constructor(e){super(),Ze(this,e,Kl,Hl,xe,{})}}function tr(t){let e=t[0].plate_count+"",n,i;return{c(){n=U(e),i=U(" plates")},m(r,s){V(r,n,s),V(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&ge(n,e)},d(r){r&&(x(n),x(i))}}}function Jl(t){let e,n,i,r,s,l,a,o=t[0].source+"",h,f,_,p,m,g,E=ft(t[0].bytes)+"",q,F,D,Y,Z,X,J,R,u=t[0].image_count+"",c,k,S,I,z,P,Q,B,y,A=t[0].plate_count&&tr(t);return{c(){e=w("div"),n=w("label"),i=w("img"),l=j(),a=w("div"),h=U(o),f=j(),_=w("br"),p=j(),m=w("span"),g=U("("),q=U(E),F=U(")"),Y=w("input"),X=j(),J=w("div"),A&&A.c(),R=j(),c=U(u),k=U(" images"),S=j(),I=w("label"),z=w("input"),P=j(),Q=w("span"),Q.textContent="×",v(i,"title",r=t[0].url),v(i,"class","sourceLogo svelte-1iuq3t7"),v(i,"alt","Source logo"),Mn(i.src,s=bi(t[0].source))||v(i,"src",s),v(m,"title",D=t[0].child_csv.length+" collections"),v(Y,"class","source svelte-1iuq3t7"),v(Y,"type","radio"),v(Y,"name","source"),Y.value=Z=t[0].source,v(J,"class","tooltip svelte-1iuq3t7"),v(n,"class","svelte-1iuq3t7"),v(z,"type","radio"),v(z,"name","source"),z.value="",v(z,"class","svelte-1iuq3t7"),v(Q,"title","Clear filter"),v(I,"class","clear svelte-1iuq3t7"),v(e,"class","source svelte-1iuq3t7")},m(T,M){V(T,e,M),d(e,n),d(n,i),d(n,l),d(n,a),d(a,h),d(a,f),d(a,_),d(a,p),d(a,m),d(m,g),d(m,q),d(m,F),d(a,Y),d(a,X),d(a,J),A&&A.m(J,null),d(J,R),d(J,c),d(J,k),d(e,S),d(e,I),d(I,z),d(I,P),d(I,Q),B||(y=[ve(Y,"change",function(){yn(t[1])&&t[1].apply(this,arguments)}),ve(z,"change",function(){yn(t[1])&&t[1].apply(this,arguments)})],B=!0)},p(T,[M]){t=T,M&1&&r!==(r=t[0].url)&&v(i,"title",r),M&1&&!Mn(i.src,s=bi(t[0].source))&&v(i,"src",s),M&1&&o!==(o=t[0].source+"")&&ge(h,o),M&1&&E!==(E=ft(t[0].bytes)+"")&&ge(q,E),M&1&&D!==(D=t[0].child_csv.length+" collections")&&v(m,"title",D),M&1&&Z!==(Z=t[0].source)&&(Y.value=Z),t[0].plate_count?A?A.p(t,M):(A=tr(t),A.c(),A.m(J,R)):A&&(A.d(1),A=null),M&1&&u!==(u=t[0].image_count+"")&&ge(c,u)},i:we,o:we,d(T){T&&x(e),A&&A.d(),B=!1,nt(y)}}}function Zl(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Yl extends Ye{constructor(e){super(),Ze(this,e,Zl,Jl,xe,{source:0,handleFilter:1})}}function Ql(t,e,n){const i=t.slice();return i[31]=e[n],i}function nr(t,e,n){const i=t.slice();return i[34]=e[n],i}function ir(t,e,n){const i=t.slice();return i[34]=e[n],i}function rr(t,e,n){const i=t.slice();return i[39]=e[n],i}function sr(t,e,n){const i=t.slice();return i[42]=e[n],i}function lr(t){let e,n,i=ft(t[4])+"",r,s;return{c(){e=U(`In the summer of 2024, the OME-NGFF project generated
          `),n=w("strong"),r=U(i),s=U(" of data in Zarr v3 format"),ae(n,"font-weight","600")},m(l,a){V(l,e,a),V(l,n,a),d(n,r),V(l,s,a)},p(l,a){a[0]&16&&i!==(i=ft(l[4])+"")&&ge(r,i)},d(l){l&&(x(e),x(n),x(s))}}}function or(t){let e,n=ft(t[4])+"",i,r,s,l,a,o;return{c(){e=U("("),i=U(n),r=U(`)
              `),s=w("span"),s.textContent="  |  ",l=j(),a=w("a"),o=U("Show all collections"),ae(s,"color","grey"),v(a,"href",window.location.origin+window.location.pathname)},m(h,f){V(h,e,f),V(h,i,f),V(h,r,f),V(h,s,f),V(h,l,f),V(h,a,f),d(a,o)},p(h,f){f[0]&16&&n!==(n=ft(h[4])+"")&&ge(i,n)},d(h){h&&(x(e),x(i),x(r),x(s),x(l),x(a))}}}function ar(t){let e,n;return e=new Yl({props:{source:t[42],handleFilter:t[17]}}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function ur(t){let e,n,i,r,s,l,a,o,h,f=Pe(Ce.getCsvSourceList(t[14])),_=[];for(let p=0;p<f.length;p+=1)_[p]=fr(rr(t,f,p));return{c(){e=w("div"),n=w("select"),i=w("option"),i.textContent="Collection";for(let p=0;p<_.length;p+=1)_[p].c();r=j(),s=w("div"),l=w("button"),a=U("×"),i.__value="",Ee(i,i.__value),v(n,"name","collection"),v(n,"class","svelte-13v19q"),t[12]===void 0&&lt(()=>t[24].call(n)),v(l,"title","Clear Filter"),ae(l,"visibility",t[12]!==""?"visible":"hidden"),v(l,"class","svelte-13v19q"),v(s,"class","svelte-13v19q"),v(e,"class","selectWrapper svelte-13v19q")},m(p,m){V(p,e,m),d(e,n),d(n,i);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(n,null);ot(n,t[12],!0),d(e,r),d(e,s),d(s,l),d(l,a),o||(h=[ve(n,"change",t[24]),ve(n,"change",t[19]),ve(l,"click",t[19])],o=!0)},p(p,m){if(m[0]&16384){f=Pe(Ce.getCsvSourceList(p[14]));let g;for(g=0;g<f.length;g+=1){const E=rr(p,f,g);_[g]?_[g].p(E,m):(_[g]=fr(E),_[g].c(),_[g].m(n,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=f.length}m[0]&20480&&ot(n,p[12]),m[0]&4096&&ae(l,"visibility",p[12]!==""?"visible":"hidden")},d(p){p&&x(e),Ot(_,p),o=!1,nt(h)}}}function fr(t){let e,n=(t[39].source==t[14]?dr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",l,a,o;return{c(){e=w("option"),i=U(n),r=U(" ("),l=U(s),a=U(`)
                  `),e.__value=o=t[39].url,Ee(e,e.__value)},m(h,f){V(h,e,f),d(e,i),d(e,r),d(e,l),d(e,a)},p(h,f){f[0]&16384&&n!==(n=(h[39].source==h[14]?dr(h[39].url):h[39].source)+"")&&ge(i,n),f[0]&16384&&s!==(s=h[39].image_count+"")&&ge(l,s),f[0]&16384&&o!==(o=h[39].url)&&(e.__value=o,Ee(e,e.__value))},d(h){h&&x(e)}}}function cr(t){let e,n=t[34]+"",i,r;return{c(){e=w("option"),i=U(n),e.__value=r=t[5][t[34]],Ee(e,e.__value)},m(s,l){V(s,e,l),d(e,i)},p(s,l){l[0]&32&&n!==(n=s[34]+"")&&ge(i,n),l[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,Ee(e,e.__value))},d(s){s&&x(e)}}}function hr(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=w("option"),r=U(i),n.__value=s=e[6][e[34]],Ee(n,n.__value),this.first=n},m(l,a){V(l,n,a),d(n,r)},p(l,a){e=l,a[0]&64&&i!==(i=e[34]+"")&&ge(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,Ee(n,n.__value))},d(l){l&&x(n)}}}function Xl(t){let e;return{c(){e=w("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],Ee(e,e.__value)},m(n,i){V(n,e,i)},p:we,d(n){n&&x(e)}}}function $l(t){let e,n,i,r,s,l,a,o,h,f=t[1].split("/").pop()+"",_,p,m,g,E,q,F,D,Y,Z,X,J,R,u,c,k,S=t[14]!==""&&Ce.getCsvSourceList(t[14]).length>0,I,z,P,Q,B=t[13]!==""?"All Dimensions":"Dimension Count",y,A,T,M,ee,O,G,b,L,W,ie,ne,N,H,oe=t[11]==""?"Organism":"All Organisms",pe,ue,Se,de,re,Ue,Le,Te,be,Ae,fe=t[10]==""?"Imaging Modality":"All Modalities",me,et,te=[],it=new Map,Ke,Ge,Oe,Qe,Xe,Re,ct,ze,Pt,tt,$e,bt,si,li,yt,wt,kt,oi,fn,ht,ai,Et,rt,ui,cn=t[0].length+"",Sn,fi,An,ci,hi,dt,Fe,In,di;e=new jl({});let qe=t[1]==Vt&&lr(t),Be=t[1]!=Vt&&or(t),_t=Pe(t[2]),ye=[];for(let C=0;C<_t.length;C+=1)ye[C]=ar(sr(t,_t,C));const Fr=C=>he(ye[C],1,1,()=>{ye[C]=null});let je=S&&ur(t),Ct=Pe(Object.keys(t[5]).sort()),De=[];for(let C=0;C<Ct.length;C+=1)De[C]=cr(ir(t,Ct,C));let hn=Pe(Object.keys(t[6]).sort());const _i=C=>C[34];for(let C=0;C<hn.length;C+=1){let K=nr(t,hn,C),_e=_i(K);it.set(_e,te[C]=hr(_e,K))}let Dr=Pe(["x","y","z","c","t"]),Ut=[];for(let C=0;C<5;C+=1)Ut[C]=Xl(Ql(t,Dr,C));return ht=new ps({props:{toggleAscending:t[15],sortAscending:t[8]}}),dt=new Dl({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){Je(e.$$.fragment),n=j(),i=w("main"),r=w("div"),s=w("h3"),qe&&qe.c(),l=j(),a=w("div"),o=U(`Showing Collection:
            `),h=w("a"),_=U(f),p=j(),Be&&Be.c(),m=j(),g=w("div"),E=w("input"),q=j(),F=w("button"),D=U("×"),Y=j(),Z=w("div");for(let C=0;C<ye.length;C+=1)ye[C].c();X=j(),J=w("div"),R=w("div"),u=w("div"),c=w("div"),c.textContent="Filter by:",k=j(),je&&je.c(),I=j(),z=w("div"),P=w("select"),Q=w("option"),y=U(B),A=w("hr"),T=w("option"),T.textContent="2D",M=w("option"),M.textContent="3D",ee=w("option"),ee.textContent="4D",O=w("option"),O.textContent="5D",G=j(),b=w("div"),L=w("button"),W=U("×"),ie=j(),ne=w("div"),N=w("select"),H=w("option"),pe=U(oe),ue=w("hr");for(let C=0;C<De.length;C+=1)De[C].c();Se=j(),de=w("div"),re=w("button"),Ue=U("×"),Le=j(),Te=w("div"),be=w("select"),Ae=w("option"),me=U(fe),et=w("hr");for(let C=0;C<te.length;C+=1)te[C].c();Ke=j(),Ge=w("div"),Oe=w("button"),Qe=U("×"),Xe=j(),Re=w("div"),ct=j(),ze=w("div"),ze.textContent="Sort by:",Pt=j(),tt=w("div"),$e=w("select"),bt=w("option"),bt.textContent="--",si=w("hr");for(let C=0;C<5;C+=1)Ut[C].c();li=w("hr"),yt=w("option"),yt.textContent="Data Size (bytes)",wt=w("option"),wt.textContent="Chunk Size (pixels)",kt=w("option"),kt.textContent="Shard Size (pixels)",oi=j(),fn=w("div"),Je(ht.$$.fragment),ai=j(),Et=w("div"),rt=w("h3"),ui=U("Showing "),Sn=U(cn),fi=U(" out of "),An=U(t[3]),ci=U(" images"),hi=j(),Je(dt.$$.fragment),v(h,"href",t[1]),ae(a,"font-size","90%"),ae(s,"text-align","center"),v(E,"placeholder","Filter by Name or Description"),v(E,"name","textFilter"),v(E,"class","svelte-13v19q"),v(F,"title","Clear Filter"),ae(F,"visibility",t[9]!==""?"visible":"hidden"),v(F,"class","svelte-13v19q"),v(g,"class","textInputWrapper svelte-13v19q"),v(Z,"class","sources svelte-13v19q"),v(r,"class","summary svelte-13v19q"),ae(c,"white-space","nowrap"),Q.__value="",Ee(Q,Q.__value),T.__value="2",Ee(T,T.__value),M.__value="3",Ee(M,M.__value),ee.__value="4",Ee(ee,ee.__value),O.__value="5",Ee(O,O.__value),v(P,"class","svelte-13v19q"),t[13]===void 0&&lt(()=>t[25].call(P)),v(L,"title","Clear Filter"),ae(L,"visibility",t[13]!==""?"visible":"hidden"),v(L,"class","svelte-13v19q"),v(b,"class","svelte-13v19q"),v(z,"class","selectWrapper svelte-13v19q"),H.__value="",Ee(H,H.__value),v(N,"class","svelte-13v19q"),t[11]===void 0&&lt(()=>t[26].call(N)),v(re,"title","Clear Filter"),ae(re,"visibility",t[11]!==""?"visible":"hidden"),v(re,"class","svelte-13v19q"),v(de,"class","svelte-13v19q"),v(ne,"class","selectWrapper svelte-13v19q"),Ae.__value="",Ee(Ae,Ae.__value),v(be,"class","svelte-13v19q"),t[10]===void 0&&lt(()=>t[27].call(be)),v(Oe,"title","Clear Filter"),ae(Oe,"visibility",t[10]!==""?"visible":"hidden"),v(Oe,"class","svelte-13v19q"),v(Ge,"class","svelte-13v19q"),v(Te,"class","selectWrapper svelte-13v19q"),v(Re,"class","clear"),bt.__value="",Ee(bt,bt.__value),yt.__value="written",Ee(yt,yt.__value),wt.__value="chunk_pixels",Ee(wt,wt.__value),kt.__value="shard_pixels",Ee(kt,kt.__value),v($e,"class","svelte-13v19q"),v(fn,"class","svelte-13v19q"),v(tt,"class","selectWrapper svelte-13v19q"),v(u,"class","filters svelte-13v19q"),v(R,"class","sidebar svelte-13v19q"),ae(rt,"margin-left","15px"),v(rt,"class","svelte-13v19q"),v(Et,"class","results svelte-13v19q"),v(J,"class","sidebarContainer svelte-13v19q"),ae(i,"--form-select-bg-img","url('"+xl+"')"),v(i,"class","svelte-13v19q")},m(C,K){We(e,C,K),V(C,n,K),V(C,i,K),d(i,r),d(r,s),qe&&qe.m(s,null),d(s,l),d(s,a),d(a,o),d(a,h),d(h,_),d(a,p),Be&&Be.m(a,null),d(r,m),d(r,g),d(g,E),Ee(E,t[9]),d(g,q),d(g,F),d(F,D),d(r,Y),d(r,Z);for(let _e=0;_e<ye.length;_e+=1)ye[_e]&&ye[_e].m(Z,null);d(i,X),d(i,J),d(J,R),d(R,u),d(u,c),d(u,k),je&&je.m(u,null),d(u,I),d(u,z),d(z,P),d(P,Q),d(Q,y),d(P,A),d(P,T),d(P,M),d(P,ee),d(P,O),ot(P,t[13],!0),d(z,G),d(z,b),d(b,L),d(L,W),d(u,ie),d(u,ne),d(ne,N),d(N,H),d(H,pe),d(N,ue);for(let _e=0;_e<De.length;_e+=1)De[_e]&&De[_e].m(N,null);ot(N,t[11],!0),d(ne,Se),d(ne,de),d(de,re),d(re,Ue),d(u,Le),d(u,Te),d(Te,be),d(be,Ae),d(Ae,me),d(be,et);for(let _e=0;_e<te.length;_e+=1)te[_e]&&te[_e].m(be,null);ot(be,t[10],!0),d(Te,Ke),d(Te,Ge),d(Ge,Oe),d(Oe,Qe),d(u,Xe),d(u,Re),d(u,ct),d(u,ze),d(u,Pt),d(u,tt),d(tt,$e),d($e,bt),d($e,si);for(let _e=0;_e<5;_e+=1)Ut[_e]&&Ut[_e].m($e,null);d($e,li),d($e,yt),d($e,wt),d($e,kt),d(tt,oi),d(tt,fn),We(ht,fn,null),d(J,ai),d(J,Et),d(Et,rt),d(rt,ui),d(rt,Sn),d(rt,fi),d(rt,An),d(rt,ci),d(Et,hi),We(dt,Et,null),Fe=!0,In||(di=[ve(E,"input",t[23]),ve(E,"input",t[22]),ve(F,"click",t[22]),ve(P,"change",t[25]),ve(P,"change",t[18]),ve(L,"click",t[18]),ve(N,"change",t[26]),ve(N,"change",t[20]),ve(re,"click",t[20]),ve(be,"change",t[27]),ve(be,"change",t[21]),ve(Oe,"click",t[21]),ve($e,"change",t[16])],In=!0)},p(C,K){if(C[1]==Vt?qe?qe.p(C,K):(qe=lr(C),qe.c(),qe.m(s,l)):qe&&(qe.d(1),qe=null),(!Fe||K[0]&2)&&f!==(f=C[1].split("/").pop()+"")&&ge(_,f),(!Fe||K[0]&2)&&v(h,"href",C[1]),C[1]!=Vt?Be?Be.p(C,K):(Be=or(C),Be.c(),Be.m(a,null)):Be&&(Be.d(1),Be=null),K[0]&512&&E.value!==C[9]&&Ee(E,C[9]),(!Fe||K[0]&512)&&ae(F,"visibility",C[9]!==""?"visible":"hidden"),K[0]&131076){_t=Pe(C[2]);let ce;for(ce=0;ce<_t.length;ce+=1){const qt=sr(C,_t,ce);ye[ce]?(ye[ce].p(qt,K),se(ye[ce],1)):(ye[ce]=ar(qt),ye[ce].c(),se(ye[ce],1),ye[ce].m(Z,null))}for(Ft(),ce=_t.length;ce<ye.length;ce+=1)Fr(ce);Dt()}if(K[0]&16384&&(S=C[14]!==""&&Ce.getCsvSourceList(C[14]).length>0),S?je?je.p(C,K):(je=ur(C),je.c(),je.m(u,I)):je&&(je.d(1),je=null),(!Fe||K[0]&8192)&&B!==(B=C[13]!==""?"All Dimensions":"Dimension Count")&&ge(y,B),K[0]&8192&&ot(P,C[13]),(!Fe||K[0]&8192)&&ae(L,"visibility",C[13]!==""?"visible":"hidden"),(!Fe||K[0]&2048)&&oe!==(oe=C[11]==""?"Organism":"All Organisms")&&ge(pe,oe),K[0]&32){Ct=Pe(Object.keys(C[5]).sort());let ce;for(ce=0;ce<Ct.length;ce+=1){const qt=ir(C,Ct,ce);De[ce]?De[ce].p(qt,K):(De[ce]=cr(qt),De[ce].c(),De[ce].m(N,null))}for(;ce<De.length;ce+=1)De[ce].d(1);De.length=Ct.length}K[0]&2080&&ot(N,C[11]),(!Fe||K[0]&2048)&&ae(re,"visibility",C[11]!==""?"visible":"hidden"),(!Fe||K[0]&1024)&&fe!==(fe=C[10]==""?"Imaging Modality":"All Modalities")&&ge(me,fe),K[0]&64&&(hn=Pe(Object.keys(C[6]).sort()),te=br(te,K,_i,1,C,hn,it,be,Jr,hr,null,nr)),K[0]&1088&&ot(be,C[10]),(!Fe||K[0]&1024)&&ae(Oe,"visibility",C[10]!==""?"visible":"hidden");const _e={};K[0]&256&&(_e.sortAscending=C[8]),ht.$set(_e),(!Fe||K[0]&1)&&cn!==(cn=C[0].length+"")&&ge(Sn,cn),(!Fe||K[0]&8)&&ge(An,C[3]);const dn={};K[0]&1&&(dn.tableRows=C[0]),K[0]&512&&(dn.textFilter=C[9]),K[0]&128&&(dn.sortedBy=C[7]),dt.$set(dn)},i(C){if(!Fe){se(e.$$.fragment,C);for(let K=0;K<_t.length;K+=1)se(ye[K]);se(ht.$$.fragment,C),se(dt.$$.fragment,C),Fe=!0}},o(C){he(e.$$.fragment,C),ye=ye.filter(Boolean);for(let K=0;K<ye.length;K+=1)he(ye[K]);he(ht.$$.fragment,C),he(dt.$$.fragment,C),Fe=!1},d(C){C&&(x(n),x(i)),He(e,C),qe&&qe.d(),Be&&Be.d(),Ot(ye,C),je&&je.d(),Ot(De,C);for(let K=0;K<te.length;K+=1)te[K].d();Ot(Ut,C),He(ht),He(dt),In=!1,nt(di)}}}function dr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function eo(t,e,n){let i,r,s,l,a,o,f=new URLSearchParams(window.location.search).get("csv");try{new URL(f)}catch{f=Vt}let _=[],p=[],m=0,g=0,E={},q={};Ce.subscribe(y=>{n(0,_=X(y)),n(2,p=Ce.getCsvSourceList()),n(3,m=y.length),n(4,g=y.reduce((A,T)=>A+parseInt(T.written)||0,0))}),Ar.subscribe(y=>{let A={};for(const[T,M]of Object.entries(y))A[M]=T;n(5,E=A)}),Ir.subscribe(y=>{let A={};for(const[T,M]of Object.entries(y))A[M]=T;n(6,q=A)}),f&&wr(f,Ce);let F="",D=!1;function Y(){n(8,D=!D),Ce.sortTable(F,D)}function Z(y){n(7,F=y.target.value),F===""?Ce.sortTable("index",!0):Ce.sortTable(F,D)}function X(y){if(i!==""&&(y=y.filter(A=>A.dim_count==i)),s!=="")y=y.filter(A=>A.csv==s);else if(r!==""){let A=Ce.getCsvSourceList(r),T=[r,...A.map(M=>M.source)];y=y.filter(M=>T.includes(M.source))}if(l!==""&&(y=y.filter(A=>A.organismId==l)),a!=""&&(y=y.filter(A=>A.fbbiId==a)),o&&o!=""){let A=o.toLowerCase();y=y.filter(T=>{var M,ee;return((M=T.description)==null?void 0:M.toLowerCase().includes(A))||((ee=T.name)==null?void 0:ee.toLowerCase().includes(A))})}return y}function J(y){n(14,r=y.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,_=X(Ce.getRows()))}function R(y){n(13,i=y.target.value||""),n(0,_=X(Ce.getRows()))}function u(y){n(12,s=y.target.value||""),n(0,_=X(Ce.getRows()))}function c(y){n(11,l=y.target.value||""),n(0,_=X(Ce.getRows()))}function k(y){n(10,a=y.target.value||""),n(0,_=X(Ce.getRows()))}function S(y){n(9,o=y.target.value),n(0,_=X(Ce.getRows()))}function I(){o=this.value,n(9,o)}function z(){s=gn(this),n(12,s),n(14,r)}function P(){i=gn(this),n(13,i)}function Q(){l=gn(this),n(11,l),n(5,E)}function B(){a=gn(this),n(10,a),n(6,q)}return t.$$.update=()=>{t.$$.dirty[0]&1&&_.some(y=>y.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,l=""),n(10,a=""),n(9,o=""),[_,f,p,m,g,E,q,F,D,o,a,l,s,i,r,Y,Z,J,R,u,c,k,S,I,z,P,Q,B]}class to extends Ye{constructor(e){super(),Ze(this,e,eo,$l,xe,{},null,[-1,-1])}}function no(t){let e;return{c(){e=w("div"),e.innerHTML=`<h2>Introduction</h2> <p>The <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>
    was conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024. The stated goals of Challenge were:</p> <ul><li>Collect examples of OME-Zarr from multiple modalities, use cases, and
      institutions, available from a single location.</li> <li>Test the utility (and lack thereof) of existing OME-Zarr metadata and
      image viewers.</li> <li>Advance the adoption of the Zarr V3 specification, and also existing
      OME-Zarr RFCs.</li></ul> <p>The inspiration for the Challenge came from presentations at the OME Meeting
    that demonstrated the level of adoption of OME-Zarr, but highlighted the
    poor findability of the data.</p> <p>Work on the challenge started in earnest in July 2024. All progress is
    tracked in the <a href="https://github.com/ome/ome2024-ngff-challenge">ome2024-ngff-challenge</a>
    repo. It was agreed that the results
    of the OME-NGFF Challenge would be presented at the
    <a href="https://globalbioimaging.org/exchange-of-experience/exchange-of-experience-ix">2024 Global BioImaging Meeting</a>.</p> <h2>Process</h2> <p>The Challenge was run via a series of virtual meetings coordinated on the
    Image.sc Forums, with all
    <a href="https://hackmd.io/3emKqKQsT_2U35vLepzDEQ">notes and lists of participants</a>
    available.</p> <h2>Results</h2> <p>At the outset, we weren’t sure how much OME-Zarr data was available, if it
    could be converted to Zarr V3, or how many organisations would participate.
    In the end, we have far exceeded our expectations, with more than 0.5 PByte
    of OME-Zarr made available, across a wide range of modalities.</p> <p>To make the assembly as accessible as possible, we built the the OME-NGFF
    Challenge Viewer [URL?}, which incorporates a CSV with locations of
    datasets, and connects datasets to the OME NGFF Validator, for metadata
    validation and viewing.</p> <p>Perhaps the most important outcome of the Challenge is the establishment of
    a federated bioimage data system based on OME-Zarr. To our knowledge, this
    is the largest federated bioimage data collection ever assembled.</p>`,v(e,"class","svelte-1ivuwa5")},m(n,i){V(n,e,i)},p:we,i:we,o:we,d(n){n&&x(e)}}}class io extends Ye{constructor(e){super(),Ze(this,e,null,no,xe,{})}}function ro(t){let e,n;return e=new to({}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function so(t){let e,n;return e=new io({}),{c(){Je(e.$$.fragment)},m(i,r){We(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){He(e,i)}}}function lo(t){let e,n,i,r,s,l;n=new Gl({});const a=[so,ro],o=[];function h(f,_){return f[0].endsWith("/about/")?0:1}return r=h(t),s=o[r]=a[r](t),{c(){e=w("div"),Je(n.$$.fragment),i=j(),s.c(),v(e,"class","app svelte-1mc4mod")},m(f,_){V(f,e,_),We(n,e,null),d(e,i),o[r].m(e,null),l=!0},p:we,i(f){l||(se(n.$$.fragment,f),se(s),l=!0)},o(f){he(n.$$.fragment,f),he(s),l=!1},d(f){f&&x(e),He(n),o[r].d()}}}function oo(t){return[window.location.pathname]}class ao extends Ye{constructor(e){super(),Ze(this,e,oo,lo,xe,{})}}new ao({target:document.getElementById("app")});
